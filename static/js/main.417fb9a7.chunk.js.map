{"version":3,"sources":["components/OnboardContext.js","components/erc20-decimals-conversion.js","components/EditAllowanceForm.js","components/EditAllowanceFormContainer.js","components/TransactionModal.js","components/AddressDisplay.js","components/TokenAllowanceItem.js","components/TokenAllowanceItemContainer.js","components/wellKnownContracts.js","components/TokenAllowanceListContainer.js","components/AllowancesListContainer.js","components/AllowancesListFilter.js","components/AllowanceLister.js","components/OnboardGate.js","components/AddressInput.js","components/AddressInputContainer.js","App.js","index.js","../node_modules/web3-eth-accounts/src sync"],"names":["infuraApiKey","Web3Context","createContext","onboard","web3","address","networkId","loggedIn","loginFunction","wallets","walletName","preferred","infuraKey","rpcUrl","appUrl","email","OnboardContext","props","useState","setWeb3","setAddress","setNetworkId","setOnboard","setLoggedIn","selected","setSelected","useEffect","console","log","Onboard","dappId","subscriptions","wallet","name","Web3","provider","network","walletSelect","selectWallet","a","login","walletCheck","result","contextValue","selectFunction","Provider","value","children","Fragment","Segment","basic","padded","textAlign","Message","info","icon","size","Icon","loading","Content","Header","toBaseUnit","decimals","BN","s","String","Error","base","pow","negative","substring","comps","split","length","whole","fraction","wei","mul","add","neg","toString","EditAllowanceForm","showModal","tokenName","tokenAddress","spenderAddress","currentAllowance","newAllowance","handleClose","handleSubmit","handleChange","headline","Modal","open","onClose","List","Item","Form","onSubmit","Field","required","Input","label","tag","content","labelPosition","placeholder","type","onChange","Grid","columns","Row","Column","Button","fluid","onClick","positive","EditAllowanceFormContainer","tokenDecimals","tokenSupply","allowance","spender","tokenSymbol","web3Context","useContext","setNewAllowance","convertAllowanceToDisplaystring","useCallback","gte","bnToDisplayString","roundToDecimals","utils","toBN","rounded","e","parseFloat","amount","TransactionModal","message","isConfirming","transactionHash","error","success","Actions","AddressDisplay","ensName","setClipboard","navigator","clipboard","writeText","then","Popup","mouseEnterDelay","trigger","circular","window","unlimitedAllowance","subn","TokenAllowanceItem","ownerBalance","spenders","spenderENSNames","allowances","showZeroAllowances","editEnabled","openEditModal","rows","allowanceElement","criticalAllowance","undefined","loaded","isBN","eq","bn2DisplayString","Loader","active","inline","actionContent","compact","primary","disabled","isZero","push","Table","key","Cell","tokenDisplayString","raised","as","celled","selectable","HeaderCell","Body","TokenAllowanceItemContainer","tokenContractInstance","owner","reloadAllowanceFunc","editSpender","setEditSpender","showEditModal","setShowEditModal","showTransactionModal","setShowTransactionModal","transactionError","setTransactionError","setTransactionHash","confirming","setConfirming","handleSubmitEditAllowance","approve","from","tx","toLowerCase","wellKnownContracts","1","symbol","contract","require","namehash","TokenAllowanceListContainer","contractAddress","addressFilter","contractInstance","setContractInstance","setTokenDecimals","setTokenSupply","setTokenName","setTokenSymbol","addressAllowances","setAddressAllowances","setLoading","reverseNames","setReverseNames","setOwnerBalance","erc20Compliant","setErc20Compliant","cancelled","isCompliant","erc20Contract","ERC20Data","setProvider","currentProvider","at","Object","keys","includes","warn","totalSupply","balanceOf","balance","getAllowances","getReverseNames","foundNames","lookup","substr","eth","ens","resolver","ResolverContract","nh","hash","methods","call","reverseName","reloadAllowance","matchedFilter","filterString","AllowancesListContainer","tokenSpenders","page","tokens","entries","warning","AllowancesListFilter","toggleShowZeroAllowances","addressFilterValue","handleAddressFilterChange","clearAddressFilter","verticalAlign","centered","divided","width","link","Checkbox","toggle","checked","topicHashApprove","eventABI","client","createDfuseClient","apiKey","AllowanceLister","addressFromParams","useParams","setTokenSpenders","setError","setPage","setShowZeroAllowances","setAddressFilter","document","title","collectAllowances","cursor","searchPage","numPageResults","allEdges","graphql","variables","limit","query","response","errors","data","searchTransactions","pageInfo","endCursor","edges","concat","forEach","node","matchingLogs","logEntry","topics","decoded","abi","decodeLog","slice","parseInt","tokenContractAddress","JSON","stringify","OnboardGate","history","useHistory","isOnboarding","setIsOnboarding","walletSelected","setWalletSelected","doLogin","AddressInput","handleInput","input","target","action","addressInputStates","AddressInputContainer","addressInputState","setAddressInputState","setInput","prevWalletAddress","setPrevWalletAddress","validAddress","test","getAddress","resolvedAddress","newWalletAddress","widths","Group","App","HomepageHeading","inverted","vertical","Menu","fixed","Container","header","Link","to","position","href","rel","text","style","marginTop","marginBottom","fontSize","Subheader","path","paddingTop","container","stackable","floated","Divider","float","horizontal","pkg","version","ReactDOM","render","getElementById","webpackEmptyContext","req","code","resolve","module","exports","id"],"mappings":"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","file":"static/js/main.417fb9a7.chunk.js","sourcesContent":["import React, {useEffect, useState, createContext} from 'react'\nimport Onboard from 'bnc-onboard'\nimport Web3 from 'web3'\nimport {Icon, Message, Segment} from 'semantic-ui-react'\n\nconst onboardApiKey='f4b71bf0-fe50-4eeb-bc2b-b323527ed9e6'\nconst infuraApiKey='7f230a5ca832426796454c28577d93f2'\n\nexport const Web3Context = createContext({\n    onboard: null,\n    web3: null,\n    address: null,\n    networkId: null,\n    loggedIn: false,\n    loginFunction: null,\n})\n\nconst wallets = [\n    { walletName: 'metamask', preferred: true },\n    { walletName: 'coinbase', preferred: true },\n    {\n        walletName: 'walletConnect',\n        infuraKey: infuraApiKey,\n        preferred: true\n    },\n    { walletName: 'trust', preferred: true },\n    { walletName: 'dapper', preferred: true },\n    { walletName: 'authereum', preferred: true },\n    { walletName: 'opera' },\n    { walletName: 'status' },\n    { walletName: 'operaTouch' },\n    { walletName: 'torus' },\n    { walletName: 'status' },\n    {\n        walletName: 'ledger',\n        rpcUrl: `mainnet.infura.io/v3/${infuraApiKey}`\n    },\n    {\n        walletName: 'trezor',\n        appUrl: 'https://tac.dappstar.io',\n        email: 'michael@m-bauer.org',\n        rpcUrl: `mainnet.infura.io/v3/${infuraApiKey}`\n    }\n]\n\nconst OnboardContext = (props) => {\n    const [web3, setWeb3] = useState()\n    const [address, setAddress] = useState()\n    const [networkId, setNetworkId] = useState()\n    const [onboard, setOnboard] = useState()\n    const [loggedIn, setLoggedIn] = useState(false)\n    const [selected, setSelected] = useState(false)\n\n    useEffect(() => {\n        console.log(`Initializing OnBoard.js...`)\n        const onboard = (Onboard({\n            dappId: onboardApiKey,\n            networkId: 1,\n            subscriptions: {\n                wallet: wallet => {\n                    console.log(`${wallet.name} is now connected!`)\n                    setWeb3(new Web3(wallet.provider))\n                },\n                address: address => {\n                    setAddress(address)\n                    console.log(`Address changed to ${address}!`)\n                },\n                network: networkId => {\n                    setNetworkId(networkId)\n                    console.log(`NetworkId change to ${networkId}`)\n                }\n            },\n            walletSelect: {\n                wallets: wallets\n            }\n        }))\n        setOnboard(onboard)\n    }, [])\n\n    const selectWallet = async() => {\n        if (onboard) {\n            if (!selected) {\n                console.log('Selecting wallet...')\n                const selected = await onboard.walletSelect()\n                console.log('... Got wallet!')\n                setSelected(selected)\n                return selected\n            } else {\n                console.log('Wallet already selected.')\n                return true\n            }\n        } else {\n            console.log(`Trying select wallet without onboard`)\n            return false\n        }\n    }\n\n    const login = async () => {\n        if (onboard) {\n            if (!selected) {\n                const success = await selectWallet()\n                if (!success) {\n                    console.log(`Selecting wallet failed in login`)\n                    return false\n                }\n            }\n            if (!loggedIn) {\n                console.log(`performing walletCheck()...`)\n                const result = await onboard.walletCheck()\n                console.log(`... Done! Result: ${result}`)\n                setLoggedIn(result)\n                return result\n            } else {\n                console.log(`already logged in`)\n                return true\n            }\n        } else {\n            console.log(`Trying login without onboard`)\n            return false\n        }\n    }\n\n\n    const contextValue = {\n        onboard,\n        web3,\n        address,\n        networkId,\n        loginFunction: login,\n        selectFunction: selectWallet\n    }\n\n    if (onboard) {\n        return <Web3Context.Provider value={contextValue}>\n            {props.children}\n        </Web3Context.Provider>\n    } else {\n        console.log('Onboard not yet initialized!')\n        return (\n            <React.Fragment>\n                <Segment basic padded='very' textAlign={'center'}>\n                    <Message info icon size={'huge'}>\n                        <Icon name='spinner' loading />\n                        <Message.Content>\n                            <Message.Header>Initializing web3</Message.Header>\n                            Please wait while initializing web3 connection.\n                        </Message.Content>\n                    </Message>\n                </Segment>\n            </React.Fragment>\n        )\n\n    }\n}\n\nexport default OnboardContext","function isString(s) {\n  return (typeof s === 'string' || s instanceof String)\n}\n\nexport function toBaseUnit(value, decimals, BN) {\n  if (!isString(value)) {\n    throw new Error('Pass strings to prevent floating point precision issues.')\n  }\n  const ten = new BN(10)\n  const base = ten.pow(new BN(decimals))\n\n  // Is it negative?\n  let negative = (value.substring(0, 1) === '-')\n  if (negative) {\n    value = value.substring(1)\n  }\n\n  if (value === '.') { \n    throw new Error(\n    `Invalid value ${value} cannot be converted to`\n    + ` base unit with ${decimals} decimals.`) \n  }\n\n  // Split it into a whole and fractional part\n  let comps = value.split('.')\n  if (comps.length > 2) { throw new Error('Too many decimal points') }\n\n  let whole = comps[0], fraction = comps[1]\n\n  if (!whole) { whole = '0' }\n  if (!fraction) { fraction = '0' }\n  if (fraction.length > decimals) { \n    throw new Error('Too many decimal places') \n  }\n\n  while (fraction.length < decimals) {\n    fraction += '0'\n  }\n\n  whole = new BN(whole)\n  fraction = new BN(fraction)\n  let wei = (whole.mul(base)).add(fraction)\n\n  if (negative) {\n    wei = wei.neg()\n  }\n\n  return new BN(wei.toString(10), 10)\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Form, Grid, Header, Input, Message, Modal} from 'semantic-ui-react'\n\nconst EditAllowanceForm = ({showModal, tokenName, tokenAddress, spenderAddress, currentAllowance, newAllowance, handleClose, handleSubmit, handleChange}) => {\n    let headline = tokenName\n    if (headline === '') {\n        headline = `Unnamed ERC20 at ${tokenAddress}`\n    }\n    return (\n        <Modal\n            open={showModal}\n            size={'small'}\n            onClose={handleClose}\n        >\n            <Header>Edit Allowance</Header>\n            <Modal.Content>\n                <Message size={'huge'}>\n                    <Message.List>\n                        <Message.Item>Token: {headline}</Message.Item>\n                        <Message.Item>Spender: {spenderAddress}</Message.Item>\n                        <Message.Item>Current allowance: {currentAllowance}</Message.Item>\n                    </Message.List>\n                </Message>\n                <Form size={'huge'} onSubmit={handleSubmit}>\n                    <Form.Field required>\n                        <Input\n                            label={{ tag: true, content: 'Set new allowance' }}\n                            labelPosition='right'\n                            placeholder='Enter amount'\n                            type={'number'}\n                            name={'newAllowance'}\n                            onChange={handleChange}\n                            value={newAllowance}\n                        />\n                    </Form.Field>\n                    <Grid columns={2}>\n                        <Grid.Row>\n                            <Grid.Column>\n                                <Form.Button type={'button'} fluid size={'huge'} negative onClick={handleClose}>Cancel</Form.Button>\n                            </Grid.Column>\n                            <Grid.Column>\n                                <Form.Button type={'submit'} fluid size={'huge'} positive>Okay</Form.Button>\n                            </Grid.Column>\n                        </Grid.Row>\n                    </Grid>\n                </Form>\n            </Modal.Content>\n        </Modal>\n    )\n}\n\nEditAllowanceForm.propTypes = {\n    tokenName: PropTypes.string.isRequired,\n    tokenSymbol: PropTypes.string.isRequired,\n    tokenAddress: PropTypes.string.isRequired,\n    spenderAddress: PropTypes.string.isRequired,\n    spenderENSName: PropTypes.string,\n    currentAllowance: PropTypes.string.isRequired,\n    newAllowance: PropTypes.string,\n    showModal: PropTypes.bool.isRequired,\n    handleClose: PropTypes.func.isRequired,\n    handleChange: PropTypes.func.isRequired,\n    handleSubmit: PropTypes.func.isRequired,\n}\n\nexport default EditAllowanceForm","import React, {useCallback, useContext, useState} from 'react'\nimport PropTypes from 'prop-types'\nimport bnToDisplayString from '@triplespeeder/bn2string'\nimport {toBaseUnit} from './erc20-decimals-conversion'\nimport EditAllowanceForm from './EditAllowanceForm'\nimport {Web3Context} from './OnboardContext'\n\n\nconst EditAllowanceFormContainer = ({handleSubmit, handleClose, tokenDecimals, tokenSupply, tokenName, allowance, spender, tokenSymbol, tokenAddress}) => {\n    const web3Context = useContext(Web3Context)\n    const [newAllowance, setNewAllowance] = useState('0')\n\n    const convertAllowanceToDisplaystring = useCallback(() => {\n        if (allowance.gte(tokenSupply)) {\n            return 'unlimited'\n        } else {\n            const allowanceDisplay = bnToDisplayString({\n                value: allowance,\n                decimals: tokenDecimals,\n                roundToDecimals: web3Context.web3.utils.toBN(2)\n            })\n            return allowanceDisplay.rounded\n        }\n    }, [allowance, tokenDecimals, tokenSupply, web3Context])\n\n    const handleChange = (e, { name, value }) => {\n        console.log(`handleChange: ${name} - ${value}`)\n        if (parseFloat(value) < 0) {\n            value = '0'\n        }\n        setNewAllowance(value)\n    }\n    const localHandleSubmit = () => {\n        // convert 'newAllowance' number to token baseunit\n        let amount = toBaseUnit(newAllowance, tokenDecimals, web3Context.web3.utils.BN)\n        handleSubmit(amount)\n    }\n\n    return (\n        <EditAllowanceForm\n            currentAllowance={convertAllowanceToDisplaystring()}\n            handleClose={handleClose}\n            spenderAddress={spender}\n            showModal={true}\n            tokenName={tokenName}\n            handleChange={handleChange}\n            handleSubmit={localHandleSubmit}\n            tokenSymbol={tokenSymbol}\n            tokenAddress={tokenAddress}\n            newAllowance={newAllowance}\n            />\n    )\n}\n\nEditAllowanceFormContainer.propTypes = {\n    tokenDecimals: PropTypes.object.isRequired, // bignumber\n    tokenName: PropTypes.string.isRequired,\n    tokenSymbol: PropTypes.string.isRequired,\n    tokenSupply: PropTypes.object.isRequired,\n    tokenAddress: PropTypes.string.isRequired,\n    allowance: PropTypes.object.isRequired, // bignumber\n    spender: PropTypes.string.isRequired,\n    handleSubmit: PropTypes.func.isRequired,\n    handleClose: PropTypes.func.isRequired,\n}\n\nexport default EditAllowanceFormContainer","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Button, Icon, Message, Modal} from 'semantic-ui-react'\n\nconst TransactionModal = ({showModal, isConfirming, transactionHash, error, handleClose}) => {\n\n    let message\n    if (error) {\n        message = <Message error icon>\n            <Icon name='exclamation triangle' />\n            <Message.Content>\n                <Message.Header>Error</Message.Header>\n                {error}\n            </Message.Content>\n        </Message>\n    } else if (transactionHash) {\n        message = <Message success icon>\n            <Icon name='checkmark' />\n            <Message.Content>\n                <Message.Header>Allowance changed</Message.Header>\n                <p>The new allowance is now set.</p>\n                <p>Transaction Hash: {transactionHash}</p>\n            </Message.Content>\n        </Message>\n    } else if (isConfirming) {\n        message = <Message icon info>\n            <Icon name='spinner' loading/>\n            <Message.Content>\n                <Message.Header>Waiting for confirmation</Message.Header>\n                Transaction is being processed...\n            </Message.Content>\n        </Message>\n    }\n\n    return (\n        <Modal\n            open={showModal}\n            size={'small'}\n            onClose={handleClose}\n        >\n            <Modal.Content>\n                {message}\n            </Modal.Content>\n            {!isConfirming && <Modal.Actions>\n                <Button onClick={handleClose}>Dismiss</Button>\n            </Modal.Actions>}\n        </Modal>\n    )\n}\n\nTransactionModal.propTypes = {\n    showModal: PropTypes.bool.isRequired,\n    isConfirming: PropTypes.bool.isRequired,\n    transactionHash: PropTypes.string,\n    error: PropTypes.string,\n    handleClose: PropTypes.func.isRequired,\n}\n\nexport default TransactionModal","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Icon, Popup} from 'semantic-ui-react'\n\n\nconst AddressDisplay = (props) => {\n    const {address, ensName} = props\n    const setClipboard = () => {\n        navigator.clipboard.writeText(address).then(function() {\n            /* clipboard successfully set */\n        }, function() {\n            console.log(`failed to set clipboard`)\n        })\n    }\n\n    if (ensName) {\n        return <>\n            <div>{ensName}</div>\n            <div><small>{address}&nbsp;\n                <Popup mouseEnterDelay={500} content={'Copy to clipboard'} trigger={<Icon circular name={'copy outline'} size={'small'} onClick={()=>{setClipboard(address)}}/>}/>\n                <Popup mouseEnterDelay={500} content={'View on Etherscan'} trigger={<Icon circular name={'external square'} size={'small'} onClick={()=>{window.open(`https://etherscan.io/address/${address}`, '_blank')}}/>}/>\n            </small></div>\n        </>\n    } else {\n        return (\n            <div>\n                {address}&nbsp;\n                <Popup mouseEnterDelay={500} content={'Copy to clipboard'} trigger={<Icon circular name={'copy outline'} size={'small'} onClick={()=>{setClipboard(address)}}/>}/>\n                <Popup mouseEnterDelay={500} content={'View on Etherscan'} trigger={<Icon circular name={'external square'} size={'small'} onClick={()=>{window.open(`https://etherscan.io/address/${address}`, '_blank')}}/>}/>\n            </div>\n        )\n    }\n}\n\nAddressDisplay.propTypes = {\n    address: PropTypes.string.isRequired,\n    ensName: PropTypes.string\n}\n\n\nexport default AddressDisplay\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Button, Header, Loader, Popup, Segment, Table} from 'semantic-ui-react'\nimport AddressDisplay from './AddressDisplay'\nimport BN from 'bn.js'\nimport bn2DisplayString from '@triplespeeder/bn2string'\n\n\nconst unlimitedAllowance = new BN(2).pow(new BN(256)).subn(1)\n\nconst TokenAllowanceItem = ({ tokenName,\n                                tokenAddress,\n                                tokenDecimals,\n                                tokenSupply,\n                                tokenSymbol,\n                                ownerBalance,\n                                spenders,\n                                spenderENSNames,\n                                allowances,\n                                showZeroAllowances,\n                                editEnabled,\n                                openEditModal,\n                            }) => {\n\n    const rows = []\n    for (const spender of spenders) {\n        let allowanceElement\n        let criticalAllowance = false\n        let value = undefined\n        let loaded = BN.isBN(allowances[spender]) && BN.isBN(tokenDecimals) && BN.isBN(tokenSupply)\n        if (loaded) {\n            value = allowances[spender]\n            criticalAllowance = (value.eq(unlimitedAllowance)) || (value.gte(tokenSupply))\n            if (criticalAllowance) {\n                allowanceElement = <em>unlimited</em>\n            } else {\n                const decimals = tokenDecimals\n                const roundToDecimals = new BN(2)\n                const {rounded} = bn2DisplayString({value, decimals, roundToDecimals})\n                allowanceElement = `${rounded}`\n            }\n        } else {\n            allowanceElement = <Loader active inline size={'mini'}/>\n        }\n\n        let actionContent\n        if (loaded) {\n            actionContent = <Popup\n                content={editEnabled ? 'edit allowance' : 'Only address owner can edit allowance'}\n                trigger={<span><Button\n                    icon={'edit'}\n                    size={'small'}\n                    compact\n                    primary\n                    disabled={!editEnabled}\n                    onClick={() => {\n                        openEditModal(spender)\n                    }}\n                /></span>}\n            />\n        } else {\n            actionContent = <Loader active inline size={'mini'}/>\n        }\n\n        const isZeroAllowance = (value && value.isZero())\n        if (!(isZeroAllowance && !showZeroAllowances)) {\n            rows.push(\n                <Table.Row key={`${tokenAddress}-${spender}`}>\n                    <Table.Cell>\n                        <AddressDisplay address={spender} ensName={spenderENSNames[spender]}/>\n                    </Table.Cell>\n                    <Table.Cell negative={criticalAllowance}>\n                        {allowanceElement}\n                    </Table.Cell>\n                    <Table.Cell>\n                        {actionContent}\n                    </Table.Cell>\n                </Table.Row>\n            )\n        }\n    }\n\n    if (rows.length === 0) {\n        return null\n    }\n\n    let tokenDisplayString = tokenName\n    if (tokenDisplayString === '') {\n        tokenDisplayString = `Unnamed ERC20`\n    }\n    const roundToDecimals = new BN(2)\n    if (BN.isBN(ownerBalance) && BN.isBN(tokenDecimals)) {\n        const {rounded} = bn2DisplayString({value: ownerBalance, decimals: tokenDecimals, roundToDecimals})\n        tokenDisplayString += ` (current balance: ${rounded})`\n    }\n\n    let headline = <AddressDisplay address={tokenAddress} ensName={tokenDisplayString}/>\n\n    return (\n        <React.Fragment>\n            <Segment raised>\n                <Header as={'h3'}>\n                    {headline}\n                </Header>\n                <Table basic={'very'} celled selectable>\n                    <Table.Header>\n                        <Table.Row>\n                            <Table.HeaderCell>Spender</Table.HeaderCell>\n                            <Table.HeaderCell>Allowance</Table.HeaderCell>\n                            <Table.HeaderCell>Action</Table.HeaderCell>\n                        </Table.Row>\n                    </Table.Header>\n                    <Table.Body>\n                        {rows}\n                    </Table.Body>\n                </Table>\n            </Segment>\n        </React.Fragment>\n    )\n}\n\nTokenAllowanceItem.propTypes = {\n    tokenName: PropTypes.string,\n    tokenAddress: PropTypes.string,\n    tokenDecimals: PropTypes.object, // bignumber\n    tokenSupply: PropTypes.object, // bignumber\n    tokenSymbol: PropTypes.string,\n    ownerBalance: PropTypes.object, // bignumber\n    spenders: PropTypes.array.isRequired,\n    spenderENSNames: PropTypes.object.isRequired,\n    allowances: PropTypes.object.isRequired,\n    showZeroAllowances: PropTypes.bool.isRequired,\n    editEnabled: PropTypes.bool.isRequired,\n    openEditModal: PropTypes.func.isRequired,\n}\n\n\nexport default TokenAllowanceItem","import React, {useContext, useState} from 'react'\nimport PropTypes from 'prop-types'\nimport EditAllowanceFormContainer from './EditAllowanceFormContainer'\nimport {Web3Context} from './OnboardContext'\nimport TransactionModal from './TransactionModal'\nimport TokenAllowanceItem from './TokenAllowanceItem'\n\n\nconst TokenAllowanceItemContainer = ({ tokenName,\n                                       tokenAddress,\n                                       tokenDecimals,\n                                       tokenSupply,\n                                       tokenSymbol,\n                                       tokenContractInstance,\n                                       ownerBalance,\n                                       owner,\n                                       spenders,\n                                       spenderENSNames,\n                                       allowances,\n                                       showZeroAllowances,\n                                       reloadAllowanceFunc }) => {\n    const web3Context = useContext(Web3Context)\n    const [editSpender, setEditSpender] = useState('')\n    const [showEditModal, setShowEditModal] = useState(false)\n    const [showTransactionModal, setShowTransactionModal] = useState(false)\n    const [transactionError, setTransactionError] = useState('')\n    const [transactionHash, setTransactionHash] = useState('')\n    const [confirming, setConfirming] = useState(false)\n\n    const openEditModal = (spender) => {\n        setEditSpender(spender)\n        setShowEditModal(true)\n    }\n\n    const handleSubmitEditAllowance = async (newAllowance) => {\n        // make sure wallet is ready to transact before continuing\n        const loginResult = await web3Context.loginFunction()\n        if (!loginResult) {\n            console.log(`User failed to login. Cant create transaction.`)\n            return\n        } else {\n            console.log(`User successfully logged into wallet`)\n        }\n        console.log(`Setting new allowance ${newAllowance} for ${editSpender}`)\n        setTransactionError('')\n        setTransactionHash('')\n        setShowEditModal(false)\n        setShowTransactionModal(true)\n        setConfirming(true)\n        let result\n        try {\n            result = await tokenContractInstance.approve(editSpender, newAllowance.toString(), {\n                from: web3Context.address,\n            })\n            setTransactionHash(result.tx)\n            reloadAllowanceFunc(owner, editSpender)\n        } catch (e) {\n            console.log(`Error while approving: ${e.message}`)\n            setTransactionError(e.message)\n        }\n        setConfirming(false)\n    }\n\n    const handleCloseEditAllowance = () => {\n        setShowEditModal(false)\n    }\n\n    const handleCloseTransactionModal = () => {\n        setShowTransactionModal(false)\n    }\n\n    const editEnabled = (owner.toLowerCase() === web3Context.address.toLowerCase())\n\n    return (\n        <>\n            <TokenAllowanceItem\n                allowances={allowances}\n                tokenDecimals={tokenDecimals}\n                tokenSupply={tokenSupply}\n                tokenAddress={tokenAddress}\n                tokenName={tokenName}\n                editEnabled={editEnabled}\n                spenders={spenders}\n                spenderENSNames={spenderENSNames}\n                showZeroAllowances={showZeroAllowances}\n                openEditModal={openEditModal}\n                ownerBalance={ownerBalance}\n            />\n            {showEditModal && <EditAllowanceFormContainer\n                spender={editSpender}\n                tokenDecimals={tokenDecimals}\n                allowance={allowances[editSpender]}\n                tokenSymbol={tokenSymbol}\n                tokenName={tokenName}\n                tokenSupply={tokenSupply}\n                tokenAddress={tokenAddress}\n                handleSubmit={handleSubmitEditAllowance}\n                handleClose={handleCloseEditAllowance}\n            />}\n            {showTransactionModal && <TransactionModal\n                showModal={showTransactionModal}\n                isConfirming={confirming}\n                handleClose={handleCloseTransactionModal}\n                error={transactionError}\n                transactionHash={transactionHash}\n            />}\n\n        </>)\n}\n\nTokenAllowanceItemContainer.propTypes = {\n    tokenName: PropTypes.string,\n    tokenAddress: PropTypes.string,\n    tokenDecimals: PropTypes.object, // bignumber\n    tokenSupply: PropTypes.object, // bignumber\n    tokenSymbol: PropTypes.string,\n    tokenContractInstance: PropTypes.object,\n    owner: PropTypes.string.isRequired,\n    ownerBalance: PropTypes.object, // bignumber\n    spenders: PropTypes.array.isRequired,\n    spenderENSNames: PropTypes.object.isRequired,\n    allowances: PropTypes.object.isRequired,\n    showZeroAllowances: PropTypes.bool.isRequired,\n    reloadAllowanceFunc: PropTypes.func.isRequired,\n}\n\n\nexport default TokenAllowanceItemContainer","const wellKnownContracts = {\n    // main network\n    1: {\n        '0x89d24a6b4ccb1b6faa2625fe562bdd9a23260359': {\n            name: 'Sai Stablecoin',\n            symbol: 'SAI',\n        },\n        '0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2': {\n            name: 'Maker Token',\n            symbol: 'MKR',\n        },\n        '0xecf8f87f810ecf450940c9f60066b4a7a501d6a7': {\n            name: 'Old Wrapped Ether',\n            symbol: 'WETH'\n        },\n        '0xc66ea802717bfb9833400264dd12c2bceaa34a6d': {\n            name: 'Old Maker Token',\n            symbol: 'MKR'\n        },\n        '0xbb9bc244d798123fde783fcc1c72d3bb8c189413': {\n            name: 'TheDAO Token',\n            symbol: 'TheDAO'\n        }\n    }\n}\n\nexport default wellKnownContracts\n","import React, {useContext, useEffect, useState} from 'react'\nimport ERC20Data from '@openzeppelin/contracts/build/contracts/ERC20Detailed.json'\nimport {Web3Context} from './OnboardContext'\nimport PropTypes from 'prop-types'\nimport TokenAllowanceItemContainer from './TokenAllowanceItemContainer'\nimport wellKnownContracts from './wellKnownContracts'\nconst contract = require('@truffle/contract')\nconst namehash = require('eth-ens-namehash')\n\n\n/*\n    TokenAllowanceListContainer:\n    - stores token contract address and instance\n    - list of addresses that have an allowance\n    - Renders TokenAllowanceListItem for each address having an allowance\n */\nconst TokenAllowanceListContainer = ({contractAddress, owner, spenders, showZeroAllowances, addressFilter}) => {\n    const web3Context = useContext(Web3Context)\n    const [contractInstance, setContractInstance] = useState(null)\n    const [tokenDecimals, setTokenDecimals] = useState()\n    const [tokenSupply, setTokenSupply] = useState()\n    const [tokenName, setTokenName] = useState('')\n    const [tokenSymbol, setTokenSymbol] = useState('')\n    const [addressAllowances, setAddressAllowances] = useState({})\n    const [, setLoading] = useState(true)\n    const [reverseNames, setReverseNames] = useState({})\n    const [ownerBalance, setOwnerBalance] = useState()\n    const [erc20Compliant, setErc20Compliant] = useState(true)\n\n    useEffect(() => {\n        let cancelled = false\n        const getAllowances = async () => {\n            setLoading(true)\n\n            // initialize contract\n            let isCompliant = true\n            const erc20Contract = contract(ERC20Data)\n            erc20Contract.setProvider(web3Context.web3.currentProvider)\n            const contractInstance = await erc20Contract.at(contractAddress)\n            let tokenName = ''\n            let tokenSymbol = ''\n            // Some contracts like MKR and SAI do not implement the correct ERC20 name and symbol.\n            // Get their data from hardocded fallback\n            if (Object.keys(wellKnownContracts[web3Context.networkId]).includes(contractAddress.toLowerCase())) {\n                tokenName = wellKnownContracts[web3Context.networkId][contractAddress.toLowerCase()].name\n                tokenSymbol = wellKnownContracts[web3Context.networkId][contractAddress.toLowerCase()].symbol\n            } else {\n                try {\n                    tokenName = await contractInstance.name()\n                    tokenSymbol = await contractInstance.symbol()\n                } catch(error) {\n                    // Most likely token contract does not implement the name() method. Ignore error.\n                    console.warn(`Failed to get name/symbol of contract at ${contractAddress}. Please raise\n                    an issue to add this token at https://github.com/TripleSpeeder/token-allowance-checker/issues!`)\n                }\n            }\n            let decimals = web3Context.web3.utils.toBN('0')\n            try {\n                decimals = await contractInstance.decimals()\n            } catch(error) {\n                console.warn(`Contract at ${contractAddress} does not provide decimals(). Assuming 0.`)\n            }\n            let totalSupply, balance\n            try {\n                totalSupply = await contractInstance.totalSupply()\n                balance = await contractInstance.balanceOf(owner)\n            } catch (error) {\n                console.warn(`Contract at ${contractAddress} is not ERC20. Ignoring.`)\n                isCompliant = false\n            }\n            if (cancelled)\n                return\n            setErc20Compliant(isCompliant)\n            setContractInstance(contractInstance)\n            setTokenDecimals(decimals)\n            setTokenSupply(totalSupply)\n            setOwnerBalance(balance)\n            setTokenName(tokenName)\n            setTokenSymbol(tokenSymbol)\n\n            // for each allowedAddress, get current allowance of spender\n            const allowances = {}\n            if (isCompliant) {\n                for (const spender of spenders) {\n                    try {\n                        const allowance = await contractInstance.allowance(owner, spender)\n                        if (cancelled)\n                            return\n                        allowances[spender] = allowance\n                    }catch (e) {\n                        console.warn(`Contract at ${contractAddress} not ERC20 compliant. Failed to get allowance.`)\n                        isCompliant = false\n                        setErc20Compliant(false)\n                        break\n                    }\n                }\n                if (isCompliant)\n                    setAddressAllowances(allowances)\n            }\n            setLoading(false)\n        }\n        getAllowances()\n        return () => {\n            cancelled = true\n        }\n    }, [web3Context.web3, web3Context.networkId, contractAddress, owner, spenders])\n\n    useEffect(() => {\n        let cancelled = false\n        const getReverseNames = async(web3) => {\n            const foundNames = {}\n            for (const spender of spenders) {\n                try {\n                    const lookup = spender.toLowerCase().substr(2) + '.addr.reverse'\n                    const ResolverContract = await web3.eth.ens.resolver(lookup)\n                    const nh = namehash.hash(lookup)\n                    const reverseName = await ResolverContract.methods.name(nh).call()\n                    foundNames[spender] = reverseName\n                } catch(error) {\n                    // console.log(`No reverse name found for ${spender}`)\n                }\n            }\n            if (cancelled) {\n                return\n            }\n            setReverseNames(foundNames)\n        }\n        if (web3Context.web3) {\n            getReverseNames(web3Context.web3)\n        }\n        return () => {\n            cancelled = true\n        }\n    }, [web3Context.web3, spenders])\n\n    const reloadAllowance = async (owner, spender) => {\n        try {\n            addressAllowances[spender] = undefined\n            setAddressAllowances(addressAllowances)\n            const allowance = await contractInstance.allowance(owner, spender)\n            addressAllowances[spender] = allowance\n            setAddressAllowances(addressAllowances)\n        }catch(e) {\n            console.log(`Error loading allowance: ${e}`)\n        }\n    }\n\n    let matchedFilter = true\n    if (addressFilter.length) {\n        const filterString = addressFilter.toLowerCase()\n        matchedFilter = (\n                tokenName.toLowerCase().includes(filterString) ||\n                tokenSymbol.toLowerCase().includes(filterString) ||\n                contractAddress.toLowerCase().includes(filterString)\n        )\n    }\n\n    if (!erc20Compliant || !matchedFilter) {\n        return null\n    }\n\n    return (<TokenAllowanceItemContainer\n                tokenName={tokenName}\n                tokenAddress={contractAddress}\n                tokenDecimals={tokenDecimals}\n                tokenSupply={tokenSupply}\n                tokenSymbol={tokenSymbol}\n                owner={owner}\n                ownerBalance={ownerBalance}\n                spenders={spenders}\n                spenderENSNames={reverseNames}\n                allowances={addressAllowances}\n                tokenContractInstance={contractInstance}\n                showZeroAllowances={showZeroAllowances}\n                addressFilter={addressFilter}\n                reloadAllowanceFunc={reloadAllowance}\n            />)\n}\n\nTokenAllowanceListContainer.propTypes = {\n    contractAddress: PropTypes.string.isRequired,\n    owner: PropTypes.string.isRequired,\n    spenders: PropTypes.array.isRequired,\n    showZeroAllowances: PropTypes.bool.isRequired,\n    addressFilter: PropTypes.string.isRequired,\n}\n\nexport default TokenAllowanceListContainer","import React from 'react'\nimport PropTypes from 'prop-types'\nimport TokenAllowanceListContainer from './TokenAllowanceListContainer'\nimport {Icon, Message, Segment} from 'semantic-ui-react'\n\n\nconst AllowancesListContainer = ({tokenSpenders, address, showZeroAllowances, addressFilter, loading, error, page}) => {\n\n    // TODO: useMemo\n    const tokens = []\n    for (const [contractAddress, spenders] of Object.entries(tokenSpenders)) {\n        tokens.push(\n            <TokenAllowanceListContainer\n                key={contractAddress}\n                owner={address}\n                spenders={spenders}\n                contractAddress={contractAddress}\n                showZeroAllowances={showZeroAllowances}\n                addressFilter={addressFilter}\n            />,\n        )\n    }\n\n    if (loading) {\n        return (\n            <Segment basic padded='very' textAlign={'center'}>\n                <Message icon warning size={'huge'}>\n                    <Icon name='circle notched' loading/>\n                    <Message.Content>\n                        <Message.Header>Please wait while loading events</Message.Header>\n                        <p>Checking address: {address}</p>\n                        <div>Querying dfuse API for ERC20 Approvals, getting page {page+1}...</div>\n                    </Message.Content>\n                </Message>\n            </Segment>\n        )\n    }\n\n    if (error) {\n        return (\n            <Segment basic padded='very' textAlign={'center'}>\n                <Message error icon size={'huge'}>\n                    <Icon name='exclamation triangle'/>\n                    <Message.Content>\n                        <Message.Header>Error</Message.Header>\n                        {error}\n                    </Message.Content>\n                </Message>\n            </Segment>\n        )\n    }\n\n    if (address === '') {\n        return (\n            <Segment basic padded='very' textAlign={'center'}>\n                <Message info icon size={'huge'}>\n                    <Icon name='info'/>\n                    <Message.Content>\n                        <Message.Header>Enter an address to start!</Message.Header>\n                    </Message.Content>\n                </Message>\n            </Segment>\n        )\n    }\n\n    if (tokens.length === 0) {\n        return (\n            <Segment basic padded='very' textAlign={'center'}>\n                <Message success icon size={'huge'}>\n                    <Icon name='info'/>\n                    <Message.Content>\n                        <Message.Header>No Approvals</Message.Header>\n                        Address {address} has no Approvals.\n                    </Message.Content>\n                </Message>\n            </Segment>\n        )\n    }\n\n    return (<>\n        {tokens}\n    </>)\n}\n\nAllowancesListContainer.propTypes = {\n    tokenSpenders: PropTypes.object.isRequired,\n    address: PropTypes.string.isRequired,\n    showZeroAllowances: PropTypes.bool.isRequired,\n    addressFilter: PropTypes.string.isRequired,\n    loading: PropTypes.bool.isRequired,\n    error: PropTypes.string.isRequired,\n    page: PropTypes.number.isRequired,\n}\n\nexport default AllowancesListContainer","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Checkbox, Grid, Icon, Input} from 'semantic-ui-react'\n\nconst AllowancesListFilter = ( { showZeroAllowances,\n                                  toggleShowZeroAllowances,\n                                  addressFilterValue,\n                                  handleAddressFilterChange,\n                                  clearAddressFilter } ) => {\n    return (\n        <Grid verticalAlign='middle' centered textAlign={'center'} columns={2} divided>\n            <Grid.Row>\n                <Grid.Column width={8}>\n                    <Input label='Tokenfilter'\n                           name='filter'\n                           placeholder='Enter name, symbol or contract address'\n                           onChange={handleAddressFilterChange}\n                           value={addressFilterValue}\n                           icon={<Icon name='eraser' circular link onClick={clearAddressFilter} />}\n                           fluid\n                    />\n                </Grid.Column>\n                <Grid.Column width={8}>\n                    <Checkbox\n                        toggle\n                        label='Include zero allowances'\n                        checked={showZeroAllowances}\n                        onChange={toggleShowZeroAllowances}\n                    />\n                </Grid.Column>\n            </Grid.Row>\n        </Grid>\n    )\n}\n\nAllowancesListFilter.propTypes = {\n    showZeroAllowances: PropTypes.bool.isRequired,\n    toggleShowZeroAllowances: PropTypes.func.isRequired,\n    addressFilterValue: PropTypes.string.isRequired,\n    handleAddressFilterChange: PropTypes.func.isRequired,\n    clearAddressFilter: PropTypes.func.isRequired,\n}\n\nexport default AllowancesListFilter","import React, {useContext, useEffect, useState} from 'react'\nimport {useParams} from 'react-router-dom'\nimport {createDfuseClient} from '@dfuse/client'\nimport {Web3Context} from './OnboardContext'\nimport 'semantic-ui-css/semantic.min.css'\nimport {Segment} from 'semantic-ui-react'\nimport AllowancesListContainer from './AllowancesListContainer'\nimport AllowancesListFilter from './AllowancesListFilter'\n\nconst topicHashApprove = '0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925'\nconst eventABI = [\n    {\n        'indexed': true,\n        'internalType': 'address',\n        'name': 'owner',\n        'type': 'address',\n    },\n    {\n        'indexed': true,\n        'internalType': 'address',\n        'name': 'spender',\n        'type': 'address',\n    },\n    {\n        'indexed': false,\n        'internalType': 'uint256',\n        'name': 'value',\n        'type': 'uint256',\n    },\n]\n\nconst client = createDfuseClient({\n    apiKey: 'web_085aeaac9c520204b1a9dcaa357e5460',\n    network: 'mainnet.eth.dfuse.io',\n})\nconst searchTransactions = `query ($query: String! $limit: Int64! $cursor: String) {\n      searchTransactions(\n        indexName: LOGS, \n        query: $query, \n        limit: $limit, \n        sort: DESC,\n        cursor: $cursor,\n      ) {\n        pageInfo {\n          endCursor\n        }\n        edges {\n          node {\n            block {\n              number\n            }\n            matchingLogs {\n              data\n              topics\n              address\n            }\n          }\n        }\n      }\n    }`\n\nconst AllowanceLister = () => {\n\n    const web3Context = useContext(Web3Context)\n    const addressFromParams = useParams().address\n\n    const [loading, setLoading] = useState(false)\n    const [tokenSpenders, setTokenSpenders] = useState({})\n    const [error, setError] = useState('')\n    const [address, setAddress] = useState(\n        addressFromParams ? addressFromParams.toLowerCase() : '',\n    )\n    const [page, setPage] = useState(0)\n    const [showZeroAllowances, setShowZeroAllowances] = useState(true)\n    const [addressFilter, setAddressFilter] = useState('')\n\n    const toggleShowZeroAllowances = () => {\n        setShowZeroAllowances(!showZeroAllowances)\n    }\n\n    const clearAddressFilter = () => {\n        setAddressFilter('')\n    }\n\n    const handleAddressFilterChange = (e, {name, value}) => {\n        setAddressFilter(value)\n    }\n\n    useEffect(() => {\n        setAddress(addressFromParams ? addressFromParams.toLowerCase() : '')\n    }, [addressFromParams])\n\n    useEffect(() => {\n        document.title = `TAC - ${address}`\n    }, [address])\n\n    useEffect(() => {\n        let cancelled = false\n        const collectAllowances = async () => {\n            setLoading(true)\n            setError('')\n            setPage(0)\n            let cursor = ''\n\n            const tokenSpenders = {}\n            // Perform query\n            try {\n                // search page by page until no more results are found\n                let searchPage = 0\n                let numPageResults = 0\n                let allEdges = []\n                do {\n                    console.log(`Getting page ${searchPage}. Last page result: ${numPageResults}. Total results so far: ${allEdges.length}`)\n                    const response = await client.graphql(searchTransactions, {\n                        variables: {\n                            limit: '50',\n                            query: `topic.0:${topicHashApprove} topic.1:${address}`,\n                            cursor: cursor,\n                        },\n                    })\n                    if (cancelled) {\n                        console.log(`Received stale response.`)\n                        return\n                    }\n                    // any errors reported?\n                    if (response.errors) {\n                        throw response.errors\n                    }\n                    // get start cursor for next page\n                    cursor = response.data.searchTransactions.pageInfo.endCursor\n                    // get actual results\n                    const edges = response.data.searchTransactions.edges || []\n                    numPageResults = edges.length\n                    allEdges = allEdges.concat(edges)\n                    searchPage++\n                    setPage(searchPage)\n                } while (numPageResults>0)\n\n                allEdges.forEach(({node}) => {\n                    node.matchingLogs.forEach((logEntry) => {\n                        // Seems the dfuse query based on topic is not working correctly.\n                        // Double-check that the logEntry actually is of the expected topic.\n                        if (logEntry.topics[0] !== topicHashApprove) {\n                            console.warn(`Skipping log event. Topic is wrong, expected ${topicHashApprove}, got ${logEntry.topics[0]}`)\n                            return\n                        }\n                        if (logEntry.data === '0x') {\n                            console.warn(`Skipping log event. LogEntry.data is missing:`)\n                            console.warn(logEntry)\n                            return\n                        }\n                        let decoded\n                        try {\n                            decoded = web3Context.web3.eth.abi.decodeLog(eventABI, logEntry.data, logEntry.topics.slice(1))\n                        }catch (e) {\n                            console.warn(`Skipping log event. Failed to decode logEntry:`)\n                            console.warn(logEntry)\n                            return\n                        }\n                        // check if spender is an actual address. Some contracts emit logs with spender 0x0...\n                        if (!(parseInt(decoded.spender))) {\n                            console.log(`Skipping log event. Spender is ${decoded.spender}.`)\n                            return\n                        }\n                        // double-check owner is correct\n                        if (decoded.owner.toLowerCase() !== address) {\n                            console.warn(`Skipping log event due to owner mismatch. Expected ${address}, got ${decoded.owner}.`)\n                            return\n                        }\n\n                        // Add tokenContract if its new\n                        const tokenContractAddress = logEntry.address\n                        if (!(Object.keys(tokenSpenders).includes(tokenContractAddress))) {\n                            // console.log(`Adding tokenContract ${tokenContractAddress}`)\n                            tokenSpenders[tokenContractAddress] = []\n                        }\n                        // Add spender address if its new\n                        if (! (tokenSpenders[tokenContractAddress].includes(decoded.spender))) {\n                            // console.log(`Adding Spender ${decoded.spender} for ${tokenContractAddress}`)\n                            tokenSpenders[tokenContractAddress].push(decoded.spender)\n                        }\n                    })\n                    setTokenSpenders(tokenSpenders)\n                })\n            } catch (errors) {\n                console.log(errors)\n                if (!cancelled) {\n                    setError(JSON.stringify(errors))\n                }\n            }\n            setLoading(false)\n        }\n\n        setTokenSpenders({})\n        if (web3Context.web3 && address) {\n            collectAllowances(address)\n        }\n\n        return () => {\n            cancelled = true\n        }\n    }, [web3Context.web3, address])\n\n\n    return (\n        <React.Fragment>\n            <Segment basic>\n                <h2>Allowances of {address}:</h2>\n            </Segment>\n            <AllowancesListFilter showZeroAllowances={showZeroAllowances}\n                                  toggleShowZeroAllowances={toggleShowZeroAllowances}\n                                  addressFilterValue={addressFilter}\n                                  handleAddressFilterChange={handleAddressFilterChange}\n                                  clearAddressFilter={clearAddressFilter}\n            />\n            <AllowancesListContainer\n                tokenSpenders={tokenSpenders}\n                address={address}\n                showZeroAllowances={showZeroAllowances}\n                addressFilter={addressFilter}\n                error={error}\n                loading={loading}\n                page={page}\n            />\n        </React.Fragment>\n    )\n}\n\nexport default AllowanceLister","import React, {useEffect, useState, useContext} from 'react'\nimport {Web3Context} from './OnboardContext'\nimport {Icon, Message, Segment} from 'semantic-ui-react'\nimport {useHistory} from 'react-router-dom'\n\nconst OnboardGate = (props) => {\n    const history = useHistory()\n    const web3Context = useContext(Web3Context)\n    const [isOnboarding, setIsOnboarding] = useState(true)\n    const [walletSelected, setWalletSelected] = useState(false)\n\n    useEffect(() => {\n\n        const doLogin = async() => {\n            setIsOnboarding(true)\n            const result = await web3Context.loginFunction()\n            setWalletSelected(result)\n            setIsOnboarding(false)\n            if (!result) {\n                // send user back to home page if he rejected wallet selection\n                history.push('/')\n            }\n        }\n\n        if (web3Context.onboard) {\n            doLogin()\n        }\n\n    }, [web3Context.onboard, history])\n\n    if (walletSelected && web3Context.web3) {\n        return <React.Fragment>\n            {props.children}\n        </React.Fragment>\n    }\n\n    if (isOnboarding) {\n        return (\n            <React.Fragment>\n                <Segment basic padded='very' textAlign={'center'}>\n                    <Message info icon size={'huge'}>\n                        <Icon name='spinner' loading />\n                        <Message.Content>\n                            <Message.Header>Waiting for wallet</Message.Header>\n                            Please complete wallet selection.\n                        </Message.Content>\n                    </Message>\n                </Segment>\n            </React.Fragment>\n        )\n    }\n\n    if (!walletSelected) {\n        return (\n            <React.Fragment>\n                <Segment basic padded='very' textAlign={'center'}>\n                    <Message warning icon size={'huge'}>\n                        <Icon name='exclamation triangle' />\n                        <Message.Content>\n                            <Message.Header>No wallet selected</Message.Header>\n                            You need to select a wallet.\n                        </Message.Content>\n                    </Message>\n                </Segment>\n            </React.Fragment>\n        )\n    }\n}\n\nexport default OnboardGate","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Form, Input} from 'semantic-ui-react'\n\nconst AddressInput = (props) => {\n    const {handleInput, loading, error, value, success} = props\n\n    const handleChange = async (e) => {\n        const input=e.target.value\n        handleInput(input)\n    }\n\n    return (\n            <Form.Field\n                inline\n                width={14}\n            >\n                <Input\n                    placeholder='Address or ENS Name'\n                    error={error}\n                    loading={loading}\n                    onChange={handleChange}\n                    value={value}\n                    type={'text'}\n                    action={{\n                        type:'Submit',\n                        disabled:!success,\n                        content:'Go!',\n                        positive:true,\n                    }}\n                    label={'Enter address/ENS name or select in wallet'}\n                />\n            </Form.Field>\n    )\n}\n\nAddressInput.propTypes = {\n    value: PropTypes.string.isRequired,\n    loading: PropTypes.bool,\n    error: PropTypes.bool,\n    success: PropTypes.bool,\n    handleInput: PropTypes.func.isRequired,\n}\n\nexport default AddressInput\n","import React, {useState, useEffect, useContext} from 'react'\nimport AddressInput from './AddressInput'\nimport {Web3Context} from './OnboardContext'\nimport {useHistory, useParams} from 'react-router-dom'\nimport {Form, Grid} from 'semantic-ui-react'\n\nexport const addressInputStates = {\n    ADDRESS_INITIAL: 'address_initial', // no user interaction\n    ADDRESS_RESOLVING: 'address_resolving', // valid ENS name entered, waiting for resolving\n    ADDRESS_VALID: 'address_valid', // got a valid address\n    ADDRESS_INVALID: 'address_invalid',\n}\n\nconst AddressInputContainer = () => {\n    const web3Context = useContext(Web3Context)\n    const addressFromParams = (useParams().address || '')\n    const history = useHistory()\n    const [addressInputState, setAddressInputState] = useState(addressInputStates.ADDRESS_INITIAL)\n    const [input, setInput] = useState(\n        addressFromParams ? addressFromParams.toLowerCase() : ''\n            /*(web3Context.address? web3Context.address.toLowerCase() : '')*/\n    )\n    const [address, setAddress] = useState('')\n    const [prevWalletAddress, setPrevWalletAddress] = useState(web3Context.address ? web3Context.address.toLowerCase() : '')\n\n    // verify address input\n    useEffect(() => {\n        const handleInput = async() => {\n            if (input.length === 0) {\n                setAddressInputState(addressInputStates.ADDRESS_INITIAL)\n            } else {\n                // check for valid input (raw address and ENS name)\n                const validAddress = (/^(0x)?[0-9a-f]{40}$/i.test(input))\n                const validENSName = (/.*\\.eth$/i.test(input))\n                if (validENSName) {\n                    // resolve entered ENS name\n                    setAddressInputState(addressInputStates.ADDRESS_RESOLVING)\n                    try {\n                        const resolvedAddress = await web3Context.web3.eth.ens.getAddress(input)\n                        console.log(`Resolved ${input} to ${resolvedAddress}`)\n                        setAddressInputState(addressInputStates.ADDRESS_VALID)\n                        setAddress(resolvedAddress)\n                    } catch (e) {\n                        console.log('Could not resolve ' + input)\n                        setAddressInputState(addressInputStates.ADDRESS_INVALID)\n                    }\n                }\n                else if(validAddress) {\n                    setAddress(input)\n                    setAddressInputState(addressInputStates.ADDRESS_VALID)\n                }\n                else {\n                    setAddressInputState(addressInputStates.ADDRESS_INVALID)\n                }\n            }\n        }\n        handleInput()\n    }, [input, setAddress, web3Context.web3])\n\n    // accept address from wallet depending on context\n    useEffect(() => {\n        const newWalletAddress = web3Context.address ? web3Context.address.toLowerCase() : ''\n        // console.log(`fromParams: ${addressFromParams}`)\n        // console.log(`newWallet : ${newWalletAddress}`)\n        // console.log(`prevWallet: ${prevWalletAddress}`)\n        if (newWalletAddress !== '') {\n            if ((addressFromParams === '') || // in this case always take wallet address\n                (newWalletAddress !== prevWalletAddress) // user actively changed wallet address\n            ) {\n                setInput(newWalletAddress)\n                setPrevWalletAddress(newWalletAddress)\n                history.push(`/address/${newWalletAddress}`)\n            }\n        }\n    }, [web3Context.address, prevWalletAddress, addressFromParams, history])\n\n    const error = (addressInputState === addressInputStates.ADDRESS_INVALID)\n    const loading = (addressInputState === addressInputStates.ADDRESS_RESOLVING)\n    const success = (addressInputState === addressInputStates.ADDRESS_VALID)\n\n    const handleSubmit = () => {\n        if (success) {\n            console.log(`Submit! Address: ${address}`)\n            history.push(`/address/${address}`)\n        } else {\n            console.log(`Submit with invalid address`)\n        }\n    }\n\n    return (\n        <Grid textAlign={'center'} centered columns={1}>\n            <Grid.Row>\n                <Grid.Column width={14}>\n                    <Form\n                        size={'huge'}\n                        onSubmit={handleSubmit}\n                        error = {error}\n                        success= {success}\n                        widths={'equal'}\n                    >\n                        <Form.Group>\n                            <AddressInput handleInput={setInput}\n                                          value={input}\n                                          error={error}\n                                          success={success}\n                                          loading={loading}\n                            />\n                        </Form.Group>\n                    </Form>\n                </Grid.Column>\n            </Grid.Row>\n        </Grid>\n    )\n}\n\nAddressInputContainer.propTypes = {\n}\n\nexport default AddressInputContainer\n","import React from 'react'\nimport './App.css'\nimport {HashRouter as Router, Link, Route, Switch} from 'react-router-dom'\nimport AllowanceLister from './components/AllowanceLister'\nimport OnboardGate from './components/OnboardGate'\nimport {Button, Container, Divider, Grid, Header, Icon, List, Menu, Popup, Segment} from 'semantic-ui-react'\nimport AddressInputContainer from './components/AddressInputContainer'\nimport OnboardContext from './components/OnboardContext'\nimport pkg from '../package.json'\n\n\nconst App = () => {\n\n    const HomepageHeading =\n        <Segment\n            inverted={false}\n            textAlign={'center'}\n            vertical>\n            <Menu fixed='top' inverted size={'huge'}>\n                <Container>\n                    <Menu.Item\n                        header\n                        as={Link}\n                        to={`/`}\n                    >\n                        <Icon name={'home'} size={'big'}/> Home\n                    </Menu.Item>\n                    <Menu.Item\n                        as={Link}\n                        to={`/address/`}\n                    >\n                        <Icon name={'search'} size={'big'}/> Check Allowances\n                    </Menu.Item>\n                    <Menu.Menu position='right'>\n                        <Menu.Item>\n                            <a href={'https://github.com/TripleSpeeder/token-allowance-checker'}\n                               title={'github.com/TripleSpeeder/token-allowance-checker'}\n                               target={'_blank'} rel=\"noopener noreferrer\"\n                            >\n                                <Icon name={'github'} size={'big'}/>\n                            </a>\n                        </Menu.Item>\n                    </Menu.Menu>\n                </Container>\n            </Menu>\n            <Container\n                text\n                style={{\n                    marginTop: '4em',\n                    marginBottom: '2em'\n                }}\n            >\n                <Header\n                    as='h1'\n                    inverted={false}\n                    style={{\n                        fontSize: '3em',\n                        marginTop: '0.5em',\n                    }}\n                >\n                    Token Allowance Checker\n                    <Header.Subheader>\n                        powered by <a href={'https://www.dfuse.io/'} rel=\"noopener noreferrer\" target={'_blank'}>dfuse</a>\n                    </Header.Subheader>\n                </Header>\n            </Container>\n        </Segment>\n\n    return (\n        <Router>\n            {HomepageHeading}\n            <OnboardContext>\n                <Switch>\n                <Route path={['/address/:address', '/address']}>\n                    <Container>\n                        <OnboardGate>\n                            <Segment basic padded>\n                                <AddressInputContainer/>\n                            </Segment>\n                            <AllowanceLister/>\n                        </OnboardGate>\n                    </Container>\n                </Route>\n                <Route path={'/'}>\n                    <Segment basic vertical style={{ paddingTop: '4em' }}>\n                        <Grid container stackable verticalAlign='top'>\n                            <Grid.Row>\n                                <Grid.Column width={8}>\n                                    <Header as='h3' style={{ fontSize: '2em' }}>\n                                        Do you actually know who can spend your tokens?\n                                    </Header>\n                                    <p style={{ fontSize: '1.33em' }}>\n                                        <em>Token Allowance Checker</em> helps you keep track of which contracts you have approved to spend\n                                        your tokens.\n                                    </p>\n                                    <Header as='h3' style={{ fontSize: '2em' }}>\n                                        Control your approvals\n                                    </Header>\n                                    <p style={{ fontSize: '1.33em' }}>\n                                        <em>Token Allowance Checker</em> will show you all approvals for ERC20-compliant tokens, and the option to change\n                                        the approved amount - or completely zero it.</p>\n                                </Grid.Column>\n                                <Grid.Column floated='right' width={7}>\n                                    <Header as='h3' style={{ fontSize: '2em' }}>\n                                        The unlimited approval problem\n                                    </Header>\n                                    <p style={{ fontSize: '1.33em' }}>\n                                        Many DApps have the habit of requiring you to approve effectively unlimited amount of\n                                        tokens. This helps improving the user experience, as you only have to sign off an approval\n                                        once and it will be enough for all future transactions.\n                                    </p>\n                                    <p style={{ fontSize: '1.33em' }}>\n                                        However this also means that the DApp (or the person/entity controlling it) can at any time\n                                        transfer <em>all of your tokens</em>, without requiring any further approval.\n                                    </p>\n                                    <p style={{ fontSize: '1.33em' }}>\n                                        In addition, there is no concept of expiring approvals. Once approved, the approval will\n                                        remain forever. If you do not trust a DApp or its operators anymore, there is usually no\n                                        easy way to remove the approval.\n                                    </p>\n                                </Grid.Column>\n                            </Grid.Row>\n                        </Grid>\n                    </Segment>\n                    <Segment basic textAlign={'center'}>\n                        <Button as={Link} to={`/address/`} primary size={'massive'}>Check Allowances<Icon name='right arrow' /></Button>\n                    </Segment>\n\n                </Route>\n            </Switch>\n            </OnboardContext>\n            <Segment basic>\n                <Divider/>\n                <Container textAlign={'center'}>\n                    <span style={{ fontSize: '1em', float: 'right' }}><Icon name={'copyright outline'}/> Michael Bauer</span>\n                    <List horizontal >\n                        <List.Item as={'a'} href={'https://twitter.com/TripleSpeeder'} target={'_blank'}>\n                            <Popup content='@triplespeeder' trigger={<Icon size={'big'} name={'twitter'}/>}/>\n                        </List.Item>\n                        <List.Item as={'a'} href={'https://t.me/triplespeeder'} target={'_blank'}>\n                            <Popup content='@triplespeeder' trigger={<Icon size={'big'} name={'telegram'}/>}/>\n                        </List.Item>\n                        <List.Item as={'a'} href={'mailto:michael@m-bauer.org'}>\n                            <Popup content='michael@m-bauer.org' trigger={<Icon size={'big'} name={'mail outline'}/>}/>\n                        </List.Item>\n                        <List.Item as={'a'} href={'https://github.com/TripleSpeeder'} target={'_blank'}>\n                            <Popup content='github.com/TripleSpeeder' trigger={<Icon size={'big'} name={'github'}/>}/>\n                        </List.Item>\n                        <List.Item as={'a'} href={'https://www.reddit.com/u/TripleSpeeder'} target={'_blank'}>\n                            <Popup content='u/TripleSpeeder' trigger={<Icon size={'big'} name={'reddit'}/>}/>\n                        </List.Item>\n                    </List>\n                    <span style={{ fontSize: '1em', float: 'left' }}>{pkg.version}</span>\n                </Container>\n            </Segment>\n        </Router>\n    )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 972;"],"sourceRoot":""}