(this["webpackJsonptoken-allowance-checker"]=this["webpackJsonptoken-allowance-checker"]||[]).push([[2],{1053:function(e,t,a){"use strict";a.r(t);var n=a(39),r=a(0),c=a.n(r),o=(a(884),a(68)),l=a(69),s=a(1106),i=a(1102),d=a(1101),u=a(1091),m=a(500),p=a(78),b=a(1104),f=a(1055),w=a(1090),v=a(1096),E=a(1095),h=a(1103),g=(a(885),a(14)),y=a(276),I=a.n(y),k=a(1100),O=a(1098),A=a(1094),S=function(e){var t,a,n=e.ethAddress,r=e.mobile,o=e.networkId,l=e.inline,s=n.address,i=n.ensName,d=n.esContractName,u=function(e){navigator.clipboard.writeText(e).then((function(){}),(function(){console.log("failed to set clipboard")}))};switch(i?t="".concat(i):d&&(t="".concat(d)),o){case 3:a="https://ropsten.etherscan.io/address/".concat(s);break;case 1:a="https://etherscan.io/address/".concat(s);break;default:a="https://etherscan.io/address/".concat(s)}if(r){var m,b,f,w=s.substr(0,6)+"..."+s.substr(-6,6),v=d&&c.a.createElement("div",null,"Contract name: ",c.a.createElement("strong",null,d)),h=i&&c.a.createElement("div",null,"ENS name: ",c.a.createElement("strong",null,i)),g=c.a.createElement(A.a,null,c.a.createElement(A.a.Content,null,c.a.createElement(A.a.Header,null,s),c.a.createElement(A.a.Content,null,v,h),c.a.createElement(A.a.Extra,null,c.a.createElement(p.a,{link:!0,circular:!0,name:"copy outline",onClick:function(){u(s)}}),c.a.createElement(p.a,{link:!0,circular:!0,name:"external square",onClick:function(){window.open(a,"_blank")}}))));if(l)m=c.a.createElement("strong",null,null!==(b=t)&&void 0!==b?b:w);else m=c.a.createElement("div",null,c.a.createElement("strong",null,null!==(f=t)&&void 0!==f?f:w));return c.a.createElement(E.a,{on:"click",content:g,trigger:m})}var y=c.a.createElement(E.a,{mouseEnterDelay:500,content:"Copy to clipboard",trigger:c.a.createElement(p.a,{circular:!0,name:"copy outline",size:"small",onClick:function(){u(s)}})}),I=c.a.createElement(E.a,{mouseEnterDelay:500,content:"View on Etherscan",trigger:c.a.createElement(p.a,{circular:!0,name:"external square",size:"small",onClick:function(){window.open(a,"_blank")}})});return t?l?c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,t)," (",c.a.createElement("small",null,s,"\xa0",y,I),")"):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("strong",null,t)),c.a.createElement("div",null,c.a.createElement("small",null,s,"\xa0",y,I))):l?c.a.createElement("span",null,s,"\xa0",y,I):c.a.createElement("div",null,s,"\xa0",y,I)},x=a(35),T=a.n(x),j=a(28),C=a(1087),R=a(133),N=a.n(R),_=a(108),B=a(43),U=function(e){var t,a,n=e.allowanceId,r=Object(g.b)(),o=Object(g.c)((function(e){return e.allowances.allowancesById[n]})),l=Object(g.c)((function(e){return o.editTransactionId?e.transactions.transactionsById[o.editTransactionId]:void 0})),s=Object(g.c)((function(e){return e.addresses.walletAddressId}));if(l){var i,d,u;switch(l.transactionState){case B.a.CONFIRMED:i=c.a.createElement(p.a,{name:"check",size:"large"}),u="Transaction confirmed",d="Transaction hash: ".concat(l.transactionHash);break;case B.a.FAILED:i=c.a.createElement(p.a,{name:"exclamation triangle",color:"red",size:"large"}),u="Transaction failed",d="".concat(l.error);break;case B.a.SUBMITTED:i=c.a.createElement(p.a,{name:"spinner",loading:!0,size:"large"}),u="Transaction created",d="Waiting for confirmation...";break;case B.a.INITIAL:default:i=c.a.createElement(p.a,{name:"question",size:"large"}),u="Transaction unknown",d="Tx state INITIAL"}t=c.a.createElement(E.a,{header:u,content:d,trigger:i})}if((null===l||void 0===l?void 0:l.transactionState)!==B.a.SUBMITTED){var m=o.ownerId===s;a=c.a.createElement(E.a,{content:m?"edit allowance":"Only address owner can edit allowance",trigger:c.a.createElement("span",null,c.a.createElement(f.a,{icon:"edit",size:"small",compact:!0,primary:!0,disabled:!m,onClick:function(e){e.preventDefault(),r(Object(_.c)(n))}}))})}return c.a.createElement(c.a.Fragment,null,a,"\xa0",t)},L=new T.a(2).pow(new T.a(256)).subn(1),z=function(e){var t,a,n=e.allowanceId,o=Object(g.b)(),l=Object(g.c)((function(e){return e.allowances.allowancesById[n]})),s=Object(g.c)((function(e){return e.allowances.allowanceValuesById[n]})),i=Object(g.c)((function(e){return e.tokenContracts.contractsById[l.tokenContractId]})),d=Object(g.c)((function(e){return e.addresses.addressesById[l.spenderId]})),u=Object(g.c)((function(e){return e.respsonsive})).mobile,m=Object(g.c)((function(e){return e.onboard})).networkId;switch(Object(r.useEffect)((function(){s.state===j.a.QUERY_STATE_INITIAL&&o(Object(j.c)(n))}),[s,n,o]),s.state){case j.a.QUERY_STATE_RUNNING:t=c.a.createElement(C.a,{active:!0,inline:!0,size:"mini"});break;case j.a.QUERY_STATE_COMPLETE:if(a=s.value.eq(L)||s.value.gte(i.totalSupply))t=c.a.createElement("em",null,"unlimited");else{var p=new T.a("2"),b=N()({value:s.value,decimals:i.decimals,roundToDecimals:p}).rounded;t=c.a.createElement("span",null,b)}break;case j.a.QUERY_STATE_ERROR:t=c.a.createElement("span",null,"error");break;case j.a.QUERY_STATE_INITIAL:default:t=""}return c.a.createElement(O.a.Row,{key:"".concat(n)},c.a.createElement(O.a.Cell,null,c.a.createElement(S,{ethAddress:d,networkId:m,mobile:u})),c.a.createElement(O.a.Cell,{negative:a},t),c.a.createElement(O.a.Cell,null,c.a.createElement(U,{allowanceId:n})))},F=a(90),D=function(e){var t=e.tokenId,a=e.ownerId,o=e.allowanceIds,l=Object(g.b)(),s=Object(g.c)((function(e){return e.respsonsive})).mobile,d=Object(g.c)((function(e){return e.onboard})).networkId,u=Object(g.c)((function(e){return e.tokenContracts.contractsById[t]})),m=Object(g.c)((function(e){return e.addresses.addressesById[t]})),f=Object(g.c)((function(e){var n=Object(F.c)(a,t);return e.balances.balancesById[n]})),w=Object(r.useState)(!0),v=Object(n.a)(w,2),E=v[0],h=v[1];Object(r.useEffect)((function(){!f&&(null===u||void 0===u?void 0:u.contractInstance)&&l(Object(F.b)(a,t))}),[f,a,t,u,l]);if(!u)return c.a.createElement(i.a,{raised:!0},c.a.createElement(k.a,null,c.a.createElement(k.a.Header,null,c.a.createElement(k.a.Line,null)),c.a.createElement(k.a.Paragraph,null,c.a.createElement(k.a.Line,null),c.a.createElement(k.a.Line,null))));var y=u.name;""===y&&(y="Unnamed ERC20");var I=new T.a(2);if(f&&f.queryState!==j.a.QUERY_STATE_RUNNING){var A=N()({value:f.value,decimals:u.decimals,roundToDecimals:I}).rounded;y+=" (".concat(A," ").concat(u.symbol,")")}else y+=" (loading...)";var x=c.a.createElement("div",null,y),C=[];if(o.forEach((function(e){C.push(c.a.createElement(z,{key:e,allowanceId:e}))})),s){var R;E||(R=c.a.createElement(O.a,{basic:"very",celled:!0,unstackable:!0,compact:!0},c.a.createElement(O.a.Header,null,c.a.createElement(O.a.Row,null,c.a.createElement(O.a.HeaderCell,null,"Spender"),c.a.createElement(O.a.HeaderCell,null,"Allowance"),c.a.createElement(O.a.HeaderCell,null,"Action"))),c.a.createElement(O.a.Body,null,C)));var _=c.a.createElement(p.a,{style:{float:"right"},name:E?"chevron down":"chevron up",size:"mini",onClick:function(){h(!E)}});return c.a.createElement(i.a,{raised:!0},c.a.createElement(b.a,{size:"small"},_,x,c.a.createElement(b.a.Subheader,null,c.a.createElement(S,{ethAddress:m,mobile:s,networkId:d}))),R)}return c.a.createElement(i.a,{raised:!0},c.a.createElement(b.a,{size:"medium"},x,c.a.createElement(b.a.Subheader,null,c.a.createElement(S,{ethAddress:m,mobile:s,networkId:d}))),c.a.createElement(O.a,{basic:"very",celled:!0,selectable:!0},c.a.createElement(O.a.Header,null,c.a.createElement(O.a.Row,null,c.a.createElement(O.a.HeaderCell,null,"Spender"),c.a.createElement(O.a.HeaderCell,null,"Allowance"),c.a.createElement(O.a.HeaderCell,null,"Action"))),c.a.createElement(O.a.Body,null,C)))},Q=a(1099),M=function(e){var t=e.mobile,a=e.info,n=e.warning,r=e.error,o=e.success,l=e.icon,s=e.header,d=e.body,u=!t&&"very",m=!!l,p=t?"small":"huge",b=t?"left":"center";return c.a.createElement(i.a,{basic:!0,padded:u,textAlign:b},c.a.createElement(Q.a,{warning:n,info:a,error:r,success:o,icon:m,size:p},m&&l,c.a.createElement(Q.a.Content,null,c.a.createElement(Q.a.Header,null,s),d)))},P=function(e){var t,a=e.ownerId,n=e.showZeroAllowances,r=e.addressFilter,o=Object(g.c)((function(e){var t,c=null===(t=n&&""===r?e.allowances.allowanceIdsByOwnerId[a]:e.allowances.allowanceIdsByOwnerId[a].filter((function(t){var a=e.allowances.allowancesById[t];if(!n){var c=e.allowances.allowanceValuesById[t];if(c.state===j.a.QUERY_STATE_COMPLETE&&c.value.isZero())return!1}if(r){var o=r.toLowerCase(),l=e.tokenContracts.contractsById[a.tokenContractId];if(l){var s,i=e.addresses.addressesById[l.addressId];if(!(l.name.toLowerCase().includes(o)||l.symbol.toLowerCase().includes(o)||i.address.toLowerCase().includes(o)||(null===(s=i.ensName)||void 0===s?void 0:s.toLowerCase().includes(o))))return!1}else console.warn("No tokencontract for ".concat(a.tokenContractId))}return!0})))||void 0===t?void 0:t.map((function(t){return e.allowances.allowancesById[t]}));return I.a.groupBy(c,"tokenContractId")})),l=Object(g.c)((function(e){return e.allowances.allowanceQueryStateByOwner[a]})),s=Object(g.c)((function(e){return e.addresses.addressesById[a]})),i=Object(g.c)((function(e){return e.respsonsive.mobile})),d=Object(g.c)((function(e){return e.onboard.networkId}));if(!l)return console.log("No querystate available for ".concat(a)),null;for(var u=[],m=0,b=Object.entries(o);m<b.length;m++){var f=b[m],w=f[0],v=f[1].map((function(e){return e.id}));u.push(c.a.createElement(D,{key:w,tokenId:w,ownerId:a,allowanceIds:v}))}switch(l.state){case j.a.QUERY_STATE_RUNNING:t=c.a.createElement(M,{mobile:i,header:"Loading events",body:"Querying dfuse API for ERC20 Approvals, getting page ".concat(l.currentPage+1,"..."),warning:!0,icon:c.a.createElement(p.a,{name:"circle notched",loading:!0})});break;case j.a.QUERY_STATE_ERROR:t=c.a.createElement(M,{mobile:i,error:!0,header:"Error",icon:c.a.createElement(p.a,{name:"exclamation triangle"}),body:l.error});break;case j.a.QUERY_STATE_COMPLETE:if(0===u.length){var E=c.a.createElement(c.a.Fragment,null,c.a.createElement(S,{ethAddress:s,mobile:i,networkId:d,inline:!0})," ","has no approvals.");t=c.a.createElement(M,{mobile:i,success:!0,icon:c.a.createElement(p.a,{name:"info"}),header:"No Approvals",body:E})}break;case j.a.QUERY_STATE_INITIAL:default:return c.a.createElement("div",null,"Unhandled state!")}return c.a.createElement(c.a.Fragment,null,t,u)},Y=a(1088),q=a(1089),W=function(e){var t=e.showZeroAllowances,a=e.toggleShowZeroAllowances,n=e.addressFilterValue,r=e.handleAddressFilterChange,o=e.refresh,l=e.clearAddressFilter;return e.mobile?c.a.createElement(h.a,{verticalAlign:"middle",centered:!0,textAlign:"center",columns:2,divided:!0},c.a.createElement(h.a.Row,null,c.a.createElement(h.a.Column,{width:13},c.a.createElement(Y.a,{toggle:!0,label:"Include zero allowances",checked:t,onChange:a})),c.a.createElement(h.a.Column,{width:3},c.a.createElement(f.a,{circular:!0,icon:"refresh",onClick:o,title:"Refresh allowances",size:"small",compact:!0}))),c.a.createElement(h.a.Row,null,c.a.createElement(h.a.Column,{width:16},c.a.createElement(q.a,{name:"filter",placeholder:"Filter by name, symbol or address",onChange:r,value:n,icon:c.a.createElement(p.a,{name:"eraser",circular:!0,link:!0,onClick:l}),fluid:!0})))):c.a.createElement(h.a,{verticalAlign:"middle",centered:!0,textAlign:"center",columns:3,divided:!0,stackable:!0},c.a.createElement(h.a.Row,null,c.a.createElement(h.a.Column,{width:9},c.a.createElement(q.a,{label:"Tokenfilter",name:"filter",placeholder:"Enter name, symbol or contract address",onChange:r,value:n,icon:c.a.createElement(p.a,{name:"eraser",circular:!0,link:!0,onClick:l}),fluid:!0})),c.a.createElement(h.a.Column,{width:6},c.a.createElement(Y.a,{toggle:!0,label:"Include zero allowances",checked:t,onChange:a})),c.a.createElement(h.a.Column,{width:1},c.a.createElement(f.a,{circular:!0,icon:"refresh",onClick:o,title:"Refresh allowances",size:"small",compact:!0}))))};var G=a(1093),H=a(1092),V=function(e){var t,a=e.mobile,n=e.tokenName,r=e.handleChange,o=e.tokenSymbol,l=e.spender,s=e.currentAllowance,i=e.newAllowance,d=e.handleClose,u=e.handleSubmit,m=a?"small":"huge",p=c.a.createElement(S,{ethAddress:l,mobile:a,networkId:1,inline:!0});return t=a?c.a.createElement(c.a.Fragment,null,c.a.createElement("label",null,"New Allowance"),c.a.createElement(q.a,{placeholder:"Enter amount",type:"number",name:"newAllowance",onChange:r,value:i,fluid:!0})):c.a.createElement(q.a,{label:{tag:!0,content:"Enter new allowance"},labelPosition:"right",placeholder:"Enter amount",type:"number",name:"newAllowance",onChange:r,value:i}),c.a.createElement(G.a,{open:!0,size:"small",onClose:d},c.a.createElement(b.a,null,"Edit Allowance"),c.a.createElement(G.a.Content,null,c.a.createElement(Q.a,{size:m},c.a.createElement(Q.a.List,null,c.a.createElement(Q.a.Item,null,"Token: ",c.a.createElement("strong",null,n)),c.a.createElement(Q.a.Item,null,"Spender: ",p),c.a.createElement(Q.a.Item,null,"Current allowance:"," ",c.a.createElement("strong",null,s," ",o)))),c.a.createElement(H.a,{size:"size",onSubmit:u},c.a.createElement(H.a.Field,{required:!0},t),c.a.createElement(h.a,{columns:2},c.a.createElement(h.a.Row,null,c.a.createElement(h.a.Column,null,c.a.createElement(H.a.Button,{type:"button",fluid:!0,size:m,negative:!0,onClick:d},"Cancel")),c.a.createElement(h.a.Column,null,c.a.createElement(H.a.Button,{type:"submit",fluid:!0,size:m,positive:!0},"Set allowance")))))))},K=a(89),Z=function(){var e=Object(g.b)(),t=Object(g.c)((function(e){return e.allowances.allowancesById[e.editAllowance.editAllowanceId]})),a=Object(g.c)((function(e){return e.allowances.allowanceValuesById[e.editAllowance.editAllowanceId]})),o=Object(g.c)((function(e){return e.tokenContracts.contractsById[t.tokenContractId]})),l=Object(g.c)((function(e){return e.addresses.addressesById[t.spenderId]})),s=Object(g.c)((function(e){return e.respsonsive.mobile})),i=Object(r.useState)("0"),d=Object(n.a)(i,2),u=d[0],m=d[1],p=Object(r.useCallback)((function(){return a.value.gte(o.totalSupply)?"unlimited":N()({value:a.value,decimals:o.decimals,roundToDecimals:new T.a(2)}).rounded}),[a.value,o.totalSupply,o.decimals]),b=""!==o.name?o.name:"Unnamed ERC20";return c.a.createElement(V,{mobile:s,newAllowance:u,currentAllowance:p(),tokenAddress:o.addressId,handleClose:function(){e(Object(_.a)())},spender:l,tokenName:b,handleChange:function(e){var t=e.target.value;parseFloat(t)<0&&(t="0"),m(t)},handleSubmit:function(){console.log("Submitted new allowance: ".concat(u));var a=function(e,t){var a=new T.a(10).pow(t),n="-"===e.substring(0,1);if(n&&(e=e.substring(1)),"."===e)throw new Error("Invalid value ".concat(e," cannot be converted to")+" base unit with ".concat(t.toString()," decimals."));var r=e.split(".");if(r.length>2)throw new Error("Too many decimal points");var c=r[0],o=r[1];c||(c="0"),o||(o="0");var l=t.toNumber();if(o.length>l)throw new Error("Too many decimal places");for(;o.length<l;)o+="0";var s=new T.a(c),i=new T.a(o),d=s.mul(a).add(i);return n&&(d=d.neg()),new T.a(d.toString(10),10)}(u,o.decimals);e(Object(_.a)()),e(Object(K.d)(o.addressId,l.address,a,t.id))},tokenSymbol:o.symbol})},$=function(){var e=Object(g.b)(),t=Object(g.c)((function(e){return e.respsonsive})).mobile,a=Object(g.c)((function(e){return e.addresses.checkAddressId?e.addresses.addressesById[e.addresses.checkAddressId]:void 0})),o=Object(g.c)((function(e){return a?e.allowances.allowanceQueryStateByOwner[a.address]:void 0})),l=Object(g.c)((function(e){return e.editAllowance.showModal})),s=Object(r.useState)(!0),d=Object(n.a)(s,2),u=d[0],m=d[1],p=Object(r.useState)(""),b=Object(n.a)(p,2),f=b[0],v=b[1],E=function(){m(!u)},h=function(){v("")},y=function(e){var t=e.target.value;v(t)};Object(r.useEffect)((function(){var e,t;document.title="TAC - ".concat(null!==(e=null!==(t=null===a||void 0===a?void 0:a.ensName)&&void 0!==t?t:null===a||void 0===a?void 0:a.address)&&void 0!==e?e:"")}),[a]),Object(r.useEffect)((function(){o&&o.state===j.a.QUERY_STATE_INITIAL&&a&&e(Object(j.d)(a.address))}),[o,e,a]);var I,k=function(){!function(){var t;a&&(console.log('Starting query for "'.concat(null!==(t=null===a||void 0===a?void 0:a.ensName)&&void 0!==t?t:null===a||void 0===a?void 0:a.address,'"')),e(Object(j.d)(a.address)))}()};return a?t?c.a.createElement(c.a.Fragment,null,c.a.createElement(w.a,null),c.a.createElement(W,{showZeroAllowances:u,toggleShowZeroAllowances:E,addressFilterValue:f,handleAddressFilterChange:y,clearAddressFilter:h,refresh:k,mobile:t}),c.a.createElement(w.a,null),c.a.createElement(P,{ownerId:a.address,showZeroAllowances:u,addressFilter:f}),l&&c.a.createElement(Z,null)):c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{basic:!0},c.a.createElement("h2",null,"Allowances of ",null!==(I=null===a||void 0===a?void 0:a.ensName)&&void 0!==I?I:null===a||void 0===a?void 0:a.address,":")),c.a.createElement(W,{showZeroAllowances:u,toggleShowZeroAllowances:E,addressFilterValue:f,handleAddressFilterChange:y,clearAddressFilter:h,refresh:k,mobile:t}),c.a.createElement(P,{ownerId:a.address,showZeroAllowances:u,addressFilter:f}),l&&c.a.createElement(Z,null)):c.a.createElement("div",null,"No address set")},J=a(51),X=function(e){var t=e.children,a=Object(l.f)(),n=Object(g.b)(),o=Object(g.c)((function(e){return e.onboard})),s=o.onboardAPI,i=o.walletSelected,d=Object(g.c)((function(e){return e.respsonsive.mobile}));Object(r.useEffect)((function(){s?i||(console.log("OnboardGate: Dispatching selectWallet"),n(Object(J.c)(a))):(console.log("OnboardGate: Dispatching initialize()"),n(Object(J.b)(a)))}),[s,i,n,a]);var u=null===s||void 0===s?void 0:s.getState();return i&&(null===u||void 0===u?void 0:u.wallet)?c.a.createElement(c.a.Fragment,null,t):c.a.createElement(M,{mobile:d,header:"Waiting for wallet",body:"Please complete wallet selection",icon:c.a.createElement(p.a,{name:"spinner",loading:!0}),info:!0})},ee=a(9),te=a.n(ee),ae=a(33),ne=function(e){var t=e.handleInput,a=e.loading,n=e.error,r=e.value,o=e.success,l=function(e){var a=e.target.value;t(a)};return e.mobile?c.a.createElement(H.a.Field,{error:n},c.a.createElement("label",null,"Enter address/ENS name or change wallet address"),c.a.createElement("input",{onChange:l,placeholder:"Eth address or ENS name",value:r})):c.a.createElement(H.a.Field,{inline:!0,width:14},c.a.createElement(q.a,{placeholder:"Address or ENS Name",error:n,loading:a,onChange:l,value:r,type:"text",action:{type:"Submit",disabled:!o,content:"Go!",positive:!0},label:"Enter address/ENS name or select in wallet"}))},re=a(37),ce="address_initial",oe="address_resolving",le="address_valid",se="address_invalid",ie=function(){var e=Object(g.b)(),t=Object(l.f)(),a=Object(g.c)((function(e){return e.onboard})).web3,o=Object(g.c)((function(e){return e.respsonsive})).mobile,s=Object(g.c)((function(e){return e.addresses.checkAddressId?e.addresses.addressesById[e.addresses.checkAddressId]:void 0})),i=Object(r.useState)(ce),d=Object(n.a)(i,2),u=d[0],m=d[1],p=Object(r.useState)(""),b=Object(n.a)(p,2),f=b[0],w=b[1],v=Object(r.useState)(""),E=Object(n.a)(v,2),y=E[0],I=E[1],k=Object(r.useState)(void 0),O=Object(n.a)(k,2),A=O[0],S=O[1];Object(r.useEffect)((function(){var e,t;s?(console.log("CheckAddress: ".concat(null!==(e=s.ensName)&&void 0!==e?e:s.address)),w(null!==(t=s.ensName)&&void 0!==t?t:s.address)):console.log("CheckAddress undefined")}),[s,w]);var x=u===se,T=u===oe,j=u===le,C=function(){j&&(e(A?Object(re.c)(A,t):Object(re.c)(y,t)),w(""),S(void 0))},R=function(){var n=Object(ae.a)(te.a.mark((function n(r){var c,l,s;return te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(w(r),S(void 0),0!==r.length){n.next=6;break}m(ce),n.next=28;break;case 6:if(c=/^(0x)?[0-9a-f]{40}$/i.test(r),!/.*\.eth$/i.test(r)||!a){n.next=27;break}return m(oe),n.prev=10,n.next=13,a.eth.ens.getAddress(r);case 13:l=n.sent,console.log("Resolved ".concat(r," to ").concat(l)),m(le),I(l),S(r),o&&e(Object(re.c)(r,t)),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(10),console.log("Could not resolve "+r),m(se);case 25:n.next=28;break;case 27:c?(s=r.toLowerCase(),I(s),m(le),o&&e(Object(re.c)(s,t))):m(se);case 28:case"end":return n.stop()}}),n,null,[[10,21]])})));return function(e){return n.apply(this,arguments)}}();return o?c.a.createElement(H.a,{onSubmit:C,error:x,success:j,loading:T},c.a.createElement(ne,{handleInput:R,value:f,error:x,success:j,loading:T,mobile:o})):c.a.createElement(h.a,{textAlign:"center",centered:!0,columns:1},c.a.createElement(h.a.Row,null,c.a.createElement(h.a.Column,{width:14},c.a.createElement(H.a,{size:"huge",onSubmit:C,error:x,success:j,widths:"equal"},c.a.createElement(H.a.Group,null,c.a.createElement(ne,{handleInput:R,value:f,error:x,success:j,loading:T,mobile:o}))))))},de=a(498),ue=function(e){var t=e.children,a=Object(g.b)(),o=Object(l.f)(),s=Object(l.g)().address,i=Object(g.c)((function(e){return e.addresses})).checkAddressState,d=Object(g.c)((function(e){return e.addresses.walletAddressId})),u=Object(g.c)((function(e){return e.respsonsive.mobile})),m=Object(r.useState)(""),b=Object(n.a)(m,2),f=b[0],w=b[1];return Object(r.useEffect)((function(){s?f!==s?(console.log("AddressExtractor: Setting new address ".concat(s)),a(Object(re.g)(s)),w(s)):console.log("AddressExtractor: ".concat(s," already dispatched.")):d&&(console.log("No address in params. Trying fallback to wallet."),a(Object(re.f)(d,o,!0)))}),[s,f,d,o,a]),i===re.a.Invalid?c.a.createElement(M,{mobile:u,header:"Invalid address",body:"Address ".concat(s," is invalid"),icon:c.a.createElement(p.a,{name:"exclamation triangle"}),error:!0}):i===re.a.Resolving?c.a.createElement(M,{mobile:u,header:"Checking address",body:"Checking address ".concat(s),icon:c.a.createElement(p.a,{name:"circle notched",loading:!0}),warning:!0}):c.a.createElement(c.a.Fragment,null,t)},me=a(1097),pe=function(){var e,t=[{key:1,text:"Mainnet",value:1},{key:2,text:"Ropsten",value:3}],a=Object(g.b)(),n=Object(g.c)((function(e){return e.onboard})),r=n.requiredNetworkId,o=n.walletSelected,l=t.find((function(e){return e.value===r})),s=null!==(e=null===l||void 0===l?void 0:l.text)&&void 0!==e?e:"select network";return c.a.createElement(me.a,{disabled:!o,text:s,options:t,onChange:function(e,t){var n=t.value;console.log("Selected value: ".concat(n)),a(Object(J.f)(parseInt("".concat(n))))},value:r})},be=function(){var e=Object(g.c)((function(e){return e.respsonsive.mobile})),t=Object(r.useState)(!0),a=Object(n.a)(t,2),o=a[0],s=a[1],i=Object(l.f)();Object(r.useEffect)((function(){var e=i.listen((function(e){"/"===e.pathname&&s(!0)}));return function(){e()}}),[i,s]);var d=e?"tiny":"big";return o?c.a.createElement(u.a,{textAlign:"center",style:{marginBottom:"1em"}},c.a.createElement(Q.a,{color:"yellow",size:d,icon:!0,onDismiss:function(){s(!1)}},c.a.createElement(p.a,{name:"hand point right"}),c.a.createElement(Q.a.Content,null,c.a.createElement(Q.a.Header,null,"Gitcoin Grants ",c.a.createElement("em",null,"$250k Donation Matching")," is live until 2020-04-07!"),c.a.createElement("div",null,"Contribute via ",c.a.createElement("strong",null,"gitcoin grant")," to support further development!"),c.a.createElement("p",null,c.a.createElement("strong",null,"->"," ",c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://gitcoin.co/grants/480/token-allowance-checker?tab=description"},"Gitcoin Grant Page")," ","<-"))))):null},fe=a(206);t.default=function(){var e=Object(r.useState)(void 0),t=Object(n.a)(e,2),a=t[0],y=t[1],I=Object(g.c)((function(e){return e.respsonsive})).mobile,k=Object(g.b)(),O=c.a.createElement(i.a,{textAlign:"center",vertical:!0},c.a.createElement(d.a,{fixed:"top",inverted:!0,size:"huge"},c.a.createElement(u.a,null,c.a.createElement(d.a.Item,{header:!0,as:o.b,to:"/",title:"Home",style:{padding:"0px"}},c.a.createElement(m.a,{src:"/logo192.png",width:60,height:60})),c.a.createElement(d.a.Item,{as:o.b,to:"/address/",title:"Check Allowances"},c.a.createElement(p.a,{name:"search",size:"large"})," Check Allowances"),c.a.createElement(d.a.Menu,{position:"right"},c.a.createElement(d.a.Item,null,c.a.createElement(pe,null)),c.a.createElement(d.a.Item,null,c.a.createElement("a",{href:"https://github.com/TripleSpeeder/token-allowance-checker",title:"github.com/TripleSpeeder/token-allowance-checker",target:"_blank",rel:"noopener noreferrer"},c.a.createElement(p.a,{name:"github",size:"big"})))))),c.a.createElement(u.a,{text:!0,style:{marginTop:"4em",marginBottom:"2em"}},c.a.createElement(b.a,{as:"h1",inverted:!1,style:{fontSize:"3em",marginTop:"0.5em"}},"Token Allowance Checker",c.a.createElement(b.a.Subheader,null,"Control your token approvals"))),c.a.createElement(be,null)),A=c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{text:!0,style:{marginBottom:"1em"}},c.a.createElement(b.a,{as:"h1",inverted:!1,style:{marginTop:"0.2em"}},c.a.createElement(o.b,{to:"/"},"Token Allowance Checker"),c.a.createElement(b.a.Subheader,null,c.a.createElement("p",null,"Keep track of your token approvals")))),c.a.createElement(be,null)),S=c.a.createElement(i.a,{basic:!0,textAlign:"center"},c.a.createElement(f.a,{primary:!0,as:o.b,to:"/address/",size:"massive"},"Check Allowances",c.a.createElement(p.a,{name:"arrow right"}))),x=c.a.createElement(u.a,{textAlign:"center"},c.a.createElement(w.a,null),c.a.createElement(i.a,{basic:!0},c.a.createElement(v.a,{horizontal:!0,size:"small"},c.a.createElement(v.a.Item,{as:"a",href:"https://twitter.com/TripleSpeeder",target:"_blank",rel:"noopener noreferrer"},c.a.createElement(E.a,{content:"@triplespeeder",trigger:c.a.createElement(p.a,{size:"big",name:"twitter"})})),c.a.createElement(v.a.Item,{as:"a",href:"https://t.me/triplespeeder",target:"_blank",rel:"noopener noreferrer"},c.a.createElement(E.a,{content:"@triplespeeder",trigger:c.a.createElement(p.a,{size:"big",name:"telegram"})})),c.a.createElement(v.a.Item,{as:"a",href:"mailto:michael@m-bauer.org"},c.a.createElement(E.a,{content:"michael@m-bauer.org",trigger:c.a.createElement(p.a,{size:"big",name:"mail outline"})})),c.a.createElement(v.a.Item,{as:"a",href:"https://github.com/TripleSpeeder/token-allowance-checker",title:"github.com/TripleSpeeder/token-allowance-checker",target:"_blank",rel:"noopener noreferrer"},c.a.createElement(E.a,{content:"github.com/TripleSpeeder/token-allowance-checker",trigger:c.a.createElement(p.a,{size:"big",name:"github"})})),c.a.createElement(v.a.Item,{as:"a",href:"https://www.reddit.com/u/TripleSpeeder",target:"_blank",rel:"noopener noreferrer"},c.a.createElement(E.a,{content:"u/TripleSpeeder",trigger:c.a.createElement(p.a,{size:"big",name:"reddit"})})),c.a.createElement(v.a.Item,null,c.a.createElement(E.a,{content:"Donate to tac.dappstar.eth",trigger:c.a.createElement(p.a,{size:"big",name:"ethereum"})}))),c.a.createElement(b.a,{size:"small"},"powered by"," ",c.a.createElement("a",{href:"https://www.dfuse.io/",rel:"noopener noreferrer",target:"_blank"},"dfuse")," ","technology"),c.a.createElement(b.a,{size:"tiny"},"(c) Michael Bauer",c.a.createElement(b.a.Subheader,null,"v",de.version)))),T=I?"small":"huge";return c.a.createElement(s.a,{as:o.a,fireOnMount:!0,onUpdate:function(e,t){var n=t.width<=s.a.onlyMobile.maxWidth;n!==a&&(k(Object(fe.b)(n)),y(n))}},c.a.createElement(s.a,s.a.onlyMobile,A),c.a.createElement(s.a,{minWidth:s.a.onlyTablet.minWidth},O),c.a.createElement(l.c,null,c.a.createElement(l.a,{path:["/address/:address","/address"]},c.a.createElement(u.a,null,c.a.createElement(X,null,c.a.createElement(ue,null,c.a.createElement(ie,null),c.a.createElement($,null))))),c.a.createElement(l.a,{path:"/"},S,c.a.createElement(i.a,{basic:!0,vertical:!0,size:T},c.a.createElement(h.a,{container:!0,stackable:!0,verticalAlign:"top"},c.a.createElement(h.a.Row,null,c.a.createElement(h.a.Column,{width:8},c.a.createElement(b.a,null,"Control your approvals"),c.a.createElement("p",null,c.a.createElement("em",null,"Token Allowance Checker")," shows all approvals for your ERC20-compliant tokens, and the option to change the approved amount - or completely zero it.")),c.a.createElement(h.a.Column,{width:8},c.a.createElement(b.a,null,"The unlimited approval problem"),c.a.createElement("p",null,"Many DApps have the habit of requiring you to approve effectively unlimited amount of tokens. This helps improving the user experience, as you only have to sign off an approval once and it will be enough for all future transactions."),c.a.createElement("p",null,"However this also means that the DApp (or the person/entity controlling it) can at any time transfer"," ",c.a.createElement("em",null,"all of your tokens"),", without requiring any further approval."),c.a.createElement("p",null,"In addition, there is no concept of expiring approvals. Once approved, the approval will remain forever. If you do not trust a DApp or its operators anymore, there is usually no easy way to remove the approval."))))))),x)}},1054:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(77),o=a.n(c),l=a(14),s=a(36),i=a(67),d=a(51),u=a(37),m=a(89),p=a(28),b=a(90),f=a(108),w=a(43),v=a(206),E=Object(i.combineReducers)({onboard:d.a,addresses:u.d,tokenContracts:m.c,allowances:p.b,balances:b.d,editAllowance:f.b,transactions:w.c,respsonsive:v.a}),h=Object(s.c)({serializableCheck:{ignoredActions:[d.e.type,d.g.type,m.a.type,p.e.type,b.a.type,b.e.type],ignoredPaths:["onboard.web3","onboard.onboardAPI","tokenContracts.contractsById","allowances.allowanceValuesById","balances.balancesById"]},immutableCheck:{ignore:["onboard.web3","onboard.onboardAPI","tokenContracts.contractsById"]}});var g=Object(s.a)({reducer:E,middleware:h});a(883);!function(){var e=a(1053).default;o.a.render(r.a.createElement(l.a,{store:g},r.a.createElement(e,null)),document.getElementById("root"))}()},108:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return l}));var n=a(36),r=Object(n.b)({name:"editAllowance",initialState:{showModal:!1,editAllowanceId:""},reducers:{openEditAllowanceModal:function(e,t){var a=t.payload;e.showModal=!0,e.editAllowanceId=a},closeEditAllowanceModal:function(e){e.showModal=!1}}}),c=r.actions,o=c.openEditAllowanceModal,l=c.closeEditAllowanceModal;t.b=r.reducer},206:function(e,t,a){"use strict";a.d(t,"b",(function(){return c}));var n=a(36),r=Object(n.b)({name:"responsive",initialState:{mobile:!1},reducers:{setMobile:function(e,t){e.mobile=t.payload}}}),c=r.actions.setMobile;t.a=r.reducer},28:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return S})),a.d(t,"c",(function(){return x})),a.d(t,"d",(function(){return T}));var n,r,c=a(9),o=a.n(c),l=a(33),s=a(53),i=a(36),d=a(89),u=a(37),m=a(35),p=a.n(m),b=a(475),f=a(43),w=a(474),v=a(51),E=a(746),h="0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925",g=[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}];!function(e){e[e.QUERY_STATE_INITIAL=0]="QUERY_STATE_INITIAL",e[e.QUERY_STATE_RUNNING=1]="QUERY_STATE_RUNNING",e[e.QUERY_STATE_ERROR=2]="QUERY_STATE_ERROR",e[e.QUERY_STATE_COMPLETE=3]="QUERY_STATE_COMPLETE"}(r||(r={}));var y={currentPage:0,state:r.QUERY_STATE_INITIAL},I=Object(i.b)({name:"Allowances",initialState:{allowancesById:{},allowanceValuesById:{},allowanceIdsByOwnerId:{},allowanceQueryStateByOwner:{}},reducers:{addAllowance:{reducer:function(e,t){var a=t.payload,n=a.id,c=a.allowance;Object.keys(e.allowancesById).includes(n)||(e.allowancesById[n]=c,e.allowanceIdsByOwnerId[c.ownerId].push(c.id),e.allowanceValuesById[n]={allowanceId:n,state:r.QUERY_STATE_INITIAL,value:new p.a("-1")})},prepare:function(e,t,a){var n=function(e,t,a){return"".concat(t,"-").concat(e,"-").concat(a)}(e,t,a);return{payload:{id:n,allowance:{id:n,tokenContractId:e,ownerId:t,spenderId:a}}}}},setQueryState:function(e,t){var a=t.payload,n=a.ownerId,r=a.queryState;e.allowanceQueryStateByOwner[n]=r},setAllowanceValue:function(e,t){var a=t.payload;e.allowanceValuesById[a.allowanceId]=a}},extraReducers:(n={},Object(s.a)(n,u.b.type,(function(e,t){var a=t.payload.id;Object.keys(e.allowanceIdsByOwnerId).includes(a)||(e.allowanceIdsByOwnerId[a]=[],e.allowanceQueryStateByOwner[a]=y)})),Object(s.a)(n,f.b.type,(function(e,t){var a=t.payload,n=a.allowanceId,r=a.transactionId;e.allowancesById[n].editTransactionId=r})),Object(s.a)(n,v.d.type,(function(e,t){var a=t.payload;console.log("Resetting allowances due to network change to ".concat(a)),Object.keys(e.allowanceQueryStateByOwner).forEach((function(t){e.allowanceQueryStateByOwner[t]=y})),Object.keys(e.allowanceIdsByOwnerId).forEach((function(t){e.allowanceIdsByOwnerId[t]=[]})),e.allowanceValuesById={},e.allowancesById={}})),n)}),k=I.actions,O=k.addAllowance,A=k.setQueryState,S=k.setAllowanceValue;t.b=I.reducer;var x=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a,n){var c,l,s,i,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(S({allowanceId:e,value:new p.a("-1"),state:r.QUERY_STATE_RUNNING})),c=n().allowances.allowancesById[e],l=n().addresses.addressesById[c.ownerId],s=n().addresses.addressesById[c.spenderId],i=n().tokenContracts.contractsById[c.tokenContractId],t.prev=5,t.next=8,i.contractInstance.allowance(l.address,s.address);case 8:d=t.sent,a(S({allowanceId:e,value:d,state:r.QUERY_STATE_COMPLETE})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),console.log("Failed to get allowance from token ".concat(i.addressId)),a(S({allowanceId:e,value:new p.a("-1"),state:r.QUERY_STATE_ERROR}));case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,a){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a,n){var c,l,s,i,m,p,f,v,y,I,k,S,x,T,j,C,R,N,_,B,U,L;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n().onboard.web3){t.next=4;break}return console.log("Missing web3!"),t.abrupt("return");case 4:l=n().addresses.addressesById[e],s=n().onboard.networkId,i=0,a(A({ownerId:e,queryState:{state:r.QUERY_STATE_RUNNING,currentPage:i}})),t.t0=s,t.next=3===t.t0?11:1===t.t0?13:15;break;case 11:return m="ropsten.eth.dfuse.io",t.abrupt("break",18);case 13:return m="mainnet.eth.dfuse.io",t.abrupt("break",18);case 15:return console.log("Network ".concat(s," not supported by dfuse.io")),a(A({ownerId:e,queryState:{state:r.QUERY_STATE_ERROR,currentPage:i,error:"Network ".concat(s," not supported.")}})),t.abrupt("return");case 18:p=Object(b.createDfuseClient)({apiKey:"web_085aeaac9c520204b1a9dcaa357e5460",network:m}),(f=E(w)).setProvider(c.currentProvider),v="",t.prev=22,y=0,I=[],k=[],S=[];case 27:return console.log("Getting page ".concat(i,". Last page result: ").concat(y,".")),t.next=30,p.graphql("query ($query: String! $limit: Int64! $cursor: String) {\n      searchTransactions(\n        indexName: LOGS, \n        query: $query, \n        limit: $limit, \n        sort: DESC,\n        cursor: $cursor,\n      ) {\n        pageInfo {\n          endCursor\n        }\n        edges {\n          node {\n            hash\n            block {\n              number\n            }\n            matchingLogs {\n              data\n              topics\n              address\n            }\n          }\n        }\n      }\n    }",{variables:{limit:"50",query:"topic.0:".concat(h," topic.1:").concat(l.address),cursor:v}});case 30:if(!(x=t.sent).errors){t.next=33;break}throw x.errors;case 33:T=x.data.searchTransactions.edges||[],j=0;case 35:if(!(j<T.length)){t.next=104;break}C=T[j].node,R=0;case 38:if(!(R<C.matchingLogs.length)){t.next=101;break}if(N=C.matchingLogs[R],!I.includes(N.address.toLowerCase())){t.next=42;break}return t.abrupt("continue",98);case 42:if(N.topics[0]===h){t.next=45;break}return console.log("Skipping log event. Topic is wrong, expected ".concat(h,", got ").concat(N.topics[0],". Transaction: ").concat(C.hash)),t.abrupt("continue",98);case 45:if(_=N.address.toLowerCase(),"0x"!==N.data){t.next=50;break}return console.log("Detected bad contract at ".concat(N.address,": LogEntry.data is missing. Transaction: ").concat(C.hash,".")),I.push(_),t.abrupt("continue",98);case 50:B=void 0,t.prev=51,B=c.eth.abi.decodeLog(g,N.data,N.topics.slice(1)),t.next=61;break;case 55:return t.prev=55,t.t1=t.catch(51),console.log("Detected bad contract at ".concat(N.address,": Can not decode logEntry from transaction: ").concat(C.hash,":")),console.log(N),I.push(_),t.abrupt("continue",98);case 61:if(parseInt(B.spender)){t.next=64;break}return console.log("Skipping log event: Invalid spender ".concat(B.spender,", contract: ").concat(N.address)),t.abrupt("continue",98);case 64:if(B.owner.toLowerCase()===l.address.toLowerCase()){t.next=67;break}return console.log("Skipping log event due to owner mismatch. Expected ".concat(l.address,", got ").concat(B.owner,". Transaction: ").concat(C.hash)),t.abrupt("continue",98);case 67:if(k.includes(_)){t.next=96;break}return U=void 0,t.prev=69,t.next=72,f.at(_);case 72:U=t.sent,t.next=80;break;case 75:return t.prev=75,t.t2=t.catch(69),console.log("Error instantiating contract at ".concat(_,": ").concat(t.t2)),I.push(_),t.abrupt("continue",98);case 80:return t.prev=80,t.next=83,U.totalSupply();case 83:return t.next=85,U.balanceOf(_);case 85:return t.next=87,U.allowance(_,_);case 87:t.next=94;break;case 89:return t.prev=89,t.t3=t.catch(80),console.log("Contract at ".concat(_," is not ERC20. Ignoring.")),I.push(_),t.abrupt("continue",98);case 94:k.push(_),a(Object(d.b)(U));case 96:L=B.spender.toLowerCase(),S.includes(L)||(S.push(L),a(Object(u.c)(L)),a(Object(u.e)(L)),a(O(_,e,L)));case 98:R++,t.next=38;break;case 101:j++,t.next=35;break;case 104:y=T.length,i++,v=x.data.searchTransactions.pageInfo.endCursor,a(A({ownerId:e,queryState:{state:r.QUERY_STATE_RUNNING,currentPage:i}}));case 108:if(y>0){t.next=27;break}case 109:a(A({ownerId:e,queryState:{state:r.QUERY_STATE_COMPLETE,currentPage:i}})),t.next=116;break;case 112:t.prev=112,t.t4=t.catch(22),console.log(t.t4),a(A({ownerId:e,queryState:{state:r.QUERY_STATE_ERROR,currentPage:i,error:JSON.stringify(t.t4)}}));case 116:case"end":return t.stop()}}),t,null,[[22,112],[51,55],[69,75],[80,89]])})));return function(e,a){return t.apply(this,arguments)}}()}},37:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return f})),a.d(t,"e",(function(){return I})),a.d(t,"f",(function(){return A})),a.d(t,"c",(function(){return S})),a.d(t,"g",(function(){return x})),a.d(t,"h",(function(){return T}));var n,r,c=a(9),o=a.n(c),l=a(33),s=a(36),i=a(88),d=a.n(i),u="0x0000000000000000000000000000000000000000";!function(e){e[e.Initial=0]="Initial",e[e.ResolvingForward=1]="ResolvingForward",e[e.ResolvingReverse=2]="ResolvingReverse",e[e.Resolved=3]="Resolved"}(n||(n={})),function(e){e[e.Initial=0]="Initial",e[e.Resolving=1]="Resolving",e[e.Valid=2]="Valid",e[e.Invalid=3]="Invalid"}(r||(r={}));var m={addressesById:{},walletAddressId:void 0,prevWalletAddressId:void 0,checkAddressId:void 0,checkAddressState:r.Initial},p=Object(s.b)({name:"ethAddresses",initialState:m,reducers:{addAddress:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.ethAddress;e.addressesById[n]=r},prepare:function(e,t){return{payload:{id:e=e.toLowerCase(),ethAddress:{address:e,resolvingState:n.Initial,ensName:t}}}}},setResolvingState:function(e,t){var a=t.payload,n=a.id,r=a.resolvingState;e.addressesById[n].resolvingState=r},setENSName:function(e,t){var a=t.payload,n=a.id,r=a.ensName;e.addressesById[n].ensName=r},setCheckAddressId:function(e,t){e.checkAddressId=t.payload},setCheckAddressState:function(e,t){e.checkAddressState=t.payload},setWalletAddressId:function(e,t){e.prevWalletAddressId=e.walletAddressId,e.walletAddressId=t.payload},setEtherscanContractName:function(e,t){var a=t.payload,n=a.id,r=a.esContractName;e.addressesById[n].esContractName=r}}}),b=p.actions,f=b.addAddress,w=b.setResolvingState,v=b.setENSName,E=b.setCheckAddressId,h=b.setCheckAddressState,g=b.setWalletAddressId,y=b.setEtherscanContractName;t.d=p.reducer;var I=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a,n){var r,c,l,s,i,d,u,m;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n().onboard.networkId,c="THS8KWYM6KZ8WBP3DXKUDR7UKCRB8YIRGH",t.t0=r,t.next=1===t.t0?5:3===t.t0?7:9;break;case 5:return l="api.etherscan.io",t.abrupt("break",10);case 7:return l="api-ropsten.etherscan.io",t.abrupt("break",10);case 9:throw Error("Network ".concat(r," not supported"));case 10:return s="https://".concat(l,"/api?module=contract&action=getsourcecode&address=").concat(e,"&apikey=").concat(c),t.next=13,fetch(s);case 13:return i=t.sent,t.next=16,i.json();case 16:"OK"===(d=t.sent).message?(null===(m=null===d||void 0===d?void 0:null===(u=d.result[0])||void 0===u?void 0:u.ContractName)||void 0===m?void 0:m.length)&&a(y({id:e,esContractName:m})):console.log("Got message ".concat(d.message," fetching contract data from Etherscan API."));case 18:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},k=function(e,t,a){return new Promise(function(){var n=Object(l.a)(o.a.mark((function n(r,c){var l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Start resolveAndAddENSName for ".concat(e)),n.prev=1,n.next=4,a.eth.ens.getAddress(e);case 4:l=n.sent.toLowerCase(),console.log("Resolved ".concat(e," to ").concat(l)),t(f(l,e)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.log("Could not resolve "+e),c("Could not resolve "+e);case 13:console.log("End resolveAndAddENSName for ".concat(e)),r(l);case 15:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e,t){return n.apply(this,arguments)}}())},O=function(e,t,a){return new Promise(function(){var r=Object(l.a)(o.a.mark((function r(c){var l,s,i;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t(f(e)),t(w({id:e,resolvingState:n.ResolvingReverse})),r.prev=2,l=e.substr(2)+".addr.reverse",r.next=6,a.eth.ens.resolver(l);case 6:return s=r.sent,r.next=9,s.methods.name(d.a.hash(l)).call();case 9:i=r.sent,console.log("Got reverseENS: ".concat(i)),t(v({id:e,ensName:i})),r.next=16;break;case 14:r.prev=14,r.t0=r.catch(2);case 16:t(w({id:e,resolvingState:n.Resolved})),c(e);case 18:case"end":return r.stop()}}),r,null,[[2,14]])})));return function(e){return r.apply(this,arguments)}}())},A=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n,r){e=e.toLowerCase();var c=r().addresses.addressesById[e],o=a?t.replace:t.push;c.ensName?(console.log("Routing to /address/".concat(c.ensName)),o("/address/".concat(c.ensName))):(console.log("Routing to /address/".concat(c.address)),o("/address/".concat(c.address)))}},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(function(){var a=Object(l.a)(o.a.mark((function a(n,r){var c,l,s;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=r().onboard.web3,!(e=e.toLowerCase()).endsWith(".eth")){a.next=17;break}if(s=Object.values(r().addresses.addressesById).filter((function(t){var a;return(null===t||void 0===t?void 0:null===(a=t.ensName)||void 0===a?void 0:a.toLowerCase())===e})),l=s.length?s[0].address:void 0){a.next=15;break}return a.prev=6,a.next=9,k(e,n,c);case 9:l=a.sent,a.next=15;break;case 12:return a.prev=12,a.t0=a.catch(6),a.abrupt("return");case 15:a.next=22;break;case 17:if(l=e,Object.keys(r().addresses.addressesById).includes(e)){a.next=22;break}return a.next=21,O(e,n,c);case 21:l=a.sent;case 22:t&&n(A(l,t));case 23:case"end":return a.stop()}}),a,null,[[6,12]])})));return function(e,t){return a.apply(this,arguments)}}())},x=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a,n){var c,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n().onboard.web3){t.next=4;break}return console.log("Cant set address ".concat(e," - web3 missing!")),t.abrupt("return");case 4:if(!e.endsWith(".eth")){t.next=23;break}return a(h(r.Resolving)),t.prev=6,t.next=9,k(e,a,c);case 9:if((l=t.sent)!==u){t.next=14;break}throw Error("".concat(e," resolved to ").concat(u));case 14:a(E(l)),a(h(r.Valid));case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(6),a(h(r.Invalid));case 21:t.next=26;break;case 23:e=e.toLowerCase(),/^(0x)?[0-9a-f]{40}$/i.test(e)?(O(e,a,c),a(h(r.Valid)),a(E(e))):a(h(r.Invalid));case 26:case"end":return t.stop()}}),t,null,[[6,18]])})));return function(e,a){return t.apply(this,arguments)}}()},T=function(e,t){return function(){var a=Object(l.a)(o.a.mark((function a(n,r){var c,l;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(Object.keys(r().addresses.addressesById).includes(e)){a.next=7;break}return console.log("Got new address from wallet: ".concat(e)),c=r().onboard.web3,a.next=5,O(e,n,c);case 5:a.next=8;break;case 7:console.log("Got known address from wallet: ".concat(e));case 8:n(g(e)),(l=r().addresses.prevWalletAddressId)&&l!==e&&(console.log("setWalletAddressThunk: redirecting to new wallet address ".concat(e)),n(A(e,t)));case 11:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}},43:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return s}));var n,r=a(36);!function(e){e[e.INITIAL=0]="INITIAL",e[e.SUBMITTED=1]="SUBMITTED",e[e.CONFIRMED=2]="CONFIRMED",e[e.FAILED=3]="FAILED"}(n||(n={}));var c=Object(r.b)({name:"transactionTracker",initialState:{transactionsById:{}},reducers:{addTransaction:function(e,t){var a=t.payload;e.transactionsById[a.transactionId]=a},updateTransaction:function(e,t){var a=t.payload,n=a.transactionId,r=a.transactionState,c=a.error,o=a.transactionHash;r&&(e.transactionsById[n].transactionState=r),c&&(e.transactionsById[n].error=c),o&&(e.transactionsById[n].transactionHash=o)}}}),o=c.actions,l=o.addTransaction,s=o.updateTransaction;t.c=c.reducer},498:function(e){e.exports=JSON.parse('{"name":"token-allowance-checker","version":"2.3.0","private":true,"homepage":"https://tac.dappstar.io","repository":"github:TripleSpeeder/token-allowance-checker","husky":{"hooks":{"pre-commit":"lint-staged","commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"lint-staged":{"src/**/*.{ts,tsx}":["./node_modules/.bin/eslint --max-warnings 0 --fix","./node_modules/.bin/prettier --write"]},"scripts":{"start":"react-scripts start","start:https":"HTTPS=true react-scripts start","typechain":"typechain --target truffle --outDir src/contracts ./node_modules/@openzeppelin/contracts/build/contracts/ERC20Detailed.json","build":"PUBLIC_URL=\'.\' react-scripts build","test":"react-scripts test","eject":"react-scripts eject","storybook":"start-storybook -p 9009 -s public","build-storybook":"build-storybook -s public","release":"standard-version","lint":"./node_modules/.bin/eslint --max-warnings 0 . --ext .ts,.tsx","lint:fix":"./node_modules/.bin/eslint --max-warnings 0 . --ext .ts,.tsx --fix","prettier":"./node_modules/.bin/prettier --check \\"src/**/*.ts{,x}\\"","prettier:write":"./node_modules/.bin/prettier --write \\"src/**/*.ts{,x}\\""},"dependencies":{"@types/react-router":"^5.1.4","react":"^16.12.0","react-dom":"^16.12.0","react-redux":"^7.2.0","react-router-dom":"^5.1.2","semantic-ui-css":"^2.4.1","semantic-ui-react":"^0.88.2"},"devDependencies":{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","@dfuse/client":"^0.3.8","@openzeppelin/contracts":"^2.5.0","@reduxjs/toolkit":"^1.2.5","@semantic-release/changelog":"^5.0.0","@semantic-release/git":"^9.0.0","@storybook/addon-actions":"^5.3.12","@storybook/addon-links":"^5.3.12","@storybook/addon-viewport":"^5.3.17","@storybook/addons":"^5.3.12","@storybook/preset-create-react-app":"^1.5.2","@storybook/react":"^5.3.12","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.4.0","@testing-library/user-event":"^7.2.1","@triplespeeder/bn2string":"^1.0.0","@truffle/contract":"^4.1.8","@typechain/truffle-v5":"^0.9.0","@types/bn.js":"^4.11.6","@types/jest":"^25.1.3","@types/lodash":"^4.14.149","@types/node":"^13.7.6","@types/react":"^16.9.23","@types/react-dom":"^16.9.5","@types/react-redux":"^7.1.7","@types/react-router-dom":"^5.1.3","@types/uuid":"^7.0.0","@typescript-eslint/eslint-plugin":"^2.23.0","@typescript-eslint/parser":"^2.23.0","bn.js":"^5.1.1","bnc-onboard":"^1.5.0","eslint":"^6.8.0","eslint-config-airbnb":"^18.1.0","eslint-config-airbnb-typescript":"^7.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.1","eslint-plugin-jsx-a11y":"^6.2.3","eslint-plugin-prettier":"^3.1.2","eslint-plugin-react":"^7.19.0","eslint-plugin-react-hooks":"^1.7.0","eth-ens-namehash":"^2.0.8","human-standard-token-abi":"^2.0.0","husky":"^4.2.3","lint-staged":"^10.0.8","lodash":"^4.17.15","prettier":"^1.19.1","react-scripts":"3.4.0","semantic-release":"^17.0.4","standard-version":"^7.1.0","truffle-typings":"^1.0.8","typechain":"^1.0.5","typechain-target-truffle":"^1.0.2","typescript":"^3.8.2","uuid":"^7.0.2","web3":"^1.2.6"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},51:function(e,t,a){"use strict";var n=a(9),r=a.n(n),c=a(33),o=a(36),l=a(471),s=a(275),i=a.n(s),d=a(37),u={name:"imToken",svg:'\n<svg\n        xmlns:dc="http://purl.org/dc/elements/1.1/"\n        xmlns:cc="http://creativecommons.org/ns#"\n        xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n        xmlns:svg="http://www.w3.org/2000/svg"\n        xmlns="http://www.w3.org/2000/svg"\n        xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n        xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n        version="1.1"\n        id="\u56fe\u5c42_1"\n        x="0px"\n        y="0px"\n        viewBox="0 0 769.56256 772.01001"\n        xml:space="preserve"\n        sodipodi:docname="imToken-onlyLogo_noMargin.svg"\n        width="769.56256"\n        height="772.01001"\n        inkscape:version="0.92.4 5da689c313, 2019-01-14"><metadata\n   id="metadata18"><rdf:RDF><cc:Work\n       rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type\n        rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs\n        id="defs16" /><sodipodi:namedview\n        pagecolor="#ffffff"\n        bordercolor="#666666"\n        borderopacity="1"\n        objecttolerance="10"\n        gridtolerance="10"\n        guidetolerance="10"\n        inkscape:pageopacity="0"\n        inkscape:pageshadow="2"\n        inkscape:window-width="1839"\n        inkscape:window-height="1125"\n        id="namedview14"\n        showgrid="false"\n        inkscape:zoom="0.30729167"\n        inkscape:cx="445.85836"\n        inkscape:cy="390.87393"\n        inkscape:window-x="1872"\n        inkscape:window-y="467"\n        inkscape:window-maximized="0"\n        inkscape:current-layer="\u56fe\u5c42_1" />\n    <style\n            type="text/css"\n            id="style2">\n\t.st0{fill:url(#path-1-copy-7_1_);}\n\t.st1{fill:#FFFFFF;}\n</style>\n    <g\n            id="Group"\n            transform="matrix(4.0738988,0,0,4.0738988,-1436.4536,-1166.3541)">\n\t<g\n            id="icon_imTokenLogo">\n\n\t\t\t<linearGradient\n                    id="path-1-copy-7_1_"\n                    gradientUnits="userSpaceOnUse"\n                    x1="-229.26199"\n                    y1="763.88239"\n                    x2="-230.62849"\n                    y2="762.52502"\n                    gradientTransform="matrix(134.3987,0,0,-134.8504,31348.697,103302.03)">\n\t\t\t<stop\n                    offset="0"\n                    style="stop-color:#11C4D1"\n                    id="stop4" />\n                <stop\n                        offset="1"\n                        style="stop-color:#0062AD"\n                        id="stop6" />\n\t\t</linearGradient>\n        <path\n                id="path-1-copy-7"\n                class="st0"\n                d="m 541.5,416.1 c 0,0 0,19.8 -2.1,28.3 -2.1,8.6 -6.1,14.5 -10.4,18.9 -4.4,4.4 -10.2,8.4 -19,10.5 -8.9,2.1 -28.1,2 -28.1,2 h -69.8 c 0,0 -19.7,0 -28.2,-2.1 -8.5,-2.2 -14.5,-6.1 -18.9,-10.5 -4.4,-4.4 -8.4,-10.2 -10.4,-19.1 -2.1,-8.9 -2,-28.1 -2,-28.1 v -70 c 0,0 0,-19.8 2.1,-28.3 2.1,-8.6 6.1,-14.5 10.4,-18.9 4.4,-4.4 10.2,-8.4 19,-10.5 8.9,-2.1 28.1,-2 28.1,-2 H 482 c 0,0 19.7,0 28.2,2.1 8.5,2.2 14.5,6.1 18.9,10.5 4.4,4.4 8.4,10.2 10.4,19.1 2,8.9 2,28.1 2,28.1 z"\n                style="fill:url(#path-1-copy-7_1_)"\n                inkscape:connector-curvature="0" />\n        <path\n                id="Combined-Shape"\n                class="st1"\n                d="m 511.9,344.2 c 3.9,53.9 -31.9,79.5 -64,82.3 -29.8,2.6 -57.8,-15 -60.2,-42.3 -2,-22.5 12.4,-32.2 23.7,-33.1 11.6,-1 21.3,6.7 22.2,16.1 0.8,9 -5,13.2 -9.1,13.5 -3.2,0.3 -7.2,-1.6 -7.6,-5.6 -0.3,-3.5 1.1,-3.9 0.7,-7.6 -0.6,-6.6 -6.5,-7.3 -9.7,-7 -3.9,0.3 -11,4.8 -10.1,15.8 1,11.1 12,19.9 26.4,18.6 15.6,-1.4 26.5,-13.1 27.3,-29.6 0,-0.9 0.2,-1.7 0.6,-2.5 0,0 0,0 0,0 0.2,-0.3 0.3,-0.6 0.6,-0.9 0,0 0,0 0,0 0.4,-0.6 0.8,-1.1 1.3,-1.6 0,0 0,0 0,0 0.4,-0.4 0.9,-0.9 1.4,-1.4 6.8,-6.2 31.4,-21 54.5,-16.4 0.2,0 0.4,0.1 0.5,0.2 0.9,0 1.4,0.7 1.5,1.5"\n                inkscape:connector-curvature="0"\n                style="fill:#ffffff" />\n\t</g>\n</g>\n</svg>\n',wallet:function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c,o,l,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.createModernProviderInterface,o=window,l=o.ethereum,s=null===(a=o.web3)||void 0===a?void 0:null===(n=a.currentProvider)||void 0===n?void 0:n.isImToken,e.abrupt("return",{provider:l,interface:s?c(l):null});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),link:"https://token.im/",mobile:!0,desktop:!0};a.d(t,"e",(function(){return v})),a.d(t,"d",(function(){return E})),a.d(t,"g",(function(){return h})),a.d(t,"c",(function(){return k})),a.d(t,"f",(function(){return O})),a.d(t,"b",(function(){return A}));var m="7f230a5ca832426796454c28577d93f2",p=[{walletName:"metamask",preferred:!0},{walletName:"coinbase",preferred:!0},{walletName:"walletConnect",infuraKey:m,preferred:!0},{walletName:"trust",preferred:!0},{walletName:"dapper",preferred:!0},{walletName:"authereum",preferred:!0},{walletName:"opera"},{walletName:"operaTouch"},{walletName:"torus"},{walletName:"status"},{walletName:"ledger",rpcUrl:"mainnet.infura.io/v3/".concat(m)},{walletName:"trezor",appUrl:"https://tac.dappstar.io",email:"michael@m-bauer.org",rpcUrl:"mainnet.infura.io/v3/".concat(m)},u],b={networkId:0,requiredNetworkId:1,onboardAPI:null,walletSelected:!1,prevWalletAddressId:void 0},f=Object(o.b)({name:"onboard",initialState:b,reducers:{setOnboardAPI:function(e,t){e.onboardAPI=t.payload},setWeb3Instance:function(e,t){e.web3=t.payload},setNetworkId:function(e,t){e.networkId=t.payload},setPrevWalletAddressId:function(e,t){e.prevWalletAddressId=t.payload},setWalletSelected:function(e,t){e.walletSelected=t.payload},setRequiredNetworkId:function(e,t){e.requiredNetworkId=t.payload}}}),w=f.actions,v=w.setOnboardAPI,E=w.setNetworkId,h=w.setWeb3Instance,g=w.setWalletSelected,y=(w.setPrevWalletAddressId,w.setRequiredNetworkId),I=(t.a=f.reducer,function(){return function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("checking wallet..."),!(n=a().onboard.onboardAPI)){e.next=9;break}return e.next=5,n.walletCheck();case 5:c=e.sent,console.log("walletCheck result: ".concat(c)),e.next=10;break;case 9:console.log("dispatched checkWallet() without initialization...");case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}),k=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Selecting wallet..."),!(c=n().onboard.onboardAPI)){t.next=10;break}return t.next=5,c.walletSelect();case 5:o=t.sent,a(g(o)),o?a(I()):e.push("/"),t.next=11;break;case 10:console.log("dispatched selectWallet() without initialization...");case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},O=function(e){return function(t,a){t(y(e));var n=a().onboard.onboardAPI;n&&(n.config({networkId:e}),t(I()))}},A=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=n().onboard.requiredNetworkId,console.log("Initializing OnBoard.js for networkId ".concat(c,"...")),o=Object(l.a)({dappId:"f4b71bf0-fe50-4eeb-bc2b-b323527ed9e6",networkId:c,subscriptions:{wallet:function(e){a(h(new i.a(e.provider)))},address:function(t){t?(console.log("Wallet address changed to ".concat(t,"!")),a(Object(d.h)(t,e))):console.log("No access to wallet address")},network:function(e){var t=n().onboard.networkId;0!==t&&t!==e&&console.log("Switching network from ".concat(t," to ").concat(e)),a(O(e)),a(E(e))},balance:function(){}},walletSelect:{heading:"",description:"",wallets:p}}),a(v(o));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},517:function(e,t,a){e.exports=a(1054)},535:function(e,t){},552:function(e,t){},554:function(e,t){},620:function(e,t){},622:function(e,t){},623:function(e,t){},629:function(e,t){},631:function(e,t){},648:function(e,t){},651:function(e,t){},667:function(e,t){},670:function(e,t){},686:function(e,t){},687:function(e,t){},689:function(e,t){},745:function(e,t){},797:function(e,t){},804:function(e,t){},821:function(e,t){},833:function(e,t){},836:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=836},842:function(e,t){},868:function(e,t){},883:function(e,t,a){},884:function(e,t,a){},89:function(e,t,a){"use strict";var n=a(9),r=a.n(n),c=a(33),o=a(53),l=a(36),s=a(1056),i={1:{"0x89d24a6b4ccb1b6faa2625fe562bdd9a23260359":{name:"Sai Stablecoin",symbol:"SAI"},"0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2":{name:"Maker Token",symbol:"MKR"},"0xecf8f87f810ecf450940c9f60066b4a7a501d6a7":{name:"Old Wrapped Ether",symbol:"WETH"},"0xc66ea802717bfb9833400264dd12c2bceaa34a6d":{name:"Old Maker Token",symbol:"MKR"},"0xbb9bc244d798123fde783fcc1c72d3bb8c189413":{name:"TheDAO Token",symbol:"TheDAO"},"0x86fa049857e0209aa7d9e616f7eb3b3b78ecfdb0":{name:"EOS: Old Token",symbol:"EOS"}},3:{}},d=a(37),u=a(28),m=a(43),p=a(35),b=a.n(p),f=a(51);a.d(t,"a",(function(){return v})),a.d(t,"b",(function(){return E})),a.d(t,"d",(function(){return h}));var w=Object(l.b)({name:"tokenContracts",initialState:{contractsById:{}},reducers:{addContract:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.tokenContract;e.contractsById[n]=r},prepare:function(e,t,a,n,r,c){return{payload:{id:e,tokenContract:{addressId:e,name:t,symbol:a,decimals:n,totalSupply:r,contractInstance:c}}}}}},extraReducers:Object(o.a)({},f.d.type,(function(e,t){var a=t.payload;console.log("Clearing token contracts due to network change to ".concat(a)),e.contractsById={}}))}),v=w.actions.addContract,E=(t.c=w.reducer,function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,o,l,s,u,m;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n().onboard.networkId,o=e.address.toLowerCase(),l="",s="",!Object.keys(i[c]).includes(o)){t.next=9;break}l=i[c][o].name,s=i[c][o].symbol,t.next=21;break;case 9:return t.prev=9,t.next=12,e.name();case 12:return l=t.sent,t.next=15,e.symbol();case 15:s=t.sent,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(9),console.log("Failed to get name/symbol of contract at ".concat(o,". Please raise\n                an issue to add this token at https://github.com/TripleSpeeder/token-allowance-checker/issues!"));case 21:return u=new b.a("0"),t.prev=22,t.next=25,e.decimals();case 25:u=t.sent,t.next=31;break;case 28:t.prev=28,t.t1=t.catch(22),console.log("Contract at ".concat(o," does not provide decimals(). Assuming 0."));case 31:return t.prev=31,t.next=34,e.totalSupply();case 34:m=t.sent,t.next=41;break;case 37:return t.prev=37,t.t2=t.catch(31),console.log("Failed to call totalSupply() at ".concat(o,". Ignoring contract.")),t.abrupt("return");case 41:a(Object(d.c)(o)),a(v(o,l,s,u,m,e));case 43:case"end":return t.stop()}}),t,null,[[9,18],[22,28],[31,37]])})));return function(e,a){return t.apply(this,arguments)}}()}),h=function(e,t,a,n){return function(){var o=Object(c.a)(r.a.mark((function c(o,l){var i,d,p,b;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Setting new allowance ".concat(a.toString()," for tokenContractId ").concat(e)),i=l().tokenContracts.contractsById[e].contractInstance,d=l().addresses.walletAddressId,p=Object(s.a)(),o(Object(m.b)({transactionId:p,allowanceId:n,transactionState:m.a.SUBMITTED})),r.prev=5,r.next=8,i.approve(t,a.toString(),{from:d});case 8:b=r.sent,console.log("transaction confirmed: ".concat(b.tx,". Reloading allowance.")),o(Object(m.d)({transactionId:p,transactionState:m.a.CONFIRMED,transactionHash:b.tx})),o(Object(u.c)(n)),r.next=18;break;case 14:r.prev=14,r.t0=r.catch(5),console.log("Error while approving: ".concat(r.t0.message)),o(Object(m.d)({transactionId:p,transactionState:m.a.FAILED,error:r.t0.message}));case 18:case"end":return r.stop()}}),c,null,[[5,14]])})));return function(e,t){return o.apply(this,arguments)}}()}},90:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"e",(function(){return b})),a.d(t,"b",(function(){return w}));var n=a(9),r=a.n(n),c=a(33),o=a(36),l=a(28),s=a(35),i=a.n(s),d=Object(o.b)({name:"balances",initialState:{balancesById:{}},reducers:{addBalance:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.balance;e.balancesById[n]=r},prepare:function(e,t,a){return{payload:{id:e,balance:{id:e,addressId:t,tokenContractId:a,queryState:l.a.QUERY_STATE_INITIAL,value:new i.a("-1")}}}}},setBalanceValue:function(e,t){var a=t.payload,n=a.id,r=a.value;e.balancesById[n].value=r},setBalanceQuerystate:function(e,t){var a=t.payload,n=a.id,r=a.queryState;e.balancesById[n].queryState=r}}}),u=function(e,t){return"".concat(e,"-").concat(t)},m=d.actions,p=m.addBalance,b=m.setBalanceValue,f=m.setBalanceQuerystate,w=function(e,t){return function(){var a=Object(c.a)(r.a.mark((function a(n,c){var o,s,i,d;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=u(e,t),n(p(o,e,t)),n(f({id:o,queryState:l.a.QUERY_STATE_RUNNING})),s=c().tokenContracts.contractsById[t],i=c().addresses.addressesById[e],a.prev=5,a.next=8,s.contractInstance.balanceOf(i.address);case 8:d=a.sent,n(b({id:o,value:d})),n(f({id:o,queryState:l.a.QUERY_STATE_COMPLETE})),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(5),console.log("Error getting balance: ".concat(a.t0)),n(f({id:o,queryState:l.a.QUERY_STATE_ERROR}));case 17:case"end":return a.stop()}}),a,null,[[5,13]])})));return function(e,t){return a.apply(this,arguments)}}()};t.d=d.reducer}},[[517,3,4]]]);
//# sourceMappingURL=main.c1c2cfad.chunk.js.map