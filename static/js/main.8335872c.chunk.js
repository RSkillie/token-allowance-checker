(this["webpackJsonptoken-allowance-checker"]=this["webpackJsonptoken-allowance-checker"]||[]).push([[3],{106:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return l}));var n=a(36),r=Object(n.b)({name:"editAllowance",initialState:{showModal:!1,editAllowanceId:""},reducers:{openEditAllowanceModal:function(e,t){var a=t.payload;e.showModal=!0,e.editAllowanceId=a},closeEditAllowanceModal:function(e){e.showModal=!1}}}),c=r.actions,o=c.openEditAllowanceModal,l=c.closeEditAllowanceModal;t.b=r.reducer},1094:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=(a(919),a(53)),o=a(67),l=a(1145),s=a(1096),i=a(77),d=a(1133),u=a(1144),m=a(1147),p=a(41),f=(a(920),a(1130)),b=a(426),w=a(12),v=a(290),E=a.n(v),h=a(1142),g=a(1140),y=a(1136),k=a(1137),I=function(e){var t,a,n=e.ethAddress,c=e.mobile,o=e.networkId,l=e.inline,s=n.address,d=n.ensName,u=n.esContractName,m=function(e){navigator.clipboard.writeText(e).then((function(){}),(function(){console.log("failed to set clipboard")}))};switch(d?t="".concat(d):u&&(t="".concat(u)),o){case 3:a="https://ropsten.etherscan.io/address/".concat(s);break;case 1:a="https://etherscan.io/address/".concat(s);break;default:a="https://etherscan.io/address/".concat(s)}if(c){var p,f,b,w=s.substr(0,6)+"..."+s.substr(-6,6),v=u&&r.a.createElement("div",null,"Contract name: ",r.a.createElement("strong",null,u)),E=d&&r.a.createElement("div",null,"ENS name: ",r.a.createElement("strong",null,d)),h=r.a.createElement(y.a,null,r.a.createElement(y.a.Content,null,r.a.createElement(y.a.Header,null,s),r.a.createElement(y.a.Content,null,v,E),r.a.createElement(y.a.Extra,null,r.a.createElement(i.a,{link:!0,circular:!0,name:"copy outline",onClick:function(){m(s)}}),r.a.createElement(i.a,{link:!0,circular:!0,name:"external square",onClick:function(){window.open(a,"_blank")}}))));if(l)p=r.a.createElement("strong",null,null!==(f=t)&&void 0!==f?f:w);else p=r.a.createElement("div",null,r.a.createElement("strong",null,null!==(b=t)&&void 0!==b?b:w));return r.a.createElement(k.a,{on:"click",content:h,trigger:p})}var g=r.a.createElement(k.a,{mouseEnterDelay:500,content:"Copy to clipboard",trigger:r.a.createElement(i.a,{circular:!0,name:"copy outline",size:"small",onClick:function(){m(s)}})}),I=r.a.createElement(k.a,{mouseEnterDelay:500,content:"View on Etherscan",trigger:r.a.createElement(i.a,{circular:!0,name:"external square",size:"small",onClick:function(){window.open(a,"_blank")}})});return t?l?r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,t)," (",r.a.createElement("small",null,s,"\xa0",g,I),")"):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("strong",null,t)),r.a.createElement("div",null,r.a.createElement("small",null,s,"\xa0",g,I))):l?r.a.createElement("span",null,s,"\xa0",g,I):r.a.createElement("div",null,s,"\xa0",g,I)},O=a(35),A=a.n(O),C=a(28),x=a(1129),S=a(130),j=a.n(S),T=a(106),R=a(45),N=function(e){var t,a,n=e.allowanceId,c=Object(w.b)(),o=Object(w.c)((function(e){return e.allowances.allowancesById[n]})),l=Object(w.c)((function(e){return o.editTransactionId?e.transactions.transactionsById[o.editTransactionId]:void 0})),d=Object(w.c)((function(e){return e.addresses.walletAddressId}));if(l){var u,m,p;switch(l.transactionState){case R.a.CONFIRMED:u=r.a.createElement(i.a,{name:"check",size:"large"}),p="Transaction confirmed",m="Transaction hash: ".concat(l.transactionHash);break;case R.a.FAILED:u=r.a.createElement(i.a,{name:"exclamation triangle",color:"red",size:"large"}),p="Transaction failed",m="".concat(l.error);break;case R.a.SUBMITTED:u=r.a.createElement(i.a,{name:"spinner",loading:!0,size:"large"}),p="Transaction created",m="Waiting for confirmation...";break;case R.a.INITIAL:default:u=r.a.createElement(i.a,{name:"question",size:"large"}),p="Transaction unknown",m="Tx state INITIAL"}t=r.a.createElement(k.a,{header:p,content:m,trigger:u})}if((null===l||void 0===l?void 0:l.transactionState)!==R.a.SUBMITTED){var f=o.ownerId===d;a=r.a.createElement(k.a,{content:f?"edit allowance":"Only address owner can edit allowance",trigger:r.a.createElement("span",null,r.a.createElement(s.a,{icon:"edit",size:"small",compact:!0,primary:!0,disabled:!f,onClick:function(e){e.preventDefault(),c(Object(T.c)(n))}}))})}return r.a.createElement(r.a.Fragment,null,a,"\xa0",t)},B=new A.a(2).pow(new A.a(256)).subn(1),_=function(e){var t,a,c,o=e.allowanceId,l=Object(w.b)(),s=Object(w.c)((function(e){return e.allowances.allowancesById[o]})),i=Object(w.c)((function(e){return e.allowances.allowanceValuesById[o]})),d=Object(w.c)((function(e){return e.tokenContracts.contractsById[s.tokenContractId]})),u=Object(w.c)((function(e){return e.addresses.addressesById[s.spenderId]})),m=Object(w.c)((function(e){return e.respsonsive})).mobile,p=Object(w.c)((function(e){return e.onboard})).networkId;switch(Object(n.useEffect)((function(){i.state===C.a.QUERY_STATE_INITIAL&&l(Object(C.c)(o))}),[i,o,l]),i.state){case C.a.QUERY_STATE_RUNNING:t=r.a.createElement(x.a,{active:!0,inline:!0,size:"mini"});break;case C.a.QUERY_STATE_COMPLETE:if(c=i.value.isZero(),a=i.value.eq(B)||i.value.gte(d.totalSupply))t=r.a.createElement("em",null,"unlimited");else{var b=new A.a("2"),v=j()({value:i.value,decimals:d.decimals,roundToDecimals:b}).rounded;t=r.a.createElement("span",null,v)}break;case C.a.QUERY_STATE_ERROR:t=r.a.createElement("span",null,"error");break;case C.a.QUERY_STATE_INITIAL:default:t=""}var E,h,y=new Date(s.lastChangedTimestamp).toDateString(),k=r.a.createElement(g.a.Cell,null,r.a.createElement(I,{ethAddress:u,networkId:p,mobile:m}));m?(E=r.a.createElement(g.a.Cell,{negative:a,positive:c,textAlign:"right"},t,r.a.createElement(f.a,{fitted:!0}),r.a.createElement("small",null,y)),h=null):(E=r.a.createElement(g.a.Cell,{negative:a,positive:c,textAlign:"right"},t),h=r.a.createElement(g.a.Cell,{collapsing:!0},y));var O=r.a.createElement(g.a.Cell,{collapsing:!0},r.a.createElement(N,{allowanceId:o}));return r.a.createElement(g.a.Row,{key:"".concat(o)},k,E,h,O)},U=a(89),L=function(e){var t=e.tokenId,a=e.ownerId,c=e.allowanceIds,o=Object(w.b)(),s=Object(w.c)((function(e){return e.respsonsive})).mobile,d=Object(w.c)((function(e){return e.onboard})).networkId,u=Object(w.c)((function(e){return e.tokenContracts.contractsById[t]})),b=Object(w.c)((function(e){return e.addresses.addressesById[t]})),v=Object(w.c)((function(e){var n=Object(U.c)(a,t);return e.balances.balancesById[n]})),E=Object(n.useState)(!0),y=Object(p.a)(E,2),k=y[0],O=y[1];Object(n.useEffect)((function(){!v&&(null===u||void 0===u?void 0:u.contractInstance)&&o(Object(U.b)(a,t))}),[v,a,t,u,o]);if(!u)return r.a.createElement(l.a,{raised:!0},r.a.createElement(h.a,null,r.a.createElement(h.a.Header,null,r.a.createElement(h.a.Line,null)),r.a.createElement(h.a.Paragraph,null,r.a.createElement(h.a.Line,null),r.a.createElement(h.a.Line,null))));var x=u.name;""===x&&(x="Unnamed ERC20");var S=new A.a(2);if(v&&v.queryState!==C.a.QUERY_STATE_RUNNING){var T=j()({value:v.value,decimals:u.decimals,roundToDecimals:S}).rounded;x+=" (".concat(T," ").concat(u.symbol,")")}else x+=" (loading...)";var R=r.a.createElement("div",null,x),N=[];if(c.forEach((function(e){N.push(r.a.createElement(_,{key:e,allowanceId:e}))})),s){var B;k||(B=r.a.createElement(g.a,{basic:"very",celled:!0,unstackable:!0,compact:!0,size:"small"},r.a.createElement(g.a.Header,null,r.a.createElement(g.a.Row,null,r.a.createElement(g.a.HeaderCell,null,"Spender"),r.a.createElement(g.a.HeaderCell,{textAlign:"center",style:{paddingBottom:0}},"Allowance",r.a.createElement(f.a,{fitted:!0}),r.a.createElement("small",null,"Last modified")),r.a.createElement(g.a.HeaderCell,null,"Action"))),r.a.createElement(g.a.Body,null,N)));var L=r.a.createElement(i.a,{style:{float:"right"},name:k?"chevron down":"chevron up",size:"mini",onClick:function(){O(!k)}});return r.a.createElement(l.a,{raised:!0},r.a.createElement(m.a,{size:"small"},L,R,r.a.createElement(m.a.Subheader,null,r.a.createElement(I,{ethAddress:b,mobile:s,networkId:d}))),B)}return r.a.createElement(l.a,{raised:!0},r.a.createElement(m.a,{size:"medium"},R,r.a.createElement(m.a.Subheader,null,r.a.createElement(I,{ethAddress:b,mobile:s,networkId:d}))),r.a.createElement(g.a,{basic:"very",celled:!0,selectable:!0},r.a.createElement(g.a.Header,null,r.a.createElement(g.a.Row,{textAlign:"center"},r.a.createElement(g.a.HeaderCell,null,"Spender"),r.a.createElement(g.a.HeaderCell,{textAlign:"center"},"Allowance"),r.a.createElement(g.a.HeaderCell,{textAlign:"center"},"Last Change"),r.a.createElement(g.a.HeaderCell,null,"Action"))),r.a.createElement(g.a.Body,null,N)))},z=a(1141),F=function(e){var t=e.mobile,a=e.info,n=e.warning,c=e.error,o=e.success,s=e.icon,i=e.header,d=e.body,u=!t&&"very",m=!!s,p=t?"small":"huge",f=t?"left":"center";return r.a.createElement(l.a,{basic:!0,padded:u,textAlign:f},r.a.createElement(z.a,{warning:n,info:a,error:c,success:o,icon:m,size:p},m&&s,r.a.createElement(z.a.Content,null,r.a.createElement(z.a.Header,null,i),d)))},D=function(e){var t,a=e.ownerId,n=e.showZeroAllowances,c=e.addressFilter,o=Object(w.c)((function(e){var t,r=null===(t=n&&""===c?e.allowances.allowanceIdsByOwnerId[a]:e.allowances.allowanceIdsByOwnerId[a].filter((function(t){var a=e.allowances.allowancesById[t];if(!n){var r=e.allowances.allowanceValuesById[t];if(r.state===C.a.QUERY_STATE_COMPLETE&&r.value.isZero())return!1}if(c){var o=c.toLowerCase(),l=e.tokenContracts.contractsById[a.tokenContractId];if(l){var s,i=e.addresses.addressesById[l.addressId];if(!(l.name.toLowerCase().includes(o)||l.symbol.toLowerCase().includes(o)||i.address.toLowerCase().includes(o)||(null===(s=i.ensName)||void 0===s?void 0:s.toLowerCase().includes(o))))return!1}else console.warn("No tokencontract for ".concat(a.tokenContractId))}return!0})))||void 0===t?void 0:t.map((function(t){return e.allowances.allowancesById[t]})),o=E.a.groupBy(r,"tokenContractId");return E.a.sortBy(o,[function(t){var a,n=e.tokenContracts.contractsById[t[0].tokenContractId];return null!==(a=null===n||void 0===n?void 0:n.name)&&void 0!==a?a:"Z"}])})),l=Object(w.c)((function(e){return e.allowances.allowanceQueryStateByOwner[a]})),s=Object(w.c)((function(e){return e.addresses.addressesById[a]})),d=Object(w.c)((function(e){return e.respsonsive.mobile})),u=Object(w.c)((function(e){return e.onboard.networkId}));if(!l)return console.log("No querystate available for ".concat(a)),null;var m,p=[],f=Object(b.a)(o);try{for(f.s();!(m=f.n()).done;){var v=m.value,h=v[0].tokenContractId,g=v.map((function(e){return e.id}));p.push(r.a.createElement(L,{key:h,tokenId:h,ownerId:a,allowanceIds:g}))}}catch(k){f.e(k)}finally{f.f()}switch(l.state){case C.a.QUERY_STATE_RUNNING:t=r.a.createElement(F,{mobile:d,header:"Loading events",body:"Querying dfuse API for ERC20 Approvals, getting page ".concat(l.currentPage+1,"..."),warning:!0,icon:r.a.createElement(i.a,{name:"circle notched",loading:!0})});break;case C.a.QUERY_STATE_ERROR:t=r.a.createElement(F,{mobile:d,error:!0,header:"Error",icon:r.a.createElement(i.a,{name:"exclamation triangle"}),body:l.error});break;case C.a.QUERY_STATE_COMPLETE:if(0===p.length){var y=r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{ethAddress:s,mobile:d,networkId:u,inline:!0})," ","has no approvals.");t=r.a.createElement(F,{mobile:d,success:!0,icon:r.a.createElement(i.a,{name:"info"}),header:"No Approvals",body:y})}break;case C.a.QUERY_STATE_INITIAL:default:return r.a.createElement("div",null,"Unhandled state!")}return r.a.createElement(r.a.Fragment,null,t,p)},P=a(1131),M=a(1132),Q=function(e){var t=e.showZeroAllowances,a=e.toggleShowZeroAllowances,n=e.addressFilterValue,c=e.handleAddressFilterChange,o=e.refresh,l=e.clearAddressFilter;return e.mobile?r.a.createElement(u.a,{verticalAlign:"middle",centered:!0,textAlign:"center",columns:2,divided:!0},r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Column,{width:13},r.a.createElement(P.a,{toggle:!0,label:"Include zero allowances",checked:t,onChange:a})),r.a.createElement(u.a.Column,{width:3},r.a.createElement(s.a,{circular:!0,icon:"refresh",onClick:o,title:"Refresh allowances",size:"small",compact:!0}))),r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Column,{width:16},r.a.createElement(M.a,{name:"filter",placeholder:"Filter by name, symbol or address",onChange:c,value:n,icon:r.a.createElement(i.a,{name:"eraser",circular:!0,link:!0,onClick:l}),fluid:!0})))):r.a.createElement(u.a,{verticalAlign:"middle",centered:!0,textAlign:"center",columns:3,divided:!0,stackable:!0},r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Column,{width:9},r.a.createElement(M.a,{label:"Tokenfilter",name:"filter",placeholder:"Enter name, symbol or contract address",onChange:c,value:n,icon:r.a.createElement(i.a,{name:"eraser",circular:!0,link:!0,onClick:l}),fluid:!0})),r.a.createElement(u.a.Column,{width:6},r.a.createElement(P.a,{toggle:!0,label:"Include zero allowances",checked:t,onChange:a})),r.a.createElement(u.a.Column,{width:1},r.a.createElement(s.a,{circular:!0,icon:"refresh",onClick:o,title:"Refresh allowances",size:"small",compact:!0}))))};var Y=a(1135),W=a(1134),q=function(e){var t,a=e.mobile,n=e.tokenName,c=e.handleChange,o=e.tokenSymbol,l=e.spender,s=e.currentAllowance,i=e.newAllowance,d=e.handleClose,p=e.handleSubmit,f=a?"small":"huge",b=r.a.createElement(I,{ethAddress:l,mobile:a,networkId:1,inline:!0});return t=a?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"New Allowance"),r.a.createElement(M.a,{placeholder:"Enter amount",type:"number",name:"newAllowance",onChange:c,value:i,fluid:!0})):r.a.createElement(M.a,{label:{tag:!0,content:"Enter new allowance"},labelPosition:"right",placeholder:"Enter amount",type:"number",name:"newAllowance",onChange:c,value:i}),r.a.createElement(Y.a,{open:!0,size:"small",onClose:d},r.a.createElement(m.a,null,"Edit Allowance"),r.a.createElement(Y.a.Content,null,r.a.createElement(z.a,{size:f},r.a.createElement(z.a.List,null,r.a.createElement(z.a.Item,null,"Token: ",r.a.createElement("strong",null,n)),r.a.createElement(z.a.Item,null,"Spender: ",b),r.a.createElement(z.a.Item,null,"Current allowance:"," ",r.a.createElement("strong",null,s," ",o)))),r.a.createElement(W.a,{size:"size",onSubmit:p},r.a.createElement(W.a.Field,{required:!0},t),r.a.createElement(u.a,{columns:2},r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Column,null,r.a.createElement(W.a.Button,{type:"button",fluid:!0,size:f,negative:!0,onClick:d},"Cancel")),r.a.createElement(u.a.Column,null,r.a.createElement(W.a.Button,{type:"submit",fluid:!0,size:f,positive:!0},"Set allowance")))))))},H=a(88),G=function(){var e=Object(w.b)(),t=Object(w.c)((function(e){return e.allowances.allowancesById[e.editAllowance.editAllowanceId]})),a=Object(w.c)((function(e){return e.allowances.allowanceValuesById[e.editAllowance.editAllowanceId]})),c=Object(w.c)((function(e){return e.tokenContracts.contractsById[t.tokenContractId]})),o=Object(w.c)((function(e){return e.addresses.addressesById[t.spenderId]})),l=Object(w.c)((function(e){return e.respsonsive.mobile})),s=Object(n.useState)("0"),i=Object(p.a)(s,2),d=i[0],u=i[1],m=Object(n.useCallback)((function(){return a.value.gte(c.totalSupply)?"unlimited":j()({value:a.value,decimals:c.decimals,roundToDecimals:new A.a(2)}).rounded}),[a.value,c.totalSupply,c.decimals]),f=""!==c.name?c.name:"Unnamed ERC20";return r.a.createElement(q,{mobile:l,newAllowance:d,currentAllowance:m(),tokenAddress:c.addressId,handleClose:function(){e(Object(T.a)())},spender:o,tokenName:f,handleChange:function(e){var t=e.target.value;parseFloat(t)<0&&(t="0"),u(t)},handleSubmit:function(){console.log("Submitted new allowance: ".concat(d));var a=function(e,t){var a=new A.a(10).pow(t),n="-"===e.substring(0,1);if(n&&(e=e.substring(1)),"."===e)throw new Error("Invalid value ".concat(e," cannot be converted to")+" base unit with ".concat(t.toString()," decimals."));var r=e.split(".");if(r.length>2)throw new Error("Too many decimal points");var c=r[0],o=r[1];c||(c="0"),o||(o="0");var l=t.toNumber();if(o.length>l)throw new Error("Too many decimal places");for(;o.length<l;)o+="0";var s=new A.a(c),i=new A.a(o),d=s.mul(a).add(i);return n&&(d=d.neg()),new A.a(d.toString(10),10)}(d,c.decimals);e(Object(T.a)()),e(Object(H.d)(c.addressId,o.address,a,t.id))},tokenSymbol:c.symbol})},V=function(){var e=Object(w.b)(),t=Object(w.c)((function(e){return e.respsonsive})).mobile,a=Object(w.c)((function(e){return e.addresses.checkAddressId?e.addresses.addressesById[e.addresses.checkAddressId]:void 0})),c=Object(w.c)((function(e){return a?e.allowances.allowanceQueryStateByOwner[a.address]:void 0})),o=Object(w.c)((function(e){return e.editAllowance.showModal})),s=Object(n.useState)(!0),i=Object(p.a)(s,2),d=i[0],u=i[1],m=Object(n.useState)(""),b=Object(p.a)(m,2),v=b[0],E=b[1],h=function(){u(!d)},g=function(){E("")},y=function(e){var t=e.target.value;E(t)};Object(n.useEffect)((function(){var e,t;document.title="TAC - ".concat(null!==(e=null!==(t=null===a||void 0===a?void 0:a.ensName)&&void 0!==t?t:null===a||void 0===a?void 0:a.address)&&void 0!==e?e:"")}),[a]),Object(n.useEffect)((function(){c&&c.state===C.a.QUERY_STATE_INITIAL&&a&&e(Object(C.d)(a.address))}),[c,e,a]);var k,I=function(){!function(){var t;a&&(console.log('Starting query for "'.concat(null!==(t=null===a||void 0===a?void 0:a.ensName)&&void 0!==t?t:null===a||void 0===a?void 0:a.address,'"')),e(Object(C.d)(a.address)))}()};return a?t?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null),r.a.createElement(Q,{showZeroAllowances:d,toggleShowZeroAllowances:h,addressFilterValue:v,handleAddressFilterChange:y,clearAddressFilter:g,refresh:I,mobile:t}),r.a.createElement(f.a,null),r.a.createElement(D,{ownerId:a.address,showZeroAllowances:d,addressFilter:v}),o&&r.a.createElement(G,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{basic:!0},r.a.createElement("h2",null,"Allowances of ",null!==(k=null===a||void 0===a?void 0:a.ensName)&&void 0!==k?k:null===a||void 0===a?void 0:a.address,":")),r.a.createElement(Q,{showZeroAllowances:d,toggleShowZeroAllowances:h,addressFilterValue:v,handleAddressFilterChange:y,clearAddressFilter:g,refresh:I,mobile:t}),r.a.createElement(D,{ownerId:a.address,showZeroAllowances:d,addressFilter:v}),o&&r.a.createElement(G,null)):r.a.createElement("div",null,"No address set")},K=a(40),Z=function(e){var t=e.children,a=Object(o.f)(),c=Object(w.b)(),l=Object(w.c)((function(e){return e.onboard})),s=l.onboardAPI,d=l.wallet,u=Object(w.c)((function(e){return e.respsonsive.mobile}));return Object(n.useEffect)((function(){s?d||(console.log("OnboardGate: Dispatching selectWallet"),c(Object(K.c)(a))):(console.log("OnboardGate: Dispatching initialize()"),c(Object(K.b)(a)))}),[s,d,c,a]),d?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(F,{mobile:u,header:"Waiting for wallet",body:"Please complete wallet selection",icon:r.a.createElement(i.a,{name:"spinner",loading:!0}),info:!0})},$=a(8),J=a.n($),X=a(33),ee=function(e){var t=e.handleInput,a=e.loading,n=e.error,c=e.value,o=e.success,l=function(e){var a=e.target.value;t(a)};return e.mobile?r.a.createElement(W.a.Field,{error:n},r.a.createElement("label",null,"Enter address/ENS name or change wallet address"),r.a.createElement("input",{onChange:l,placeholder:"Eth address or ENS name",value:c})):r.a.createElement(W.a.Field,{inline:!0,width:14},r.a.createElement(M.a,{placeholder:"Address or ENS Name",error:n,loading:a,onChange:l,value:c,type:"text",action:{type:"Submit",disabled:!o,content:"Go!",positive:!0},label:"Enter address/ENS name or select in wallet"}))},te=a(37),ae="address_initial",ne="address_resolving",re="address_valid",ce="address_invalid",oe=function(){var e=Object(w.b)(),t=Object(o.f)(),a=Object(w.c)((function(e){return e.onboard})).web3,c=Object(w.c)((function(e){return e.respsonsive})).mobile,l=Object(w.c)((function(e){return e.addresses.checkAddressId?e.addresses.addressesById[e.addresses.checkAddressId]:void 0})),s=Object(n.useState)(ae),i=Object(p.a)(s,2),d=i[0],m=i[1],f=Object(n.useState)(""),b=Object(p.a)(f,2),v=b[0],E=b[1],h=Object(n.useState)(""),g=Object(p.a)(h,2),y=g[0],k=g[1],I=Object(n.useState)(void 0),O=Object(p.a)(I,2),A=O[0],C=O[1];Object(n.useEffect)((function(){var e,t;l?(console.log("CheckAddress: ".concat(null!==(e=l.ensName)&&void 0!==e?e:l.address)),E(null!==(t=l.ensName)&&void 0!==t?t:l.address)):console.log("CheckAddress undefined")}),[l,E]);var x=d===ce,S=d===ne,j=d===re,T=function(){j&&(e(A?Object(te.c)(A,t):Object(te.c)(y,t)),E(""),C(void 0))},R=function(){var n=Object(X.a)(J.a.mark((function n(r){var o,l,s;return J.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(E(r),C(void 0),0!==r.length){n.next=6;break}m(ae),n.next=28;break;case 6:if(o=/^(0x)?[0-9a-f]{40}$/i.test(r),!/.*\.eth$/i.test(r)||!a){n.next=27;break}return m(ne),n.prev=10,n.next=13,a.eth.ens.getAddress(r);case 13:l=n.sent,console.log("Resolved ".concat(r," to ").concat(l)),m(re),k(l),C(r),c&&e(Object(te.c)(r,t)),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(10),console.log("Could not resolve "+r),m(ce);case 25:n.next=28;break;case 27:o?(s=r.toLowerCase(),k(s),m(re),c&&e(Object(te.c)(s,t))):m(ce);case 28:case"end":return n.stop()}}),n,null,[[10,21]])})));return function(e){return n.apply(this,arguments)}}();return c?r.a.createElement(W.a,{onSubmit:T,error:x,success:j,loading:S},r.a.createElement(ee,{handleInput:R,value:v,error:x,success:j,loading:S,mobile:c})):r.a.createElement(u.a,{textAlign:"center",centered:!0,columns:1},r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Column,{width:14},r.a.createElement(W.a,{size:"huge",onSubmit:T,error:x,success:j,widths:"equal"},r.a.createElement(W.a.Group,null,r.a.createElement(ee,{handleInput:R,value:v,error:x,success:j,loading:S,mobile:c}))))))},le=function(e){var t=e.children,a=Object(w.b)(),c=Object(o.f)(),l=Object(o.g)().address,s=Object(w.c)((function(e){return e.addresses})).checkAddressState,d=Object(w.c)((function(e){return e.addresses.walletAddressId})),u=Object(w.c)((function(e){return e.respsonsive.mobile})),m=Object(n.useState)(""),f=Object(p.a)(m,2),b=f[0],v=f[1];return Object(n.useEffect)((function(){l?b!==l?(console.log("AddressExtractor: Setting new address ".concat(l)),a(Object(te.g)(l)),v(l)):console.log("AddressExtractor: ".concat(l," already dispatched.")):d&&(console.log("No address in params. Trying fallback to wallet."),a(Object(te.f)(d,c,!0)))}),[l,b,d,c,a]),s===te.a.Invalid?r.a.createElement(F,{mobile:u,header:"Invalid address",body:"Address ".concat(l," is invalid"),icon:r.a.createElement(i.a,{name:"exclamation triangle"}),error:!0}):s===te.a.Resolving?r.a.createElement(F,{mobile:u,header:"Checking address",body:"Checking address ".concat(l),icon:r.a.createElement(i.a,{name:"circle notched",loading:!0}),warning:!0}):r.a.createElement(r.a.Fragment,null,t)},se=a(1148),ie=a(1146),de=a(1143),ue=a(525),me=a(208),pe=a(1138),fe=function(){var e,t=[{key:1,text:"Mainnet",value:1},{key:2,text:"Ropsten",value:3}],a=Object(w.b)(),n=Object(w.c)((function(e){return e.onboard})),c=n.requiredNetworkId,o=n.wallet,l=t.find((function(e){return e.value===c})),i=null!==(e="Network: "+(null===l||void 0===l?void 0:l.text))&&void 0!==e?e:"select";return r.a.createElement(pe.a,{as:s.a,disabled:!o,text:i,options:t,onChange:function(e,t){var n=t.value;console.log("Selected value: ".concat(n)),a(Object(K.f)(parseInt("".concat(n))))},value:c,fluid:!0})},be=function(e){var t=e.handleChangeWallet,a=e.handleChangeAddress,n=e.handleClose,c=e.mobile,o=e.networkId,l=e.wallet,d=e.walletAddress,u=(null===l||void 0===l?void 0:l.name)?r.a.createElement("p",null,"Connected to ",r.a.createElement("strong",null,l.name),"."):r.a.createElement("p",null,"No wallet connected."),m=(null===l||void 0===l?void 0:l.name)?"linkify":"unlinkify",p=d?r.a.createElement(I,{ethAddress:d,mobile:c,networkId:o}):"None",f=c?"small":"large",b=[];return b.push(r.a.createElement(z.a,{icon:!0,info:!0,size:f,key:1},r.a.createElement(i.a,{name:m}),r.a.createElement(z.a.Content,null,r.a.createElement(z.a.Header,null,"Wallet"),u,r.a.createElement(s.a,{primary:!0,size:"small",onClick:t},"Change Wallet")))),"hardware"===(null===l||void 0===l?void 0:l.type)&&b.push(r.a.createElement(z.a,{icon:!0,info:!0,size:f,key:2},r.a.createElement(i.a,{name:"id card outline"}),r.a.createElement(z.a.Content,null,r.a.createElement(z.a.Header,null,"Wallet address"),r.a.createElement("p",null,null===l||void 0===l?void 0:l.name," wallet supports multiple addresses."),r.a.createElement("p",null,"Current address: ",p),r.a.createElement(s.a,{primary:!0,size:"small",onClick:a},"Change Address")))),r.a.createElement(Y.a,{open:!0,size:f,onClose:n},r.a.createElement(Y.a.Header,null,"Wallet configuration"),r.a.createElement(Y.a.Content,null,b),r.a.createElement(Y.a.Actions,null,r.a.createElement(s.a,{size:"small",onClick:n},"Close")))},we=function(e){var t=e.walletName,a=e.handleClick,n=!!t,c=t?"Wallet: ".concat(t):"Connect wallet";return r.a.createElement(s.a,{fluid:!0,positive:n,onClick:a},c)},ve=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(w.b)(),s=Object(o.f)(),i=Object(w.c)((function(e){return e.onboard})),d=i.wallet,u=i.onboardAPI,m=i.networkId,f=Object(w.c)((function(e){return e.addresses.walletAddressId?e.addresses.addressesById[e.addresses.walletAddressId]:void 0})),b=Object(w.c)((function(e){return e.respsonsive})).mobile;return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{handleClick:function(){c(!0)},walletName:null===d||void 0===d?void 0:d.name,walletAccount:f}),a&&r.a.createElement(be,{handleClose:function(){c(!1)},handleChangeWallet:function(){c(!1),l(Object(K.c)(s))},handleChangeAddress:function(){c(!1),null===u||void 0===u||u.accountSelect()},mobile:b,networkId:m,wallet:d,walletAddress:f}))},Ee=function(){return r.a.createElement(de.a,{fixed:"top",inverted:!0,size:"huge"},r.a.createElement(d.a,null,r.a.createElement(de.a.Item,{header:!0,as:c.b,to:"/",title:"Home",style:{padding:"0px"}},r.a.createElement(ue.a,{src:"/logo192.png",width:60,height:60})),r.a.createElement(de.a.Item,{as:c.b,to:"/address/",title:"Check Allowances"},r.a.createElement(i.a,{name:"search",size:"large"})," Check Allowances"),r.a.createElement(de.a.Menu,{position:"right"},r.a.createElement(de.a.Item,null,r.a.createElement(ve,null)),r.a.createElement(de.a.Item,null,r.a.createElement(fe,null)),r.a.createElement(de.a.Item,null,r.a.createElement("a",{href:"https://github.com/TripleSpeeder/token-allowance-checker",title:"github.com/TripleSpeeder/token-allowance-checker",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(i.a,{name:"github",size:"big"}))))))},he=function(e){var t=e.children,a=Object(n.useState)(void 0),u=Object(p.a)(a,2),f=u[0],b=u[1],v=Object(n.useState)(!1),E=Object(p.a)(v,2),h=E[0],g=E[1],y=Object(w.c)((function(e){return e.respsonsive})).mobile,k=Object(w.b)(),I=Object(o.f)();Object(n.useEffect)((function(){k(Object(K.b)(I))}),[k,I]);var O,A=r.a.createElement(l.a,{textAlign:"center",vertical:!0,basic:!0},r.a.createElement(Ee,null),r.a.createElement(d.a,{text:!0,style:{marginTop:"4em",marginBottom:"2em"}},r.a.createElement(m.a,{as:"h1",inverted:!1,style:{fontSize:"3em",marginTop:"0.5em"}},"Token Allowance Checker",r.a.createElement(m.a.Subheader,null,"Control your token approvals"))));return O=y?r.a.createElement(ie.a.Pushable,null,r.a.createElement(de.a,{fixed:"top",inverted:!0,size:"small"},r.a.createElement(de.a.Item,{onClick:function(){return g(!0)}},r.a.createElement(i.a,{name:"bars"})),r.a.createElement(de.a.Item,{style:{padding:"0"}},r.a.createElement(c.b,{to:"/"},r.a.createElement(ue.a,{src:"/logo192.png",width:40,height:40}))),r.a.createElement(de.a.Item,null,"Token Allowance Checker")),r.a.createElement(ie.a,{as:de.a,animation:"overlay",inverted:!0,onHide:function(){return g(!1)},vertical:!0,visible:h},r.a.createElement(de.a.Item,null,r.a.createElement(ve,null)),r.a.createElement(de.a.Item,null,r.a.createElement(fe,null)),r.a.createElement(de.a.Item,null,r.a.createElement(s.a,{icon:!0,fluid:!0,as:"a",href:"https://github.com/TripleSpeeder/token-allowance-checker",title:"github.com/TripleSpeeder/token-allowance-checker",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(i.a,{name:"github"})," TAC on Github"))),r.a.createElement(ie.a.Pusher,{style:{marginTop:"3em"}},t)):r.a.createElement(r.a.Fragment,null,A,t),r.a.createElement(se.a,{as:c.a,fireOnMount:!0,onUpdate:function(e,t){var a=t.width<=se.a.onlyMobile.maxWidth;a!==f&&(k(Object(me.b)(a)),b(a))}},O)},ge=a(1139),ye=a(523),ke=a.n(ye),Ie=a(524),Oe=function(){return r.a.createElement(d.a,{textAlign:"center"},r.a.createElement(f.a,null),r.a.createElement(l.a,{basic:!0},r.a.createElement(ge.a,{horizontal:!0,size:"small",verticalAlign:"top"},r.a.createElement(ge.a.Item,{as:"a",href:"https://twitter.com/TripleSpeeder",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(k.a,{content:"@triplespeeder",trigger:r.a.createElement(i.a,{size:"big",name:"twitter"})})),r.a.createElement(ge.a.Item,{as:"a",href:"https://t.me/triplespeeder",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(k.a,{content:"@triplespeeder",trigger:r.a.createElement(i.a,{size:"big",name:"telegram"})})),r.a.createElement(ge.a.Item,{as:"a",href:"mailto:michael@m-bauer.org"},r.a.createElement(k.a,{content:"michael@m-bauer.org",trigger:r.a.createElement(i.a,{size:"big",name:"mail outline"})})),r.a.createElement(ge.a.Item,{as:"a",href:"https://github.com/TripleSpeeder/token-allowance-checker",title:"github.com/TripleSpeeder/token-allowance-checker",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(k.a,{content:"github.com/TripleSpeeder/token-allowance-checker",trigger:r.a.createElement(i.a,{size:"big",name:"github"})})),r.a.createElement(ge.a.Item,{as:"a",href:"https://www.reddit.com/u/TripleSpeeder",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(k.a,{content:"u/TripleSpeeder",trigger:r.a.createElement(i.a,{size:"big",name:"reddit"})})),r.a.createElement(ge.a.Item,{as:"a",target:"_blank",rel:"noopener noreferrer",href:"https://gitcoin.co/grants/480/token-allowance-checker?tab=description"},r.a.createElement(k.a,{content:"Gitcoin grant page",trigger:r.a.createElement(ue.a,{avatar:!0,src:ke.a})})),r.a.createElement(ge.a.Item,null,r.a.createElement(k.a,{content:"Donate to tac.dappstar.eth",trigger:r.a.createElement(i.a,{size:"big",name:"ethereum"})}))),r.a.createElement(m.a,{size:"small"},"powered by"," ",r.a.createElement("a",{href:"https://www.dfuse.io/",rel:"noopener noreferrer",target:"_blank"},"dfuse")," ","technology"),r.a.createElement(m.a,{size:"tiny"},"(c) Michael Bauer",r.a.createElement(m.a.Subheader,null,"v",Ie.version))))};t.default=function(){var e=Object(w.c)((function(e){return e.respsonsive})).mobile?"small":"huge",t=r.a.createElement(l.a,{basic:!0,textAlign:"center"},r.a.createElement(s.a,{primary:!0,as:c.b,to:"/address/",size:"massive"},"Check Allowances",r.a.createElement(i.a,{name:"arrow right"})));return r.a.createElement(c.a,null,r.a.createElement(he,null,r.a.createElement(o.c,null,r.a.createElement(o.a,{path:["/address/:address","/address"]},r.a.createElement(d.a,null,r.a.createElement(Z,null,r.a.createElement(le,null,r.a.createElement(oe,null),r.a.createElement(V,null))))),r.a.createElement(o.a,{path:"/"},t,r.a.createElement(l.a,{basic:!0,vertical:!0,size:e},r.a.createElement(u.a,{container:!0,stackable:!0,verticalAlign:"top"},r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Column,{width:8},r.a.createElement(m.a,null,"Control your approvals"),r.a.createElement("p",null,r.a.createElement("em",null,"Token Allowance Checker")," ","shows all approvals for your ERC20-compliant tokens, and the option to change the approved amount - or completely zero it.")),r.a.createElement(u.a.Column,{width:8},r.a.createElement(m.a,null,"The unlimited approval problem"),r.a.createElement("p",null,"Many DApps have the habit of requiring you to approve effectively unlimited amount of tokens. This helps improving the user experience, as you only have to sign off an approval once and it will be enough for all future transactions."),r.a.createElement("p",null,"However this also means that the DApp (or the person/entity controlling it) can at any time transfer ",r.a.createElement("em",null,"all of your tokens"),", without requiring any further approval."),r.a.createElement("p",null,"In addition, there is no concept of expiring approvals. Once approved, the approval will remain forever. If you do not trust a DApp or its operators anymore, there is usually no easy way to remove the approval."))))))),r.a.createElement(Oe,null)))}},1095:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(75),o=a.n(c),l=a(12),s=a(36),i=a(64),d=a(40),u=a(37),m=a(88),p=a(28),f=a(89),b=a(106),w=a(45),v=a(208),E=Object(i.c)({onboard:d.a,addresses:u.d,tokenContracts:m.c,allowances:p.b,balances:f.d,editAllowance:b.b,transactions:w.c,respsonsive:v.a}),h=Object(s.c)({serializableCheck:{ignoredActions:[d.e.type,d.h.type,d.g.type,m.a.type,p.e.type,f.a.type,f.e.type],ignoredPaths:["onboard.web3","onboard.wallet","onboard.onboardAPI","tokenContracts.contractsById","allowances.allowanceValuesById","balances.balancesById"]},immutableCheck:{ignoredPaths:["onboard.web3","onboard.wallet","onboard.onboardAPI","tokenContracts.contractsById"],warnAfter:100}});var g=Object(s.a)({reducer:E,middleware:h});a(918);!function(){var e=a(1094).default;o.a.render(r.a.createElement(l.a,{store:g},r.a.createElement(e,null)),document.getElementById("root"))}()},160:function(e,t,a){"use strict";t.a={dfuse:{1:{endpoint:"mainnet.eth.dfuse.io",apikey:"web_085aeaac9c520204b1a9dcaa357e5460"},3:{endpoint:"ropsten.eth.dfuse.io",apikey:"web_085aeaac9c520204b1a9dcaa357e5460"}},etherscan:{1:{apikey:"THS8KWYM6KZ8WBP3DXKUDR7UKCRB8YIRGH",endpoint:"api.etherscan.io"},3:{apikey:"THS8KWYM6KZ8WBP3DXKUDR7UKCRB8YIRGH",endpoint:"api-ropsten.etherscan.io"}},infura:{1:{apikey:"7f230a5ca832426796454c28577d93f2",endpoint:"mainnet.infura.io/v3/"},3:{apikey:"7f230a5ca832426796454c28577d93f2",endpoint:"ropsten.infura.io/v3/"}},onboard:{1:{apikey:"f4b71bf0-fe50-4eeb-bc2b-b323527ed9e6",endpoint:""},3:{apikey:"f4b71bf0-fe50-4eeb-bc2b-b323527ed9e6",endpoint:""}}}},208:function(e,t,a){"use strict";a.d(t,"b",(function(){return c}));var n=a(36),r=Object(n.b)({name:"responsive",initialState:{mobile:!1},reducers:{setMobile:function(e,t){e.mobile=t.payload}}}),c=r.actions.setMobile;t.a=r.reducer},28:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return N})),a.d(t,"c",(function(){return B})),a.d(t,"d",(function(){return _}));var n,r,c=a(8),o=a.n(c),l=a(33),s=a(131),i=a(36),d=a(88),u=a(37),m=a(35),p=a.n(m),f=a(45),b=a(496),w=a(40),v=a(497),E=a(160),h=function(e){var t=e.networkId,a=E.a.dfuse[t];if(!a)throw Error("Network ".concat(t," not supported by dfuse.io"));return Object(v.createDfuseClient)({apiKey:a.apikey,network:a.endpoint})},g=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.erc20Contract,n=t.contractAddress,e.prev=1,e.next=4,a.at(n);case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.log("Error instantiating contract at ".concat(n,": ").concat(e.t0)),e.abrupt("return",!1);case 11:return e.prev=11,e.next=14,r.totalSupply();case 14:return e.next=16,r.balanceOf(n);case 16:return e.next=18,r.allowance(n,n);case 18:e.next=24;break;case 20:return e.prev=20,e.t1=e.catch(11),console.log("Contract at ".concat(n," does not implement required ERC20 methods.")),e.abrupt("return",!1);case 24:return e.abrupt("return",r);case 25:case"end":return e.stop()}}),e,null,[[1,7],[11,20]])})));return function(t){return e.apply(this,arguments)}}(),y="0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925",k=[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],I=function(e){return e.topics[0]===y||(console.log("Skipping log event. Topic is wrong, expected ".concat(y,", got ").concat(e.topics[0],".")),!1)},O=function(e,t){if("0x"===e.data)return console.log("Detected bad contract at ".concat(e.address,": LogEntry.data is missing.")),!1;var a;try{a=t.eth.abi.decodeLog(k,e.data,e.topics.slice(1))}catch(n){return console.log("Detected bad contract at ".concat(e.address,": Can not decode logEntry:")),console.log(e),!1}return a},A=function(e,t,a){return parseInt(e)?t.toLowerCase()===a.toLowerCase()||(console.log("Skipping log event due to owner mismatch. Expected ".concat(a,", got ").concat(t)),!1):(console.log("Skipping log event: Invalid spender ".concat(e)),!1)},C=a(776);!function(e){e[e.QUERY_STATE_INITIAL=0]="QUERY_STATE_INITIAL",e[e.QUERY_STATE_RUNNING=1]="QUERY_STATE_RUNNING",e[e.QUERY_STATE_ERROR=2]="QUERY_STATE_ERROR",e[e.QUERY_STATE_COMPLETE=3]="QUERY_STATE_COMPLETE"}(r||(r={}));var x={currentPage:0,state:r.QUERY_STATE_INITIAL},S=Object(i.b)({name:"Allowances",initialState:{allowancesById:{},allowanceValuesById:{},allowanceIdsByOwnerId:{},allowanceQueryStateByOwner:{}},reducers:{addAllowance:{reducer:function(e,t){var a=t.payload,n=a.id,c=a.allowance;Object.keys(e.allowancesById).includes(n)||(e.allowancesById[n]=c,e.allowanceIdsByOwnerId[c.ownerId].push(c.id),e.allowanceValuesById[n]={allowanceId:n,state:r.QUERY_STATE_INITIAL,value:new p.a("-1")})},prepare:function(e,t,a,n){var r=function(e,t,a){return"".concat(t,"-").concat(e,"-").concat(a)}(e,t,a);return{payload:{id:r,allowance:{id:r,tokenContractId:e,ownerId:t,spenderId:a,lastChangedTimestamp:n}}}}},setQueryState:function(e,t){var a=t.payload,n=a.ownerId,r=a.queryState;e.allowanceQueryStateByOwner[n]=r},setAllowanceValue:function(e,t){var a=t.payload;e.allowanceValuesById[a.allowanceId]=a}},extraReducers:(n={},Object(s.a)(n,u.b.type,(function(e,t){var a=t.payload.id;Object.keys(e.allowanceIdsByOwnerId).includes(a)||(e.allowanceIdsByOwnerId[a]=[],e.allowanceQueryStateByOwner[a]=x)})),Object(s.a)(n,f.b.type,(function(e,t){var a=t.payload,n=a.allowanceId,r=a.transactionId;e.allowancesById[n].editTransactionId=r})),Object(s.a)(n,w.d.type,(function(e,t){var a=t.payload;console.log("Resetting allowances due to network change to ".concat(a)),Object.keys(e.allowanceQueryStateByOwner).forEach((function(t){e.allowanceQueryStateByOwner[t]=x})),Object.keys(e.allowanceIdsByOwnerId).forEach((function(t){e.allowanceIdsByOwnerId[t]=[]})),e.allowanceValuesById={},e.allowancesById={}})),n)}),j=S.actions,T=j.addAllowance,R=j.setQueryState,N=j.setAllowanceValue,B=(t.b=S.reducer,function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a,n){var c,l,s,i,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(N({allowanceId:e,value:new p.a("-1"),state:r.QUERY_STATE_RUNNING})),c=n().allowances.allowancesById[e],l=n().addresses.addressesById[c.ownerId],s=n().addresses.addressesById[c.spenderId],i=n().tokenContracts.contractsById[c.tokenContractId],t.prev=5,t.next=8,i.contractInstance.allowance(l.address,s.address);case 8:d=t.sent,a(N({allowanceId:e,value:d,state:r.QUERY_STATE_COMPLETE})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),console.log("Failed to get allowance from token ".concat(i.addressId)),a(N({allowanceId:e,value:new p.a("-1"),state:r.QUERY_STATE_ERROR}));case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,a){return t.apply(this,arguments)}}()}),_=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a,n){var c,l,s,i,m,p,f,w,v,E,k,x,S,j,N,B,_,U,L,z,F,D;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n().onboard.web3){t.next=4;break}return console.log("Missing web3!"),t.abrupt("return");case 4:l=n().addresses.addressesById[e],s=n().onboard.networkId,i=0,a(R({ownerId:e,queryState:{state:r.QUERY_STATE_RUNNING,currentPage:i}})),(m=C(b)).setProvider(c.currentProvider),t.prev=10,p=h({networkId:s}),f="",w=0,v=[],E=[],k=[];case 17:return console.log("Getting page ".concat(i,". Last page result: ").concat(w,".")),t.next=20,p.graphql("query ($query: String! $limit: Int64! $cursor: String) {\n      searchTransactions(\n        indexName: LOGS, \n        query: $query, \n        limit: $limit, \n        sort: DESC,\n        cursor: $cursor,\n      ) {\n        pageInfo {\n          endCursor\n        }\n        edges {\n          node {\n            hash\n            block {\n              number\n              header {\n                timestamp\n              }\n            }\n            matchingLogs {\n              data\n              topics\n              address\n            }\n          }\n        }\n      }\n    }",{variables:{limit:"50",query:"topic.0:".concat(y," topic.1:").concat(l.address),cursor:f}});case 20:if(!(x=t.sent).errors){t.next=23;break}throw x.errors;case 23:S=x.data.searchTransactions.edges||[],j=0;case 25:if(!(j<S.length)){t.next=62;break}N=S[j].node,B=parseInt(N.block.header.timestamp),_=0;case 29:if(!(_<N.matchingLogs.length)){t.next=59;break}if(U=N.matchingLogs[_],L=U.address.toLowerCase(),!v.includes(L)){t.next=34;break}return t.abrupt("continue",56);case 34:if(I(U)){t.next=36;break}return t.abrupt("continue",56);case 36:if(z=O(U,c)){t.next=40;break}return v.push(L),t.abrupt("continue",56);case 40:if(A(z.spender,z.owner,l.address)){t.next=42;break}return t.abrupt("continue",56);case 42:if(E.includes(L)){t.next=53;break}return t.next=45,g({erc20Contract:m,contractAddress:L});case 45:if(!(F=t.sent)){t.next=51;break}E.push(L),a(Object(d.b)(F)),t.next=53;break;case 51:return v.push(L),t.abrupt("continue",56);case 53:D=z.spender.toLowerCase(),k.includes(D)||(k.push(D),a(Object(u.c)(D)),a(Object(u.e)(D))),a(T(L,e,D,B));case 56:_++,t.next=29;break;case 59:j++,t.next=25;break;case 62:w=S.length,i++,f=x.data.searchTransactions.pageInfo.endCursor,a(R({ownerId:e,queryState:{state:r.QUERY_STATE_RUNNING,currentPage:i}}));case 66:if(w>0){t.next=17;break}case 67:a(R({ownerId:e,queryState:{state:r.QUERY_STATE_COMPLETE,currentPage:i}})),t.next=74;break;case 70:t.prev=70,t.t0=t.catch(10),console.log(t.t0),a(R({ownerId:e,queryState:{state:r.QUERY_STATE_ERROR,currentPage:i,error:JSON.stringify(t.t0)}}));case 74:case"end":return t.stop()}}),t,null,[[10,70]])})));return function(e,a){return t.apply(this,arguments)}}()}},37:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return b})),a.d(t,"e",(function(){return k})),a.d(t,"f",(function(){return A})),a.d(t,"c",(function(){return C})),a.d(t,"g",(function(){return x})),a.d(t,"h",(function(){return S}));var n,r,c=a(8),o=a.n(c),l=a(33),s=a(36),i=a(87),d=a.n(i),u="0x0000000000000000000000000000000000000000";!function(e){e[e.Initial=0]="Initial",e[e.ResolvingForward=1]="ResolvingForward",e[e.ResolvingReverse=2]="ResolvingReverse",e[e.Resolved=3]="Resolved"}(n||(n={})),function(e){e[e.Initial=0]="Initial",e[e.Resolving=1]="Resolving",e[e.Valid=2]="Valid",e[e.Invalid=3]="Invalid"}(r||(r={}));var m={addressesById:{},walletAddressId:void 0,prevWalletAddressId:void 0,checkAddressId:void 0,checkAddressState:r.Initial},p=Object(s.b)({name:"ethAddresses",initialState:m,reducers:{addAddress:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.ethAddress;e.addressesById[n]=r},prepare:function(e,t){return{payload:{id:e=e.toLowerCase(),ethAddress:{address:e,resolvingState:n.Initial,ensName:t}}}}},setResolvingState:function(e,t){var a=t.payload,n=a.id,r=a.resolvingState;e.addressesById[n].resolvingState=r},setENSName:function(e,t){var a=t.payload,n=a.id,r=a.ensName;e.addressesById[n].ensName=r},setCheckAddressId:function(e,t){e.checkAddressId=t.payload},setCheckAddressState:function(e,t){e.checkAddressState=t.payload},setWalletAddressId:function(e,t){e.prevWalletAddressId=e.walletAddressId,e.walletAddressId=t.payload},setEtherscanContractName:function(e,t){var a=t.payload,n=a.id,r=a.esContractName;e.addressesById[n].esContractName=r}}}),f=p.actions,b=f.addAddress,w=f.setResolvingState,v=f.setENSName,E=f.setCheckAddressId,h=f.setCheckAddressState,g=f.setWalletAddressId,y=f.setEtherscanContractName;t.d=p.reducer;var k=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a,n){var r,c,l,s,i,d,u,m;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n().onboard.networkId,c="THS8KWYM6KZ8WBP3DXKUDR7UKCRB8YIRGH",t.t0=r,t.next=1===t.t0?5:3===t.t0?7:9;break;case 5:return l="api.etherscan.io",t.abrupt("break",10);case 7:return l="api-ropsten.etherscan.io",t.abrupt("break",10);case 9:throw Error("Network ".concat(r," not supported"));case 10:return s="https://".concat(l,"/api?module=contract&action=getsourcecode&address=").concat(e,"&apikey=").concat(c),t.next=13,fetch(s);case 13:return i=t.sent,t.next=16,i.json();case 16:"OK"===(d=t.sent).message?(null===(m=null===d||void 0===d||null===(u=d.result[0])||void 0===u?void 0:u.ContractName)||void 0===m?void 0:m.length)&&a(y({id:e,esContractName:m})):console.log("Got message ".concat(d.message," fetching contract data from Etherscan API."));case 18:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},I=function(e,t,a){return new Promise(function(){var n=Object(l.a)(o.a.mark((function n(r,c){var l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Start resolveAndAddENSName for ".concat(e)),n.prev=1,n.next=4,a.eth.ens.getAddress(e);case 4:l=n.sent.toLowerCase(),console.log("Resolved ".concat(e," to ").concat(l)),t(b(l,e)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.log("Could not resolve "+e),c("Could not resolve "+e);case 13:console.log("End resolveAndAddENSName for ".concat(e)),r(l);case 15:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e,t){return n.apply(this,arguments)}}())},O=function(e,t,a){return new Promise(function(){var r=Object(l.a)(o.a.mark((function r(c){var l,s,i;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t(b(e)),t(w({id:e,resolvingState:n.ResolvingReverse})),r.prev=2,l=e.substr(2)+".addr.reverse",r.next=6,a.eth.ens.resolver(l);case 6:return s=r.sent,r.next=9,s.methods.name(d.a.hash(l)).call();case 9:i=r.sent,console.log("Got reverseENS: ".concat(i)),t(v({id:e,ensName:i})),r.next=16;break;case 14:r.prev=14,r.t0=r.catch(2);case 16:t(w({id:e,resolvingState:n.Resolved})),c(e);case 18:case"end":return r.stop()}}),r,null,[[2,14]])})));return function(e){return r.apply(this,arguments)}}())},A=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n,r){e=e.toLowerCase();var c=r().addresses.addressesById[e],o=a?t.replace:t.push;c.ensName?(console.log("Routing to /address/".concat(c.ensName)),o("/address/".concat(c.ensName))):(console.log("Routing to /address/".concat(c.address)),o("/address/".concat(c.address)))}},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return function(){var a=Object(l.a)(o.a.mark((function a(n,r){var c,l,s;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=r().onboard.web3,!(e=e.toLowerCase()).endsWith(".eth")){a.next=17;break}if(s=Object.values(r().addresses.addressesById).filter((function(t){var a;return(null===t||void 0===t||null===(a=t.ensName)||void 0===a?void 0:a.toLowerCase())===e})),l=s.length?s[0].address:void 0){a.next=15;break}return a.prev=6,a.next=9,I(e,n,c);case 9:l=a.sent,a.next=15;break;case 12:return a.prev=12,a.t0=a.catch(6),a.abrupt("return");case 15:a.next=22;break;case 17:if(l=e,Object.keys(r().addresses.addressesById).includes(e)){a.next=22;break}return a.next=21,O(e,n,c);case 21:l=a.sent;case 22:t&&n(A(l,t));case 23:case"end":return a.stop()}}),a,null,[[6,12]])})));return function(e,t){return a.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a,n){var c,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n().onboard.web3){t.next=4;break}return console.log("Cant set address ".concat(e," - web3 missing!")),t.abrupt("return");case 4:if(!e.endsWith(".eth")){t.next=23;break}return a(h(r.Resolving)),t.prev=6,t.next=9,I(e,a,c);case 9:if((l=t.sent)!==u){t.next=14;break}throw Error("".concat(e," resolved to ").concat(u));case 14:a(E(l)),a(h(r.Valid));case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(6),a(h(r.Invalid));case 21:t.next=26;break;case 23:e=e.toLowerCase(),/^(0x)?[0-9a-f]{40}$/i.test(e)?(O(e,a,c),a(h(r.Valid)),a(E(e))):a(h(r.Invalid));case 26:case"end":return t.stop()}}),t,null,[[6,18]])})));return function(e,a){return t.apply(this,arguments)}}()},S=function(e,t){return function(){var a=Object(l.a)(o.a.mark((function a(n,r){var c,l;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(Object.keys(r().addresses.addressesById).includes(e)){a.next=7;break}return console.log("Got new address from wallet: ".concat(e)),c=r().onboard.web3,a.next=5,O(e,n,c);case 5:a.next=8;break;case 7:console.log("Got known address from wallet: ".concat(e));case 8:n(g(e)),(l=r().addresses.prevWalletAddressId)&&l!==e&&(console.log("setWalletAddressThunk: redirecting to new wallet address ".concat(e)),n(A(e,t)));case 11:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}},40:function(e,t,a){"use strict";a.d(t,"e",(function(){return h})),a.d(t,"d",(function(){return g})),a.d(t,"h",(function(){return y})),a.d(t,"g",(function(){return k})),a.d(t,"c",(function(){return A})),a.d(t,"f",(function(){return C})),a.d(t,"b",(function(){return x}));var n=a(8),r=a.n(n),c=a(33),o=a(36),l=a(494),s=a(282),i=a.n(s),d=a(37),u={name:"imToken",svg:'\n<svg\n        xmlns:dc="http://purl.org/dc/elements/1.1/"\n        xmlns:cc="http://creativecommons.org/ns#"\n        xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n        xmlns:svg="http://www.w3.org/2000/svg"\n        xmlns="http://www.w3.org/2000/svg"\n        xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n        xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n        version="1.1"\n        id="\u56fe\u5c42_1"\n        x="0px"\n        y="0px"\n        viewBox="0 0 769.56256 772.01001"\n        xml:space="preserve"\n        sodipodi:docname="imToken-onlyLogo_noMargin.svg"\n        width="769.56256"\n        height="772.01001"\n        inkscape:version="0.92.4 5da689c313, 2019-01-14"><metadata\n   id="metadata18"><rdf:RDF><cc:Work\n       rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type\n        rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs\n        id="defs16" /><sodipodi:namedview\n        pagecolor="#ffffff"\n        bordercolor="#666666"\n        borderopacity="1"\n        objecttolerance="10"\n        gridtolerance="10"\n        guidetolerance="10"\n        inkscape:pageopacity="0"\n        inkscape:pageshadow="2"\n        inkscape:window-width="1839"\n        inkscape:window-height="1125"\n        id="namedview14"\n        showgrid="false"\n        inkscape:zoom="0.30729167"\n        inkscape:cx="445.85836"\n        inkscape:cy="390.87393"\n        inkscape:window-x="1872"\n        inkscape:window-y="467"\n        inkscape:window-maximized="0"\n        inkscape:current-layer="\u56fe\u5c42_1" />\n    <style\n            type="text/css"\n            id="style2">\n\t.st0{fill:url(#path-1-copy-7_1_);}\n\t.st1{fill:#FFFFFF;}\n</style>\n    <g\n            id="Group"\n            transform="matrix(4.0738988,0,0,4.0738988,-1436.4536,-1166.3541)">\n\t<g\n            id="icon_imTokenLogo">\n\n\t\t\t<linearGradient\n                    id="path-1-copy-7_1_"\n                    gradientUnits="userSpaceOnUse"\n                    x1="-229.26199"\n                    y1="763.88239"\n                    x2="-230.62849"\n                    y2="762.52502"\n                    gradientTransform="matrix(134.3987,0,0,-134.8504,31348.697,103302.03)">\n\t\t\t<stop\n                    offset="0"\n                    style="stop-color:#11C4D1"\n                    id="stop4" />\n                <stop\n                        offset="1"\n                        style="stop-color:#0062AD"\n                        id="stop6" />\n\t\t</linearGradient>\n        <path\n                id="path-1-copy-7"\n                class="st0"\n                d="m 541.5,416.1 c 0,0 0,19.8 -2.1,28.3 -2.1,8.6 -6.1,14.5 -10.4,18.9 -4.4,4.4 -10.2,8.4 -19,10.5 -8.9,2.1 -28.1,2 -28.1,2 h -69.8 c 0,0 -19.7,0 -28.2,-2.1 -8.5,-2.2 -14.5,-6.1 -18.9,-10.5 -4.4,-4.4 -8.4,-10.2 -10.4,-19.1 -2.1,-8.9 -2,-28.1 -2,-28.1 v -70 c 0,0 0,-19.8 2.1,-28.3 2.1,-8.6 6.1,-14.5 10.4,-18.9 4.4,-4.4 10.2,-8.4 19,-10.5 8.9,-2.1 28.1,-2 28.1,-2 H 482 c 0,0 19.7,0 28.2,2.1 8.5,2.2 14.5,6.1 18.9,10.5 4.4,4.4 8.4,10.2 10.4,19.1 2,8.9 2,28.1 2,28.1 z"\n                style="fill:url(#path-1-copy-7_1_)"\n                inkscape:connector-curvature="0" />\n        <path\n                id="Combined-Shape"\n                class="st1"\n                d="m 511.9,344.2 c 3.9,53.9 -31.9,79.5 -64,82.3 -29.8,2.6 -57.8,-15 -60.2,-42.3 -2,-22.5 12.4,-32.2 23.7,-33.1 11.6,-1 21.3,6.7 22.2,16.1 0.8,9 -5,13.2 -9.1,13.5 -3.2,0.3 -7.2,-1.6 -7.6,-5.6 -0.3,-3.5 1.1,-3.9 0.7,-7.6 -0.6,-6.6 -6.5,-7.3 -9.7,-7 -3.9,0.3 -11,4.8 -10.1,15.8 1,11.1 12,19.9 26.4,18.6 15.6,-1.4 26.5,-13.1 27.3,-29.6 0,-0.9 0.2,-1.7 0.6,-2.5 0,0 0,0 0,0 0.2,-0.3 0.3,-0.6 0.6,-0.9 0,0 0,0 0,0 0.4,-0.6 0.8,-1.1 1.3,-1.6 0,0 0,0 0,0 0.4,-0.4 0.9,-0.9 1.4,-1.4 6.8,-6.2 31.4,-21 54.5,-16.4 0.2,0 0.4,0.1 0.5,0.2 0.9,0 1.4,0.7 1.5,1.5"\n                inkscape:connector-curvature="0"\n                style="fill:#ffffff" />\n\t</g>\n</g>\n</svg>\n',wallet:function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c,o,l,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.createModernProviderInterface,o=window,l=o.ethereum,s=null===(a=o.web3)||void 0===a||null===(n=a.currentProvider)||void 0===n?void 0:n.isImToken,e.abrupt("return",{provider:l,interface:s?c(l):null});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),link:"https://token.im/",mobile:!0,desktop:!0},m=a(160),p=m.a.infura[1],f=m.a.onboard[1],b=[{walletName:"metamask",preferred:!0},{walletName:"coinbase",preferred:!0},{walletName:"walletConnect",infuraKey:p.apikey,preferred:!0},{walletName:"trust"},{walletName:"dapper"},{walletName:"authereum",preferred:!0},{walletName:"opera",preferred:!0},{walletName:"operaTouch"},{walletName:"torus"},{walletName:"unilogin",preferred:!0},{walletName:"status"},{walletName:"ledger",rpcUrl:"".concat(p.endpoint).concat(p.apikey),preferred:!0},{walletName:"trezor",appUrl:"https://tac.dappstar.io",email:"michael@m-bauer.org",rpcUrl:"".concat(p.endpoint).concat(p.apikey),preferred:!0},u],w={networkId:0,requiredNetworkId:1,onboardAPI:null,wallet:void 0},v=Object(o.b)({name:"onboard",initialState:w,reducers:{setOnboardAPI:function(e,t){e.onboardAPI=t.payload},setWallet:function(e,t){e.wallet=t.payload},setWeb3Instance:function(e,t){e.web3=t.payload},setNetworkId:function(e,t){e.networkId=t.payload},setRequiredNetworkId:function(e,t){e.requiredNetworkId=t.payload}}}),E=v.actions,h=E.setOnboardAPI,g=E.setNetworkId,y=E.setWeb3Instance,k=E.setWallet,I=E.setRequiredNetworkId,O=(t.a=v.reducer,function(){return function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("checking wallet..."),!(n=a().onboard.onboardAPI)){e.next=9;break}return e.next=5,n.walletCheck();case 5:c=e.sent,console.log("walletCheck result: ".concat(c)),e.next=10;break;case 9:console.log("dispatched checkWallet() without initialization...");case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}),A=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Selecting wallet..."),!(c=n().onboard.onboardAPI)){t.next=9;break}return t.next=5,c.walletSelect();case 5:t.sent?a(O()):(null===(o=c.getState().wallet)||void 0===o?void 0:o.name)||(console.log("No wallet selected."),e.push("/")),t.next=10;break;case 9:console.log("dispatched selectWallet() without initialization...");case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},C=function(e){return function(t,a){t(I(e));var n=a().onboard.onboardAPI;n&&(n.config({networkId:e}),t(O()))}},x=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=n().onboard.requiredNetworkId,console.log("Initializing OnBoard.js for networkId ".concat(c,"...")),o=Object(l.a)({dappId:f.apikey,networkId:c,subscriptions:{wallet:function(e){a(k(e)),a(y(new i.a(e.provider)))},address:function(t){t?(console.log("Wallet address changed to ".concat(t,"!")),a(Object(d.h)(t.toLowerCase(),e))):console.log("No access to wallet address")},network:function(e){var t=n().onboard.networkId;0!==t&&t!==e&&console.log("Switching network from ".concat(t," to ").concat(e)),a(C(e)),a(g(e))},balance:function(){}},walletSelect:{heading:"",description:"",wallets:b}}),a(h(o));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},45:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return s}));var n,r=a(36);!function(e){e[e.INITIAL=0]="INITIAL",e[e.SUBMITTED=1]="SUBMITTED",e[e.CONFIRMED=2]="CONFIRMED",e[e.FAILED=3]="FAILED"}(n||(n={}));var c=Object(r.b)({name:"transactionTracker",initialState:{transactionsById:{}},reducers:{addTransaction:function(e,t){var a=t.payload;e.transactionsById[a.transactionId]=a},updateTransaction:function(e,t){var a=t.payload,n=a.transactionId,r=a.transactionState,c=a.error,o=a.transactionHash;r&&(e.transactionsById[n].transactionState=r),c&&(e.transactionsById[n].error=c),o&&(e.transactionsById[n].transactionHash=o)}}}),o=c.actions,l=o.addTransaction,s=o.updateTransaction;t.c=c.reducer},523:function(e,t,a){e.exports=a.p+"static/media/gitcoinIcon.2c2a98ad.png"},524:function(e){e.exports=JSON.parse('{"name":"token-allowance-checker","version":"2.6.1","private":true,"homepage":"https://tac.dappstar.io","repository":"github:TripleSpeeder/token-allowance-checker","husky":{"hooks":{"pre-commit":"lint-staged","commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"lint-staged":{"src/**/*.{ts,tsx}":["./node_modules/.bin/eslint --max-warnings 0 --fix","./node_modules/.bin/prettier --write"]},"scripts":{"start":"react-scripts start","start:https":"HTTPS=true react-scripts start","typechain":"typechain --target truffle --outDir src/contracts ./node_modules/@openzeppelin/contracts/build/contracts/ERC20Detailed.json","build":"PUBLIC_URL=\'.\' react-scripts build","test":"react-scripts test","eject":"react-scripts eject","storybook":"start-storybook -p 9009 -s public","build-storybook":"build-storybook -s public","release":"standard-version","lint":"./node_modules/.bin/eslint --max-warnings 0 . --ext .ts,.tsx","lint:fix":"./node_modules/.bin/eslint --max-warnings 0 . --ext .ts,.tsx --fix","prettier":"./node_modules/.bin/prettier --check \\"src/**/*.ts{,x}\\"","prettier:write":"./node_modules/.bin/prettier --write \\"src/**/*.ts{,x}\\""},"dependencies":{"@dfuse/client":"^0.3.8","@openzeppelin/contracts":"^2.5.0","@reduxjs/toolkit":"^1.3.4","@triplespeeder/bn2string":"^1.0.0","@truffle/contract":"^4.1.15","@typechain/truffle-v5":"^0.9.0","@types/bn.js":"^4.11.6","@types/lodash":"^4.14.149","@types/node":"^13.11.0","@types/react":"^16.9.32","@types/react-dom":"^16.9.6","@types/react-redux":"^7.1.7","@types/react-router":"^5.1.5","@types/react-router-dom":"^5.1.3","@types/uuid":"^7.0.2","bn.js":"^5.1.1","bnc-onboard":"^1.7.3","eth-ens-namehash":"^2.0.8","human-standard-token-abi":"^2.0.0","lodash":"^4.17.15","react":"^16.13.1","react-dom":"^16.13.1","react-redux":"^7.2.0","react-router-dom":"^5.1.2","react-scripts":"3.4.1","semantic-ui-css":"^2.4.1","semantic-ui-react":"^0.88.2","truffle-typings":"^1.0.8","typechain":"^1.0.5","typechain-target-truffle":"^1.0.2","typescript":"^3.8.3","uuid":"^7.0.3","web3":"^1.2.6","webpack":"4.42.0"},"devDependencies":{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","@semantic-release/changelog":"^5.0.1","@semantic-release/git":"^9.0.0","@storybook/addon-actions":"^5.3.18","@storybook/addon-knobs":"^5.3.18","@storybook/addon-links":"^5.3.18","@storybook/addon-viewport":"^5.3.18","@storybook/addons":"^5.3.18","@storybook/preset-create-react-app":"^2.1.1","@storybook/react":"^5.3.18","@testing-library/jest-dom":"^5.3.0","@testing-library/react":"^10.0.2","@testing-library/user-event":"^10.0.1","@types/jest":"^25.2.1","@typescript-eslint/eslint-plugin":"^2.26.0","@typescript-eslint/parser":"^2.26.0","eslint":"^6.8.0","eslint-config-airbnb":"^18.1.0","eslint-config-airbnb-typescript":"^7.2.0","eslint-config-prettier":"^6.10.1","eslint-plugin-import":"^2.20.2","eslint-plugin-jsx-a11y":"^6.2.3","eslint-plugin-prettier":"^3.1.2","eslint-plugin-react":"^7.19.0","eslint-plugin-react-hooks":"^3.0.0","husky":"^4.2.3","lint-staged":"^10.1.2","prettier":"^2.0.3","semantic-release":"^17.0.4","standard-version":"^7.1.0"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},542:function(e,t,a){e.exports=a(1095)},560:function(e,t){},579:function(e,t){},581:function(e,t){},647:function(e,t){},649:function(e,t){},650:function(e,t){},656:function(e,t){},658:function(e,t){},676:function(e,t){},679:function(e,t){},695:function(e,t){},698:function(e,t){},714:function(e,t){},715:function(e,t){},717:function(e,t){},768:function(e,t){},834:function(e,t){},841:function(e,t){},858:function(e,t){},870:function(e,t){},873:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=873},879:function(e,t){},88:function(e,t,a){"use strict";a.d(t,"a",(function(){return v})),a.d(t,"b",(function(){return E})),a.d(t,"d",(function(){return h}));var n=a(8),r=a.n(n),c=a(33),o=a(131),l=a(36),s=a(1097),i={1:{"0x89d24a6b4ccb1b6faa2625fe562bdd9a23260359":{name:"Sai Stablecoin",symbol:"SAI"},"0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2":{name:"Maker Token",symbol:"MKR"},"0xecf8f87f810ecf450940c9f60066b4a7a501d6a7":{name:"Old Wrapped Ether",symbol:"WETH"},"0xc66ea802717bfb9833400264dd12c2bceaa34a6d":{name:"Old Maker Token",symbol:"MKR"},"0xbb9bc244d798123fde783fcc1c72d3bb8c189413":{name:"TheDAO Token",symbol:"TheDAO"},"0x86fa049857e0209aa7d9e616f7eb3b3b78ecfdb0":{name:"EOS: Old Token",symbol:"EOS"}},3:{}},d=a(37),u=a(28),m=a(45),p=a(35),f=a.n(p),b=a(40),w=Object(l.b)({name:"tokenContracts",initialState:{contractsById:{}},reducers:{addContract:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.tokenContract;e.contractsById[n]=r},prepare:function(e,t,a,n,r,c){return{payload:{id:e,tokenContract:{addressId:e,name:t,symbol:a,decimals:n,totalSupply:r,contractInstance:c}}}}}},extraReducers:Object(o.a)({},b.d.type,(function(e,t){var a=t.payload;console.log("Clearing token contracts due to network change to ".concat(a)),e.contractsById={}}))}),v=w.actions.addContract,E=(t.c=w.reducer,function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,o,l,s,u,m;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n().onboard.networkId,o=e.address.toLowerCase(),l="",s="",!Object.keys(i[c]).includes(o)){t.next=9;break}l=i[c][o].name,s=i[c][o].symbol,t.next=21;break;case 9:return t.prev=9,t.next=12,e.name();case 12:return l=t.sent,t.next=15,e.symbol();case 15:s=t.sent,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(9),console.log("Failed to get name/symbol of contract at ".concat(o,". Please raise\n                an issue to add this token at https://github.com/TripleSpeeder/token-allowance-checker/issues!"));case 21:return u=new f.a("0"),t.prev=22,t.next=25,e.decimals();case 25:u=t.sent,t.next=31;break;case 28:t.prev=28,t.t1=t.catch(22),console.log("Contract at ".concat(o," does not provide decimals(). Assuming 0."));case 31:return t.prev=31,t.next=34,e.totalSupply();case 34:m=t.sent,t.next=41;break;case 37:return t.prev=37,t.t2=t.catch(31),console.log("Failed to call totalSupply() at ".concat(o,". Ignoring contract.")),t.abrupt("return");case 41:a(Object(d.c)(o)),a(v(o,l,s,u,m,e));case 43:case"end":return t.stop()}}),t,null,[[9,18],[22,28],[31,37]])})));return function(e,a){return t.apply(this,arguments)}}()}),h=function(e,t,a,n){return function(){var o=Object(c.a)(r.a.mark((function c(o,l){var i,d,p,f;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Setting new allowance ".concat(a.toString()," for tokenContractId ").concat(e)),i=l().tokenContracts.contractsById[e].contractInstance,d=l().addresses.walletAddressId,p=Object(s.a)(),o(Object(m.b)({transactionId:p,allowanceId:n,transactionState:m.a.SUBMITTED})),r.prev=5,r.next=8,i.approve(t,a.toString(),{from:d});case 8:f=r.sent,console.log("transaction confirmed: ".concat(f.tx,". Reloading allowance.")),o(Object(m.d)({transactionId:p,transactionState:m.a.CONFIRMED,transactionHash:f.tx})),o(Object(u.c)(n)),r.next=18;break;case 14:r.prev=14,r.t0=r.catch(5),console.log("Error while approving: ".concat(r.t0.message)),o(Object(m.d)({transactionId:p,transactionState:m.a.FAILED,error:r.t0.message}));case 18:case"end":return r.stop()}}),c,null,[[5,14]])})));return function(e,t){return o.apply(this,arguments)}}()}},89:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"b",(function(){return w}));var n=a(8),r=a.n(n),c=a(33),o=a(36),l=a(28),s=a(35),i=a.n(s),d=Object(o.b)({name:"balances",initialState:{balancesById:{}},reducers:{addBalance:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.balance;e.balancesById[n]=r},prepare:function(e,t,a){return{payload:{id:e,balance:{id:e,addressId:t,tokenContractId:a,queryState:l.a.QUERY_STATE_INITIAL,value:new i.a("-1")}}}}},setBalanceValue:function(e,t){var a=t.payload,n=a.id,r=a.value;e.balancesById[n].value=r},setBalanceQuerystate:function(e,t){var a=t.payload,n=a.id,r=a.queryState;e.balancesById[n].queryState=r}}}),u=function(e,t){return"".concat(e,"-").concat(t)},m=d.actions,p=m.addBalance,f=m.setBalanceValue,b=m.setBalanceQuerystate,w=function(e,t){return function(){var a=Object(c.a)(r.a.mark((function a(n,c){var o,s,i,d;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=u(e,t),n(p(o,e,t)),n(b({id:o,queryState:l.a.QUERY_STATE_RUNNING})),s=c().tokenContracts.contractsById[t],i=c().addresses.addressesById[e],a.prev=5,a.next=8,s.contractInstance.balanceOf(i.address);case 8:d=a.sent,n(f({id:o,value:d})),n(b({id:o,queryState:l.a.QUERY_STATE_COMPLETE})),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(5),console.log("Error getting balance: ".concat(a.t0)),n(b({id:o,queryState:l.a.QUERY_STATE_ERROR}));case 17:case"end":return a.stop()}}),a,null,[[5,13]])})));return function(e,t){return a.apply(this,arguments)}}()};t.d=d.reducer},905:function(e,t){},918:function(e,t,a){},919:function(e,t,a){}},[[542,4,5]]]);
//# sourceMappingURL=main.8335872c.chunk.js.map