(this.webpackJsonpTAC=this.webpackJsonpTAC||[]).push([[0],{1021:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(90),l=a.n(c),o=(a(493),a(494),a(70)),s=a(74),i=a(8),u=a.n(i),m=a(33),d=a(17),p=a(471),b=a(446),f=a(255),E=a.n(f),h=a(1063),g=a(1059),w=a(60),v=Object(n.createContext)({onboard:null,web3:null,address:null,networkId:null,loggedIn:!1,loginFunction:null}),k=function(e){var t=Object(n.useState)(),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(),s=Object(d.a)(o,2),i=s[0],p=s[1],f=Object(n.useState)(),k=Object(d.a)(f,2),y=k[0],O=k[1],x=Object(n.useState)(),j=Object(d.a)(x,2),S=j[0],C=j[1],A=Object(n.useState)(!1),z=Object(d.a)(A,2),N=z[0],T=z[1],I=Object(n.useState)(!1),F=Object(d.a)(I,2),D=F[0],H=F[1],B=[{walletName:"metamask",preferred:!0},{walletName:"coinbase",preferred:!0},{walletName:"walletConnect",infuraKey:"7f230a5ca832426796454c28577d93f2",preferred:!0},{walletName:"trust",preferred:!0},{walletName:"dapper",preferred:!0},{walletName:"authereum",preferred:!0},{walletName:"opera"},{walletName:"status"},{walletName:"operaTouch"},{walletName:"torus"},{walletName:"status"}];Object(n.useEffect)((function(){console.log("Initializing OnBoard.js...");var e=Object(b.a)({dappId:"f4b71bf0-fe50-4eeb-bc2b-b323527ed9e6",networkId:1,subscriptions:{wallet:function(e){console.log("".concat(e.name," is now connected!")),l(new E.a(e.provider))},address:function(e){p(e),console.log("Address changed to ".concat(e,"!"))},network:function(e){O(e),console.log("NetworkId change to ".concat(e))}},walletSelect:{wallets:B}});C(e)}),[]);var L=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=14;break}if(D){e.next=10;break}return console.log("Selecting wallet..."),e.next=5,S.walletSelect();case 5:return t=e.sent,H(t),e.abrupt("return",t);case 10:return console.log("Wallet already selected."),e.abrupt("return",!0);case 12:e.next=16;break;case 14:return console.log("Trying select wallet without onboard"),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=20;break}if(D){e.next=7;break}return e.next=4,L();case 4:if(e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:if(N){e.next=16;break}return console.log("logging in"),e.next=11,S.walletCheck();case 11:return t=e.sent,T(t),e.abrupt("return",t);case 16:return console.log("already logged in"),e.abrupt("return",!0);case 18:e.next=22;break;case 20:return console.log("Trying login without onboard"),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q={onboard:S,web3:c,address:i,networkId:y,loginFunction:_,selectFunction:L};return S?r.a.createElement(v.Provider,{value:q},e.children):(console.log("Onboard not yet initialized!"),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{basic:!0,padded:"very",textAlign:"center"},r.a.createElement(g.a,{info:!0,icon:!0,size:"huge"},r.a.createElement(w.a,{name:"spinner",loading:!0}),r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,null,"Initializing web3"),"Please wait while initializing web3 connection.")))))},y=a(449),O=a(1050),x=a(1058),j=a(1056),S=a(1022),C=a(1061),A=a(450),z=a.n(A),N=function(e){var t=e.address,a=e.ensName,n=z()(),c=Object(d.a)(n,2)[1];return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,a),r.a.createElement("div",null,r.a.createElement("small",null,t,"\xa0",r.a.createElement(j.a,{mouseEnterDelay:500,content:"Copy to clipboard",trigger:r.a.createElement(w.a,{circular:!0,name:"copy outline",size:"small",onClick:function(){c(t)}})}),r.a.createElement(j.a,{mouseEnterDelay:500,content:"View on Etherscan",trigger:r.a.createElement(w.a,{circular:!0,name:"external square",size:"small",onClick:function(){window.open("https://etherscan.io/address/".concat(t),"_blank")}})})))):r.a.createElement("div",null,t,"\xa0",r.a.createElement(j.a,{mouseEnterDelay:500,content:"Copy to clipboard",trigger:r.a.createElement(w.a,{circular:!0,name:"copy outline",size:"small",onClick:function(){c(t)}})}),r.a.createElement(j.a,{mouseEnterDelay:500,content:"View on Etherscan",trigger:r.a.createElement(w.a,{circular:!0,name:"external square",size:"small",onClick:function(){window.open("https://etherscan.io/address/".concat(t),"_blank")}})}))},T=a(50),I=a.n(T),F=a(141),D=a.n(F);function H(e,t,a){if(!("string"===typeof(n=e)||n instanceof String))throw new Error("Pass strings to prevent floating point precision issues.");var n,r=new a(10).pow(new a(t)),c="-"===e.substring(0,1);if(c&&(e=e.substring(1)),"."===e)throw new Error("Invalid value ".concat(e," cannot be converted to")+" base unit with ".concat(t," decimals."));var l=e.split(".");if(l.length>2)throw new Error("Too many decimal points");var o=l[0],s=l[1];if(o||(o="0"),s||(s="0"),s.length>t)throw new Error("Too many decimal places");for(;s.length<t;)s+="0";o=new a(o),s=new a(s);var i=o.mul(r).add(s);return c&&(i=i.neg()),new a(i.toString(10),10)}var B=a(1054),L=a(1053),_=a(1049),q=a(1062),R=function(e){var t=e.showModal,a=e.tokenName,n=e.tokenAddress,c=e.spenderAddress,l=e.currentAllowance,o=e.newAllowance,s=e.handleClose,i=e.handleSubmit,u=e.handleChange,m=a;return""===m&&(m="Unknown ERC20 at ".concat(n)),r.a.createElement(B.a,{open:t,size:"small",onClose:s},r.a.createElement(C.a,null,"Edit Allowance"),r.a.createElement(B.a.Content,null,r.a.createElement(g.a,{size:"huge"},r.a.createElement(g.a.List,null,r.a.createElement(g.a.Item,null,"Token: ",m),r.a.createElement(g.a.Item,null,"Spender: ",c),r.a.createElement(g.a.Item,null,"Current allowance: ",l))),r.a.createElement(L.a,{size:"huge",onSubmit:i},r.a.createElement(L.a.Field,{required:!0},r.a.createElement(_.a,{label:{tag:!0,content:"Set new allowance"},labelPosition:"right",placeholder:"Enter amount",type:"number",name:"newAllowance",onChange:u,value:o})),r.a.createElement(q.a,{columns:2},r.a.createElement(q.a.Row,null,r.a.createElement(q.a.Column,null,r.a.createElement(L.a.Button,{type:"button",fluid:!0,size:"huge",negative:!0,onClick:s},"Cancel")),r.a.createElement(q.a.Column,null,r.a.createElement(L.a.Button,{type:"submit",fluid:!0,size:"huge",positive:!0},"Okay")))))))},M=function(e){var t=e.handleSubmit,a=e.handleClose,c=e.tokenDecimals,l=e.tokenSupply,o=e.tokenName,s=e.allowance,i=e.spender,u=e.tokenSymbol,m=e.tokenAddress,p=Object(n.useContext)(v),b=Object(n.useState)(""),f=Object(d.a)(b,2),E=f[0],h=f[1],g=Object(n.useCallback)((function(){return s.gte(l)?"unlimited":D()({value:s,decimals:c,roundToDecimals:p.web3.utils.toBN(2)}).rounded}),[s,c,l,p]);return r.a.createElement(R,{currentAllowance:g(),handleClose:a,spenderAddress:i,showModal:!0,tokenName:o,handleChange:function(e,t){var a=t.name,n=t.value;console.log("handleChange: ".concat(a," - ").concat(n)),parseFloat(n)<0&&(n="0"),h(n)},handleSubmit:function(){var e=H(E,c,p.web3.utils.BN);t(e)},tokenSymbol:u,tokenAddress:m,newAllowance:E})},P=function(e){var t,a=e.showModal,n=e.isConfirming,c=e.transactionHash,l=e.error,o=e.handleClose;return l?t=r.a.createElement(g.a,{error:!0,icon:!0},r.a.createElement(w.a,{name:"exclamation triangle"}),r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,null,"Error"),l)):c?t=r.a.createElement(g.a,{success:!0,icon:!0},r.a.createElement(w.a,{name:"checkmark"}),r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,null,"Allowance changed"),r.a.createElement("p",null,"The new allowance is now set."),r.a.createElement("p",null,"Transaction Hash: ",c))):n&&(t=r.a.createElement(g.a,{icon:!0,info:!0},r.a.createElement(w.a,{name:"spinner",loading:!0}),r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,null,"Waiting for confirmation"),"Transaction is being processed..."))),r.a.createElement(B.a,{open:a,size:"small",onClose:o},r.a.createElement(B.a.Content,null,t),!n&&r.a.createElement(B.a.Actions,null,r.a.createElement(S.a,{onClick:o},"Dismiss")))},U=new I.a(2).pow(new I.a(256)).subn(1),$=function(e){var t=e.tokenName,a=e.tokenAddress,c=e.tokenDecimals,l=e.tokenSupply,o=e.tokenSymbol,s=e.tokenContractInstance,i=e.ownerBalance,p=e.owner,b=e.spenders,f=e.spenderENSNames,E=e.allowances,g=Object(n.useContext)(v),w=Object(n.useState)(""),k=Object(d.a)(w,2),y=k[0],A=k[1],z=Object(n.useState)(!1),T=Object(d.a)(z,2),F=T[0],H=T[1],B=Object(n.useState)(!1),L=Object(d.a)(B,2),_=L[0],q=L[1],R=Object(n.useState)(""),$=Object(d.a)(R,2),W=$[0],G=$[1],J=Object(n.useState)(""),K=Object(d.a)(J,2),V=K[0],Q=K[1],Y=Object(n.useState)(!1),X=Object(d.a)(Y,2),Z=X[0],ee=X[1],te=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.loginFunction();case 2:if(e.sent){e.next=8;break}return console.log("User failed to login. Cant create transaction."),e.abrupt("return");case 8:console.log("User successfully logged into wallet");case 9:return console.log("Setting new allowance ".concat(t," for ").concat(y)),G(""),Q(""),H(!1),q(!0),ee(!0),e.prev=15,e.next=18,s.approve(y,t.toString(),{from:g.address});case 18:a=e.sent,Q(a.tx),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(15),console.log("Error while approving: ".concat(e.t0.message)),G(e.t0.message);case 26:ee(!1);case 27:case"end":return e.stop()}}),e,null,[[15,22]])})));return function(t){return e.apply(this,arguments)}}(),ae=[],ne=!0,re=!1,ce=void 0;try{for(var le,oe=function(){var e=le.value,t=void 0,a=!1,n=!1;if(I.a.isBN(E[e])&&I.a.isBN(c)&&I.a.isBN(l)){var o=E[e];if(n=p.toLowerCase()===g.address.toLowerCase(),a=o.eq(U)||o.gte(l))t=r.a.createElement("em",null,"unlimited");else{var s=c,i=new I.a(2),u=D()({value:o,decimals:s,roundToDecimals:i}).rounded;t="".concat(u)}}else t=r.a.createElement(O.a,{active:!0,inline:!0,size:"mini"});ae.push(r.a.createElement(x.a.Row,{key:e},r.a.createElement(x.a.Cell,null,r.a.createElement(N,{address:e,ensName:f[e]})),r.a.createElement(x.a.Cell,{negative:a},t),r.a.createElement(x.a.Cell,null,r.a.createElement(j.a,{content:n?"edit allowance":"Only address owner can edit allowance",trigger:r.a.createElement("span",null,r.a.createElement(S.a,{icon:"edit",size:"small",compact:!0,primary:!0,disabled:!n,onClick:function(){!function(e){A(e),H(!0)}(e)}}))}))))},se=b[Symbol.iterator]();!(ne=(le=se.next()).done);ne=!0)oe()}catch(pe){re=!0,ce=pe}finally{try{ne||null==se.return||se.return()}finally{if(re)throw ce}}var ie=t;""===ie&&(ie="Unknown ERC20");var ue=new I.a(2);if(I.a.isBN(i)&&I.a.isBN(c)){var me=D()({value:i,decimals:c,roundToDecimals:ue}).rounded;ie+=" (current balance: ".concat(me,")")}var de=r.a.createElement(N,{address:a,ensName:ie});return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{raised:!0},r.a.createElement(C.a,{as:"h3"},de),r.a.createElement(x.a,{basic:"very",celled:!0,selectable:!0},r.a.createElement(x.a.Header,null,r.a.createElement(x.a.Row,null,r.a.createElement(x.a.HeaderCell,null,"Spender"),r.a.createElement(x.a.HeaderCell,null,"Allowance"),r.a.createElement(x.a.HeaderCell,null,"Action"))),r.a.createElement(x.a.Body,null,ae))),F&&r.a.createElement(M,{spender:y,tokenDecimals:c,allowance:E[y],tokenSymbol:o,tokenName:t,tokenSupply:l,tokenAddress:a,handleSubmit:te,handleClose:function(){H(!1)}}),_&&r.a.createElement(P,{showModal:_,isConfirming:Z,handleClose:function(){q(!1)},error:W,transactionHash:V}))},W={1:{"0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359":{name:"Sai Stablecoin",symbol:"SAI"},"0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2":{name:"Maker Token",symbol:"MKR"},"0xECF8F87f810EcF450940c9f60066b4a7a501d6A7":{name:"Old Wrapped Ether",symbol:"WETH"}}},G=a(877),J=a(82),K=function(e){var t=e.contractAddress,a=e.owner,c=e.spenders,l=Object(n.useContext)(v),o=Object(n.useState)(null),s=Object(d.a)(o,2),i=s[0],p=s[1],b=Object(n.useState)(),f=Object(d.a)(b,2),E=f[0],h=f[1],g=Object(n.useState)(),w=Object(d.a)(g,2),k=w[0],O=w[1],x=Object(n.useState)(""),j=Object(d.a)(x,2),S=j[0],C=j[1],A=Object(n.useState)(""),z=Object(d.a)(A,2),N=z[0],T=z[1],I=Object(n.useState)({}),F=Object(d.a)(I,2),D=F[0],H=F[1],B=Object(n.useState)(!0),L=Object(d.a)(B,2),_=(L[0],L[1]),q=Object(n.useState)({}),R=Object(d.a)(q,2),M=R[0],P=R[1],U=Object(n.useState)(),K=Object(d.a)(U,2),V=K[0],Q=K[1];return Object(n.useEffect)((function(){var e=!1;return function(){var n=Object(m.a)(u.a.mark((function n(){var r,o,s,i,m,d,b,f,E,g,w,v,k,x,j;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return _(!0),(r=G(y)).setProvider(l.web3.currentProvider),n.next=5,r.at(t);case 5:if(o=n.sent,s="",i="",!Object.keys(W[l.networkId]).includes(t)){n.next=13;break}s=W[l.networkId][t].name,i=W[l.networkId][t].symbol,n.next=25;break;case 13:return n.prev=13,n.next=16,o.name();case 16:return s=n.sent,n.next=19,o.symbol();case 19:i=n.sent,n.next=25;break;case 22:n.prev=22,n.t0=n.catch(13),console.warn("Failed to get name/symbol of contract at ".concat(t,". Please raise\n                    an issue to add this token at https://github.com/TripleSpeeder/token-allowance-checker/issues!"));case 25:return n.next=27,o.decimals();case 27:return m=n.sent,n.next=30,o.totalSupply();case 30:return d=n.sent,n.next=33,o.balanceOf(a);case 33:if(b=n.sent,!e){n.next=36;break}return n.abrupt("return");case 36:p(o),h(m),O(d),Q(b),C(s),T(i),f={},E=!0,g=!1,w=void 0,n.prev=46,v=c[Symbol.iterator]();case 48:if(E=(k=v.next()).done){n.next=59;break}return x=k.value,n.next=52,o.allowance(a,x);case 52:if(j=n.sent,!e){n.next=55;break}return n.abrupt("return");case 55:f[x]=j;case 56:E=!0,n.next=48;break;case 59:n.next=65;break;case 61:n.prev=61,n.t1=n.catch(46),g=!0,w=n.t1;case 65:n.prev=65,n.prev=66,E||null==v.return||v.return();case 68:if(n.prev=68,!g){n.next=71;break}throw w;case 71:return n.finish(68);case 72:return n.finish(65);case 73:H(f),_(!1);case 75:case"end":return n.stop()}}),n,null,[[13,22],[46,61,65,73],[66,,68,72]])})));return function(){return n.apply(this,arguments)}}()(),function(){e=!0}}),[l.web3,l.networkId,t,a,c]),Object(n.useEffect)((function(){var e=!1,t=function(){var t=Object(m.a)(u.a.mark((function t(a){var n,r,l,o,s,i,m,d,p,b,f;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={},r=!0,l=!1,o=void 0,t.prev=4,s=c[Symbol.iterator]();case 6:if(r=(i=s.next()).done){t.next=26;break}return m=i.value,t.prev=8,d=m.toLowerCase().substr(2)+".addr.reverse",t.next=12,a.eth.ens.resolver(d);case 12:return p=t.sent,b=J.hash(d),t.next=16,p.methods.name(b).call();case 16:f=t.sent,n[m]=f,t.next=23;break;case 20:t.prev=20,t.t0=t.catch(8),console.log("No reverse name found for ".concat(m));case 23:r=!0,t.next=6;break;case 26:t.next=32;break;case 28:t.prev=28,t.t1=t.catch(4),l=!0,o=t.t1;case 32:t.prev=32,t.prev=33,r||null==s.return||s.return();case 35:if(t.prev=35,!l){t.next=38;break}throw o;case 38:return t.finish(35);case 39:return t.finish(32);case 40:if(!e){t.next=42;break}return t.abrupt("return");case 42:P(n);case 43:case"end":return t.stop()}}),t,null,[[4,28,32,40],[8,20],[33,,35,39]])})));return function(e){return t.apply(this,arguments)}}();return l.web3&&t(l.web3),function(){e=!0}}),[l.web3,c]),r.a.createElement(r.a.Fragment,null,r.a.createElement($,{tokenName:S,tokenAddress:t,tokenDecimals:E,tokenSupply:k,tokenSymbol:N,owner:a,ownerBalance:V,spenders:c,spenderENSNames:M,allowances:D,tokenContractInstance:i}))},V=(a(1010),"0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925"),Q=[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],Y=Object(p.createDfuseClient)({apiKey:"server_217e99c3f906df80430c3c5f4366c8d0",network:"mainnet.eth.dfuse.io"}),X=function(){var e=Object(n.useContext)(v),t=Object(s.g)().address,a=Object(n.useState)(!1),c=Object(d.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)({}),p=Object(d.a)(i,2),b=p[0],f=p[1],E=Object(n.useState)(""),k=Object(d.a)(E,2),y=k[0],O=k[1],x=Object(n.useState)(t?t.toLowerCase():""),j=Object(d.a)(x,2),S=j[0],C=j[1];if(Object(n.useEffect)((function(){C(t?t.toLowerCase():"")}),[t]),Object(n.useEffect)((function(){document.title="TAC - ".concat(S)}),[S]),Object(n.useEffect)((function(){var t=!1,a=function(){var a=Object(m.a)(u.a.mark((function a(){var n,r,c;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(!0),O(""),n={},a.prev=3,a.next=6,Y.graphql("query ($query: String! $limit: Int64!) {\n      searchTransactions(\n        indexName: LOGS, \n        query: $query, \n        limit: $limit, \n        sort: DESC\n      ) {\n        edges {\n          node {\n            block {\n              number\n            }\n            matchingLogs {\n              data\n              topics\n              address\n            }\n          }\n        }\n      }\n    }",{variables:{limit:"10",query:"signer:".concat(S," method:'approve(address,uint256)' topic.0:").concat(V)}});case 6:if(r=a.sent,!t){a.next=10;break}return console.log("Received stale response."),a.abrupt("return");case 10:if(!r.errors){a.next=12;break}throw r.errors;case 12:(c=r.data.searchTransactions.edges||[]).length<=0&&console.log("No Approve() calls found for ".concat(S)),c.forEach((function(t){t.node.matchingLogs.forEach((function(t){if(t.topics[0]===V){var a=e.web3.eth.abi.decodeLog(Q,t.data,t.topics.slice(1));if(a.owner.toLowerCase()===S){var r=t.address;Object.keys(n).includes(r)||(console.log("Adding tokenContract ".concat(r)),n[r]=[]),n[r].includes(a.spender)||(console.log("Adding Spender ".concat(a.spender," for ").concat(r)),n[r].push(a.spender))}else console.log("Skipping log event due to owner mismatch. Expected ".concat(S,", got ").concat(a.owner))}else console.warn("Skipping wrong topic ".concat(t.topics[0]))})),f(n)})),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(3),console.log(a.t0),t||O(JSON.stringify(a.t0));case 21:o(!1);case 22:case"end":return a.stop()}}),a,null,[[3,17]])})));return function(){return a.apply(this,arguments)}}();return f({}),e.web3&&S&&(console.log('Starting query for "'.concat(S,'"')),a(S)),function(){t=!0}}),[e.web3,S]),""===S)return r.a.createElement(h.a,{basic:!0,padded:"very",textAlign:"center"},r.a.createElement(g.a,{info:!0,icon:!0,size:"huge"},r.a.createElement(w.a,{name:"info"}),r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,null,"Enter an address to start!"))));if(l)return r.a.createElement(h.a,{basic:!0,padded:"very",textAlign:"center"},r.a.createElement(g.a,{icon:!0,warning:!0,size:"huge"},r.a.createElement(w.a,{name:"circle notched",loading:!0}),r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,null,"Please wait"),r.a.createElement("p",null,"Checking address: ",S),"Querying dfuse API for ERC20 Approvals...")));if(y)return r.a.createElement(h.a,{basic:!0,padded:"very",textAlign:"center"},r.a.createElement(g.a,{error:!0,icon:!0,size:"huge"},r.a.createElement(w.a,{name:"exclamation triangle"}),r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,null,"Error"),y)));if(0===Object.keys(b).length)return r.a.createElement(h.a,{basic:!0,padded:"very",textAlign:"center"},r.a.createElement(g.a,{success:!0,icon:!0,size:"huge"},r.a.createElement(w.a,{name:"info"}),r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,null,"No Approvals"),"Address ",S," has no Approvals.")));for(var A=[],z=0,N=Object.entries(b);z<N.length;z++){var T=Object(d.a)(N[z],2),I=T[0],F=T[1];A.push(r.a.createElement(K,{key:I,owner:S,spenders:F,contractAddress:I}))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{basic:!0},r.a.createElement("h2",null,S," has these allowances")),A)},Z=function(e){var t=Object(s.f)(),a=Object(n.useContext)(v),c=Object(n.useState)(!0),l=Object(d.a)(c,2),o=l[0],i=l[1],p=Object(n.useState)(!1),b=Object(d.a)(p,2),f=b[0],E=b[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(m.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,a.loginFunction();case 3:(n=e.sent)||t.push("/"),E(n),i(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a.onboard&&e()}),[a.onboard,t]),f&&a.web3?r.a.createElement(r.a.Fragment,null,e.children):o?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{basic:!0,padded:"very",textAlign:"center"},r.a.createElement(g.a,{info:!0,icon:!0,size:"huge"},r.a.createElement(w.a,{name:"spinner",loading:!0}),r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,null,"Waiting for wallet"),"Please complete wallet selection.")))):f?void 0:r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{basic:!0,padded:"very",textAlign:"center"},r.a.createElement(g.a,{warning:!0,icon:!0,size:"huge"},r.a.createElement(w.a,{name:"exclamation triangle"}),r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,null,"No wallet selected"),"You need to select a wallet."))))},ee=a(1060),te=a(1051),ae=a(1052),ne=a(1057),re=function(e){var t=e.handleInput,a=e.loading,n=e.error,c=e.value,l=e.success,o=function(){var e=Object(m.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.target.value,t(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(L.a.Field,{inline:!0,width:14},r.a.createElement(_.a,{placeholder:"Address or ENS Name",error:n,loading:a,onChange:o,value:c,type:"text",action:{type:"Submit",disabled:!l,content:"Go!",positive:!0},label:"Enter address/ENS name or select in wallet"}))},ce="address_initial",le="address_resolving",oe="address_valid",se="address_invalid",ie=function(){var e=Object(n.useContext)(v),t=Object(s.g)().address||"",a=Object(s.f)(),c=Object(n.useState)(ce),l=Object(d.a)(c,2),o=l[0],i=l[1],p=Object(n.useState)(t?t.toLowerCase():""),b=Object(d.a)(p,2),f=b[0],E=b[1],h=Object(n.useState)(""),g=Object(d.a)(h,2),w=g[0],k=g[1],y=Object(n.useState)(e.address?e.address.toLowerCase():""),O=Object(d.a)(y,2),x=O[0],j=O[1];Object(n.useEffect)((function(){(function(){var t=Object(m.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==f.length){t.next=4;break}i(ce),t.next=24;break;case 4:if(a=/^(0x)?[0-9a-f]{40}$/i.test(f),!/.*\.eth$/i.test(f)){t.next=23;break}return i(le),t.prev=8,t.next=11,e.web3.eth.ens.getAddress(f);case 11:n=t.sent,console.log("Resolved ".concat(f," to ").concat(n)),i(oe),k(n),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(8),console.log("Could not resolve "+f),i(se);case 21:t.next=24;break;case 23:a?(k(f),i(oe)):i(se);case 24:case"end":return t.stop()}}),t,null,[[8,17]])})));return function(){return t.apply(this,arguments)}})()()}),[f,k,e.web3]),Object(n.useEffect)((function(){var n=e.address?e.address.toLowerCase():"";""!==n&&(""!==t&&n===x||(E(n),j(n),a.push("/address/".concat(n))))}),[e.address,x,t,a]);var S=o===se,C=o===le,A=o===oe;return r.a.createElement(q.a,{textAlign:"center",centered:!0,columns:1},r.a.createElement(q.a.Row,null,r.a.createElement(q.a.Column,{width:14},r.a.createElement(L.a,{size:"huge",onSubmit:function(){A?(console.log("Submit! Address: ".concat(w)),a.push("/address/".concat(w))):console.log("Submit with invalid address")},error:S,success:A,widths:"equal"},r.a.createElement(L.a.Group,null,r.a.createElement(re,{handleInput:E,value:f,error:S,success:A,loading:C}))))))},ue=function(){var e=r.a.createElement(h.a,{inverted:!1,textAlign:"center",vertical:!0},r.a.createElement(ee.a,{fixed:"top",inverted:!0,size:"huge"},r.a.createElement(te.a,null,r.a.createElement(ee.a.Item,{header:!0,as:o.b,to:"/"},r.a.createElement(w.a,{name:"home",size:"big"})," Home"),r.a.createElement(ee.a.Item,{as:o.b,to:"/address/"},r.a.createElement(w.a,{name:"search",size:"big"})," Check Allowances"),r.a.createElement(ee.a.Menu,{position:"right"},r.a.createElement(ee.a.Item,null,r.a.createElement("a",{href:"https://github.com/TripleSpeeder/token-allowance-checker",title:"github.com/TripleSpeeder/token-allowance-checker",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(w.a,{name:"github",size:"big"})))))),r.a.createElement(te.a,{text:!0,style:{marginTop:"4em",marginBottom:"2em"}},r.a.createElement(C.a,{as:"h1",inverted:!1,style:{fontSize:"3em",marginTop:"0.5em"}},"Token Allowance Checker",r.a.createElement(C.a.Subheader,null,"powered by ",r.a.createElement("a",{href:"https://www.dfuse.io/",rel:"noopener noreferrer",target:"_blank"},"dfuse")))));return r.a.createElement(o.a,null,e,r.a.createElement(k,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{path:["/address/:address","/address"]},r.a.createElement(te.a,null,r.a.createElement(Z,null,r.a.createElement(h.a,{basic:!0,padded:!0},r.a.createElement(ie,null)),r.a.createElement(X,null)))),r.a.createElement(s.a,{path:"/"},r.a.createElement(h.a,{basic:!0,vertical:!0,style:{paddingTop:"4em"}},r.a.createElement(q.a,{container:!0,stackable:!0,verticalAlign:"top"},r.a.createElement(q.a.Row,null,r.a.createElement(q.a.Column,{width:8},r.a.createElement(C.a,{as:"h3",style:{fontSize:"2em"}},"Do you actually know who can spend your tokens?"),r.a.createElement("p",{style:{fontSize:"1.33em"}},r.a.createElement("em",null,"Token Allowance Checker")," helps you keep track of which contracts you have approved to spend your tokens."),r.a.createElement(C.a,{as:"h3",style:{fontSize:"2em"}},"Control your approvals"),r.a.createElement("p",{style:{fontSize:"1.33em"}},r.a.createElement("em",null,"Token Allowance Checker")," will show you all approvals for ERC20-compliant tokens, and the option to change the approved amount - or completely zero it.")),r.a.createElement(q.a.Column,{floated:"right",width:7},r.a.createElement(C.a,{as:"h3",style:{fontSize:"2em"}},"The unlimited approval problem"),r.a.createElement("p",{style:{fontSize:"1.33em"}},"Many DApps have the habit of requiring you to approve effectively unlimited amount of tokens. This helps improving the user experience, as you only have to sign off an approval once and it will be enough for all future transactions."),r.a.createElement("p",{style:{fontSize:"1.33em"}},"However this also means that the DApp (or the person/entity controlling it) can at any time transfer ",r.a.createElement("em",null,"all of your tokens"),", without requiring any further approval."),r.a.createElement("p",{style:{fontSize:"1.33em"}},"In addition, there is no concept of expiring approvals. Once approved, the approval will remain forever. If you do not trust a DApp or its operators anymore, there is usually no easy way to remove the approval."))))),r.a.createElement(h.a,{basic:!0,textAlign:"center"},r.a.createElement(S.a,{as:o.b,to:"/address/",primary:!0,size:"massive"},"Check Allowances",r.a.createElement(w.a,{name:"right arrow"})))))),r.a.createElement(h.a,{basic:!0},r.a.createElement(ae.a,null),r.a.createElement(te.a,{textAlign:"center"},r.a.createElement(ne.a,{horizontal:!0},r.a.createElement(ne.a.Item,{as:"a",href:"https://twitter.com/TripleSpeeder",target:"_blank"},r.a.createElement(j.a,{content:"@triplespeeder",trigger:r.a.createElement(w.a,{size:"big",name:"twitter"})})),r.a.createElement(ne.a.Item,{as:"a",href:"https://t.me/triplespeeder",target:"_blank"},r.a.createElement(j.a,{content:"@triplespeeder",trigger:r.a.createElement(w.a,{size:"big",name:"telegram"})})),r.a.createElement(ne.a.Item,{as:"a",href:"mailto:michael@m-bauer.org"},r.a.createElement(j.a,{content:"michael@m-bauer.org",trigger:r.a.createElement(w.a,{size:"big",name:"mail outline"})})),r.a.createElement(ne.a.Item,{as:"a",href:"https://github.com/TripleSpeeder",target:"_blank"},r.a.createElement(j.a,{content:"github.com/TripleSpeeder",trigger:r.a.createElement(w.a,{size:"big",name:"github"})})),r.a.createElement(ne.a.Item,{as:"a",href:"https://www.reddit.com/u/TripleSpeeder",target:"_blank"},r.a.createElement(j.a,{content:"u/TripleSpeeder",trigger:r.a.createElement(w.a,{size:"big",name:"reddit"})})))),r.a.createElement(te.a,{textAlign:"center"},r.a.createElement("p",{style:{fontSize:"1em",float:"right"}},r.a.createElement(w.a,{name:"copyright outline"})," Michael Bauer"))))};l.a.render(r.a.createElement(ue,null),document.getElementById("root"))},488:function(e,t,a){e.exports=a(1021)},493:function(e,t,a){},494:function(e,t,a){},504:function(e,t){},522:function(e,t){},524:function(e,t){},590:function(e,t){},592:function(e,t){},593:function(e,t){},599:function(e,t){},601:function(e,t){},618:function(e,t){},621:function(e,t){},637:function(e,t){},640:function(e,t){},657:function(e,t){},658:function(e,t){},660:function(e,t){},819:function(e,t){},925:function(e,t){},932:function(e,t){},949:function(e,t){},961:function(e,t){},964:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=964},970:function(e,t){},996:function(e,t){}},[[488,1,2]]]);
//# sourceMappingURL=main.9f697b3b.chunk.js.map