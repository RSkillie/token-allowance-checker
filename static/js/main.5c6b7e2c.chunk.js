(this["webpackJsonptoken-allowance-checker"]=this["webpackJsonptoken-allowance-checker"]||[]).push([[1],{103:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return l}));var n=a(32),r=Object(n.b)({name:"editAllowance",initialState:{showModal:!1,editAllowanceId:""},reducers:{openEditAllowanceModal:function(e,t){var a=t.payload;e.showModal=!0,e.editAllowanceId=a},closeEditAllowanceModal:function(e){e.showModal=!1}}}),c=r.actions,o=c.openEditAllowanceModal,l=c.closeEditAllowanceModal;t.b=r.reducer},1049:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=(a(880),a(82)),o=a(88),l=a(1093),s=a(71),i=a(1098),d=a(1095),u=a(1085),m=a(1099),p=a(1096),f=a(1051),b=a(1086),w=a(1090),E=a(1089),h=a(70),g=(a(881),a(15)),v=a(275),y=a.n(v),I=a(1094),k=a(1091),O=function(e){var t,a,n=e.ethAddress,c=Object(g.c)((function(e){return e.onboard.networkId})),o=n.address,l=n.ensName,i=n.esContractName,d=function(e){navigator.clipboard.writeText(e).then((function(){}),(function(){console.log("failed to set clipboard")}))};switch(l?t="Reverse ENS: ".concat(l):i&&(t="Contract: ".concat(i)),c){case 3:a="https://ropsten.etherscan.io/address/".concat(o);break;case 1:a="https://etherscan.io/address/".concat(o);break;default:a="https://etherscan.io/address/".concat(o)}return t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("strong",null,t)),r.a.createElement("div",null,r.a.createElement("small",null,o,"\xa0",r.a.createElement(E.a,{mouseEnterDelay:500,content:"Copy to clipboard",trigger:r.a.createElement(s.a,{circular:!0,name:"copy outline",size:"small",onClick:function(){d(o)}})}),r.a.createElement(E.a,{mouseEnterDelay:500,content:"View on Etherscan",trigger:r.a.createElement(s.a,{circular:!0,name:"external square",size:"small",onClick:function(){window.open(a,"_blank")}})})))):r.a.createElement("div",null,o,"\xa0",r.a.createElement(E.a,{mouseEnterDelay:500,content:"Copy to clipboard",trigger:r.a.createElement(s.a,{circular:!0,name:"copy outline",size:"small",onClick:function(){d(o)}})}),r.a.createElement(E.a,{mouseEnterDelay:500,content:"View on Etherscan",trigger:r.a.createElement(s.a,{circular:!0,name:"external square",size:"small",onClick:function(){window.open(a,"_blank")}})}))},A=a(29),S=a.n(A),T=a(23),C=a(1082),x=a(128),j=a.n(x),R=a(103),N=a(36),B=function(e){var t,a,n=e.allowanceId,c=Object(g.b)(),o=Object(g.c)((function(e){return e.allowances.allowancesById[n]})),l=Object(g.c)((function(e){return o.editTransactionId?e.transactions.transactionsById[o.editTransactionId]:void 0})),i=Object(g.c)((function(e){return e.addresses.walletAddressId}));if(l){var d,u,m;switch(l.transactionState){case N.a.CONFIRMED:d=r.a.createElement(s.a,{name:"check",size:"large"}),m="Transaction confirmed",u="Transaction hash: ".concat(l.transactionHash);break;case N.a.FAILED:d=r.a.createElement(s.a,{name:"exclamation triangle",color:"red",size:"large"}),m="Transaction failed",u="".concat(l.error);break;case N.a.SUBMITTED:d=r.a.createElement(s.a,{name:"spinner",loading:!0,size:"large"}),m="Transaction created",u="Waiting for confirmation...";break;case N.a.INITIAL:default:d=r.a.createElement(s.a,{name:"question",size:"large"}),m="Transaction unknown",u="Tx state INITIAL"}t=r.a.createElement(E.a,{header:m,content:u,trigger:d})}if((null===l||void 0===l?void 0:l.transactionState)!==N.a.SUBMITTED){var p=o.ownerId===i;a=r.a.createElement(E.a,{content:p?"edit allowance":"Only address owner can edit allowance",trigger:r.a.createElement("span",null,r.a.createElement(f.a,{icon:"edit",size:"small",compact:!0,primary:!0,disabled:!p,onClick:function(e){e.preventDefault(),c(Object(R.c)(n))}}))})}return r.a.createElement(r.a.Fragment,null,a,"\xa0",t)},_=new S.a(2).pow(new S.a(256)).subn(1),U=function(e){var t,a,c=e.allowanceId,o=Object(g.b)(),l=Object(g.c)((function(e){return e.allowances.allowancesById[c]})),s=Object(g.c)((function(e){return e.allowances.allowanceValuesById[c]})),i=Object(g.c)((function(e){return e.tokenContracts.contractsById[l.tokenContractId]})),d=Object(g.c)((function(e){return e.addresses.addressesById[l.spenderId]}));switch(Object(n.useEffect)((function(){s.state===T.a.QUERY_STATE_INITIAL&&o(Object(T.c)(c))}),[s,c,o]),s.state){case T.a.QUERY_STATE_RUNNING:t=r.a.createElement(C.a,{active:!0,inline:!0,size:"mini"});break;case T.a.QUERY_STATE_COMPLETE:if(a=s.value.eq(_)||s.value.gte(i.totalSupply))t=r.a.createElement("em",null,"unlimited");else{var u=new S.a("2"),m=j()({value:s.value,decimals:i.decimals,roundToDecimals:u}).rounded;t=r.a.createElement("span",null,m)}break;case T.a.QUERY_STATE_ERROR:t=r.a.createElement("span",null,"error");break;case T.a.QUERY_STATE_INITIAL:default:t=""}return r.a.createElement(k.a.Row,{key:"".concat(c)},r.a.createElement(k.a.Cell,null,r.a.createElement(O,{ethAddress:d})),r.a.createElement(k.a.Cell,{negative:a},t),r.a.createElement(k.a.Cell,null,r.a.createElement(B,{allowanceId:c})))},L=a(84),z=function(e){var t=e.tokenId,a=e.ownerId,c=e.allowanceIds,o=Object(g.b)(),l=Object(g.c)((function(e){return e.tokenContracts.contractsById[t]})),s=Object(g.c)((function(e){return e.addresses.addressesById[t]})),d=Object(g.c)((function(e){var n=Object(L.c)(a,t);return e.balances.balancesById[n]}));if(Object(n.useEffect)((function(){!d&&(null===l||void 0===l?void 0:l.contractInstance)&&o(Object(L.b)(a,t))}),[d,a,t,l,o]),!l)return r.a.createElement(i.a,{raised:!0},r.a.createElement(I.a,null,r.a.createElement(I.a.Header,null,r.a.createElement(I.a.Line,null),r.a.createElement(I.a.Line,null)),r.a.createElement(I.a.Paragraph,null,r.a.createElement(I.a.Line,null),r.a.createElement(I.a.Line,null),r.a.createElement(I.a.Line,null))));var u=l.name;""===u&&(u="Unnamed ERC20");var p=new S.a(2);if(d&&d.queryState!==T.a.QUERY_STATE_RUNNING){var f=j()({value:d.value,decimals:l.decimals,roundToDecimals:p}).rounded;u+=" (current balance: ".concat(f," ").concat(l.symbol,")")}else u+=" (current balance: loading...)";var b=r.a.createElement("div",null,u),w=[];return c.forEach((function(e){w.push(r.a.createElement(U,{key:e,allowanceId:e}))})),r.a.createElement(i.a,{raised:!0},r.a.createElement(m.a,{as:"h3"},b,r.a.createElement(m.a.Subheader,null,r.a.createElement(O,{ethAddress:s}))),r.a.createElement(k.a,{basic:"very",celled:!0,selectable:!0},r.a.createElement(k.a.Header,null,r.a.createElement(k.a.Row,null,r.a.createElement(k.a.HeaderCell,null,"Spender"),r.a.createElement(k.a.HeaderCell,null,"Allowance"),r.a.createElement(k.a.HeaderCell,null,"Action"))),r.a.createElement(k.a.Body,null,w)))},Q=function(e){var t,a=e.ownerId,n=e.showZeroAllowances,c=e.addressFilter,o=Object(g.c)((function(e){var t,r=null===(t=n&&""===c?e.allowances.allowanceIdsByOwnerId[a]:e.allowances.allowanceIdsByOwnerId[a].filter((function(t){var a=e.allowances.allowancesById[t];if(!n){var r=e.allowances.allowanceValuesById[t];if(r.state===T.a.QUERY_STATE_COMPLETE&&r.value.isZero())return!1}if(c){var o=c.toLowerCase(),l=e.tokenContracts.contractsById[a.tokenContractId];if(l){var s,i=e.addresses.addressesById[l.addressId];if(!(l.name.toLowerCase().includes(o)||l.symbol.toLowerCase().includes(o)||i.address.toLowerCase().includes(o)||(null===(s=i.ensName)||void 0===s?void 0:s.toLowerCase().includes(o))))return!1}else console.warn("No tokencontract for ".concat(a.tokenContractId))}return!0})))||void 0===t?void 0:t.map((function(t){return e.allowances.allowancesById[t]}));return y.a.groupBy(r,"tokenContractId")})),d=Object(g.c)((function(e){return e.allowances.allowanceQueryStateByOwner[a]})),u=Object(g.c)((function(e){return e.addresses.addressesById[a]}));if(!d)return console.log("No querystate available for ".concat(a)),null;for(var m=[],p=0,f=Object.entries(o);p<f.length;p++){var b=f[p],w=b[0],E=b[1].map((function(e){return e.id}));m.push(r.a.createElement(z,{key:w,tokenId:w,ownerId:a,allowanceIds:E}))}switch(d.state){case T.a.QUERY_STATE_RUNNING:t=r.a.createElement(i.a,{basic:!0,padded:"very",textAlign:"center"},r.a.createElement(l.a,{icon:!0,warning:!0,size:"huge"},r.a.createElement(s.a,{name:"circle notched",loading:!0}),r.a.createElement(l.a.Content,null,r.a.createElement(l.a.Header,null,"Loading events"),r.a.createElement("div",null,"Querying dfuse API for ERC20 Approvals, getting page ",d.currentPage+1,"..."))));break;case T.a.QUERY_STATE_ERROR:t=r.a.createElement(i.a,{basic:!0,padded:"very",textAlign:"center"},r.a.createElement(l.a,{error:!0,icon:!0,size:"huge"},r.a.createElement(s.a,{name:"exclamation triangle"}),r.a.createElement(l.a.Content,null,r.a.createElement(l.a.Header,null,"Error"),d.error)));break;case T.a.QUERY_STATE_COMPLETE:var h;if(0===m.length)t=r.a.createElement(i.a,{basic:!0,padded:"very",textAlign:"center"},r.a.createElement(l.a,{success:!0,icon:!0,size:"huge"},r.a.createElement(s.a,{name:"info"}),r.a.createElement(l.a.Content,null,r.a.createElement(l.a.Header,null,"No Approvals"),null!==(h=u.ensName)&&void 0!==h?h:u.address," ","has no Approvals.")));break;case T.a.QUERY_STATE_INITIAL:default:return r.a.createElement("div",null,"Unhandled state!")}return r.a.createElement(r.a.Fragment,null,t,m)},P=a(1083),D=a(1084),M=function(e){var t=e.showZeroAllowances,a=e.toggleShowZeroAllowances,n=e.addressFilterValue,c=e.handleAddressFilterChange,o=e.refresh,l=e.clearAddressFilter;return r.a.createElement(p.a,{verticalAlign:"middle",centered:!0,textAlign:"center",columns:2,divided:!0},r.a.createElement(p.a.Row,null,r.a.createElement(p.a.Column,{width:9},r.a.createElement(P.a,{label:"Tokenfilter",name:"filter",placeholder:"Enter name, symbol or contract address",onChange:c,value:n,icon:r.a.createElement(s.a,{name:"eraser",circular:!0,link:!0,onClick:l}),fluid:!0})),r.a.createElement(p.a.Column,{width:6},r.a.createElement(D.a,{toggle:!0,label:"Include zero allowances",checked:t,onChange:a})),r.a.createElement(p.a.Column,{width:1},r.a.createElement(f.a,{circular:!0,icon:"refresh",onClick:o,title:"Refresh allowances",size:"small",compact:!0}))))};var Y=a(1088),q=a(1087),F=function(e){var t=e.tokenName,a=e.handleChange,n=e.tokenAddress,c=e.spenderAddress,o=e.currentAllowance,s=e.newAllowance,i=e.handleClose,d=e.handleSubmit,u=t;return""===u&&(u="Unnamed ERC20 at ".concat(n)),r.a.createElement(Y.a,{open:!0,size:"small",onClose:i},r.a.createElement(m.a,null,"Edit Allowance"),r.a.createElement(Y.a.Content,null,r.a.createElement(l.a,{size:"huge"},r.a.createElement(l.a.List,null,r.a.createElement(l.a.Item,null,"Token: ",u),r.a.createElement(l.a.Item,null,"Spender: ",c),r.a.createElement(l.a.Item,null,"Current allowance: ",o))),r.a.createElement(q.a,{size:"huge",onSubmit:d},r.a.createElement(q.a.Field,{required:!0},r.a.createElement(P.a,{label:{tag:!0,content:"Enter new allowance"},labelPosition:"right",placeholder:"Enter amount",type:"number",name:"newAllowance",onChange:a,value:s})),r.a.createElement(p.a,{columns:2},r.a.createElement(p.a.Row,null,r.a.createElement(p.a.Column,null,r.a.createElement(q.a.Button,{type:"button",fluid:!0,size:"huge",negative:!0,onClick:i},"Cancel")),r.a.createElement(p.a.Column,null,r.a.createElement(q.a.Button,{type:"submit",fluid:!0,size:"huge",positive:!0},"Set allowance")))))))},G=a(83),W=function(){var e=Object(g.b)(),t=Object(g.c)((function(e){return e.allowances.allowancesById[e.editAllowance.editAllowanceId]})),a=Object(g.c)((function(e){return e.allowances.allowanceValuesById[e.editAllowance.editAllowanceId]})),c=Object(g.c)((function(e){return e.tokenContracts.contractsById[t.tokenContractId]})),o=Object(g.c)((function(e){return e.addresses.addressesById[t.spenderId]})),l=Object(n.useState)("0"),s=Object(h.a)(l,2),i=s[0],d=s[1],u=Object(n.useCallback)((function(){return a.value.gte(c.totalSupply)?"unlimited":j()({value:a.value,decimals:c.decimals,roundToDecimals:new S.a(2)}).rounded}),[a.value,c.totalSupply,c.decimals]);return r.a.createElement(F,{newAllowance:i,currentAllowance:u(),tokenAddress:c.addressId,handleClose:function(){e(Object(R.a)())},spenderAddress:o.address,spenderENSName:o.ensName||"",tokenName:c.name,handleChange:function(e){var t=e.target.value;console.log("handleChange: ".concat(t)),parseFloat(t)<0&&(t="0"),d(t)},handleSubmit:function(){console.log("Submitted new allowance: ".concat(i));var a=function(e,t){var a=new S.a(10).pow(t),n="-"===e.substring(0,1);if(n&&(e=e.substring(1)),"."===e)throw new Error("Invalid value ".concat(e," cannot be converted to")+" base unit with ".concat(t.toString()," decimals."));var r=e.split(".");if(r.length>2)throw new Error("Too many decimal points");var c=r[0],o=r[1];c||(c="0"),o||(o="0");var l=t.toNumber();if(o.length>l)throw new Error("Too many decimal places");for(;o.length<l;)o+="0";var s=new S.a(c),i=new S.a(o),d=s.mul(a).add(i);return n&&(d=d.neg()),new S.a(d.toString(10),10)}(i,c.decimals);e(Object(R.a)()),e(Object(G.d)(c.addressId,o.address,a,t.id))},tokenSymbol:c.symbol})},H=function(){var e,t=Object(g.b)(),a=Object(g.c)((function(e){return e.addresses.checkAddressId?e.addresses.addressesById[e.addresses.checkAddressId]:void 0})),c=Object(g.c)((function(e){return a?e.allowances.allowanceQueryStateByOwner[a.address]:void 0})),o=Object(g.c)((function(e){return e.editAllowance.showModal})),l=Object(n.useState)(!0),s=Object(h.a)(l,2),d=s[0],u=s[1],m=Object(n.useState)(""),p=Object(h.a)(m,2),f=p[0],b=p[1];Object(n.useEffect)((function(){var e,t;document.title="TAC - ".concat(null!==(e=null!==(t=null===a||void 0===a?void 0:a.ensName)&&void 0!==t?t:null===a||void 0===a?void 0:a.address)&&void 0!==e?e:"")}),[a]),Object(n.useEffect)((function(){c&&c.state===T.a.QUERY_STATE_INITIAL&&a&&t(Object(T.d)(a.address))}),[c,t,a]);return a?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{basic:!0},r.a.createElement("h2",null,"Allowances of ",null!==(e=null===a||void 0===a?void 0:a.ensName)&&void 0!==e?e:null===a||void 0===a?void 0:a.address,":")),r.a.createElement(M,{showZeroAllowances:d,toggleShowZeroAllowances:function(){u(!d)},addressFilterValue:f,handleAddressFilterChange:function(e){var t=e.target.value;b(t)},clearAddressFilter:function(){b("")},refresh:function(){!function(){var e;a&&(console.log('Starting query for "'.concat(null!==(e=null===a||void 0===a?void 0:a.ensName)&&void 0!==e?e:null===a||void 0===a?void 0:a.address,'"')),t(Object(T.d)(a.address)))}()}}),r.a.createElement(Q,{ownerId:a.address,showZeroAllowances:d,addressFilter:f}),o&&r.a.createElement(W,null)):r.a.createElement("div",null,"No address set")},V=a(43),K=function(e){var t=e.children,a=Object(o.f)(),c=Object(g.b)(),d=Object(g.c)((function(e){return e.onboard})),u=d.onboardAPI,m=d.walletSelected;return Object(n.useEffect)((function(){u?m||(console.log("OnboardGate: Dispatching selectWallet"),c(Object(V.c)(a))):(console.log("OnboardGate: Dispatching initialize()"),c(Object(V.b)(a)))}),[u,m,c,a]),m?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(i.a,{basic:!0,padded:"very",textAlign:"center"},r.a.createElement(l.a,{info:!0,icon:!0,size:"huge"},r.a.createElement(s.a,{name:"spinner",loading:!0}),r.a.createElement(l.a.Content,null,r.a.createElement(l.a.Header,null,"Waiting for wallet"),"Please complete wallet selection.")))},$=a(8),Z=a.n($),J=a(31),X=function(e){var t=e.handleInput,a=e.loading,n=e.error,c=e.value,o=e.success;return r.a.createElement(q.a.Field,{inline:!0,width:14},r.a.createElement(P.a,{placeholder:"Address or ENS Name",error:n,loading:a,onChange:function(e){var a=e.target.value;t(a)},value:c,type:"text",action:{type:"Submit",disabled:!o,content:"Go!",positive:!0},label:"Enter address/ENS name or select in wallet"}))},ee="address_initial",te="address_resolving",ae="address_valid",ne="address_invalid",re=function(){var e=Object(g.c)((function(e){return e.onboard})).web3,t=Object(g.c)((function(e){return e.addresses})).checkAddressId,a=Object(o.f)(),c=Object(n.useState)(ee),l=Object(h.a)(c,2),s=l[0],i=l[1],d=Object(n.useState)(""),u=Object(h.a)(d,2),m=u[0],f=u[1],b=Object(n.useState)(""),w=Object(h.a)(b,2),E=w[0],v=w[1];Object(n.useEffect)((function(){(function(){var t=Object(J.a)(Z.a.mark((function t(){var a,n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==m.length){t.next=4;break}i(ee),t.next=24;break;case 4:if(a=/^(0x)?[0-9a-f]{40}$/i.test(m),!/.*\.eth$/i.test(m)||!e){t.next=23;break}return i(te),t.prev=8,t.next=11,e.eth.ens.getAddress(m);case 11:n=t.sent,console.log("Resolved ".concat(m," to ").concat(n)),i(ae),v(n),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(8),console.log("Could not resolve "+m),i(ne);case 21:t.next=24;break;case 23:a?(v(m),i(ae)):i(ne);case 24:case"end":return t.stop()}}),t,null,[[8,17]])})));return function(){return t.apply(this,arguments)}})()()}),[m,v,e]),Object(n.useEffect)((function(){t&&f(t)}),[t]);var y=s===ne,I=s===te,k=s===ae;return r.a.createElement(p.a,{textAlign:"center",centered:!0,columns:1},r.a.createElement(p.a.Row,null,r.a.createElement(p.a.Column,{width:14},r.a.createElement(q.a,{size:"huge",onSubmit:function(){k&&a.push("/address/".concat(E))},error:y,success:k,widths:"equal"},r.a.createElement(q.a.Group,null,r.a.createElement(X,{handleInput:f,value:m,error:y,success:k,loading:I}))))))},ce=a(494),oe=a(46),le=function(e){var t=e.children,a=Object(g.b)(),c=Object(o.f)(),l=Object(o.g)().address,s=Object(g.c)((function(e){return e.addresses})).walletAddressId,i=Object(g.c)((function(e){return e.onboard})).web3;return Object(n.useEffect)((function(){l?i&&(console.log("AddressExtractor: Setting new address ".concat(l)),a(Object(oe.f)(l.toLowerCase()))):s?(console.log("AddressExtractor: no address in params. Falling back to walletAddress ".concat(s)),c.push("/address/".concat(s))):(console.log("AddressExtractor: Clearing checkAddressId"),a(Object(oe.c)()))}),[l,s,a,c,i]),r.a.createElement(r.a.Fragment,null,t)},se=a(1092),ie=function(){var e,t=[{key:1,text:"Mainnet",value:1},{key:2,text:"Ropsten",value:3}],a=Object(g.b)(),n=Object(g.c)((function(e){return e.onboard})),c=n.requiredNetworkId,o=n.walletSelected,l=t.find((function(e){return e.value===c})),s=null!==(e=null===l||void 0===l?void 0:l.text)&&void 0!==e?e:"select network";return r.a.createElement(se.a,{disabled:!o,text:s,options:t,onChange:function(e,t){var n=t.value;console.log("Selected value: ".concat(n)),a(Object(V.f)(parseInt("".concat(n))))},value:c})};t.default=function(){var e=r.a.createElement(l.a,{color:"yellow",size:"big",icon:!0},r.a.createElement(s.a,{name:"hand point right"}),r.a.createElement(l.a.Content,null,r.a.createElement(l.a.Header,null,"Gitcoins ",r.a.createElement("em",null,"$250k Matching Round")," is now live until 2020-04-07!"),r.a.createElement("div",null,"Do you like this project? Contribute to the"," ",r.a.createElement("strong",null,"gitcoin grant")," to support the ongoing development of Token Allowance Checker!"),r.a.createElement("div",null,r.a.createElement("strong",null,"->"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://gitcoin.co/grants/480/token-allowance-checker?tab=description"},"Gitcoin Grant Page")," ","<-")),r.a.createElement("div",null,"Direct donations are also welcome! Please use address"," ",r.a.createElement("strong",null,"tac.dappstar.eth"),"."))),t=r.a.createElement(i.a,{inverted:!1,textAlign:"center",vertical:!0},r.a.createElement(d.a,{fixed:"top",inverted:!0,size:"huge"},r.a.createElement(u.a,null,r.a.createElement(d.a.Item,{header:!0,as:c.b,to:"/"},r.a.createElement(s.a,{name:"home",size:"big"})," Home"),r.a.createElement(d.a.Item,{as:c.b,to:"/address/"},r.a.createElement(s.a,{name:"search",size:"big"})," Check Allowances"),r.a.createElement(d.a.Menu,{position:"right"},r.a.createElement(d.a.Item,null,r.a.createElement(ie,null)),r.a.createElement(d.a.Item,null,r.a.createElement("a",{href:"https://github.com/TripleSpeeder/token-allowance-checker",title:"github.com/TripleSpeeder/token-allowance-checker",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(s.a,{name:"github",size:"big"})))))),r.a.createElement(u.a,{text:!0,style:{marginTop:"4em",marginBottom:"2em"}},r.a.createElement(m.a,{as:"h1",inverted:!1,style:{fontSize:"3em",marginTop:"0.5em"}},"Token Allowance Checker",r.a.createElement(m.a.Subheader,null,"powered by"," ",r.a.createElement("a",{href:"https://www.dfuse.io/",rel:"noopener noreferrer",target:"_blank"},"dfuse")))),r.a.createElement(u.a,{textAlign:"center"},e));return r.a.createElement(c.a,null,t,r.a.createElement(o.c,null,r.a.createElement(o.a,{path:["/address/:address","/address"]},r.a.createElement(u.a,null,r.a.createElement(K,null,r.a.createElement(le,null,r.a.createElement(i.a,{basic:!0,padded:!0},r.a.createElement(re,null)),r.a.createElement(H,null))))),r.a.createElement(o.a,{path:"/"},r.a.createElement(i.a,{basic:!0,vertical:!0,style:{paddingTop:"4em"}},r.a.createElement(p.a,{container:!0,stackable:!0,verticalAlign:"top"},r.a.createElement(p.a.Row,null,r.a.createElement(p.a.Column,{width:8},r.a.createElement(m.a,{as:"h3",style:{fontSize:"2em"}},"Do you actually know who can spend your tokens?"),r.a.createElement("p",{style:{fontSize:"1.33em"}},r.a.createElement("em",null,"Token Allowance Checker")," helps you keep track of which contracts you have approved to spend your tokens."),r.a.createElement(m.a,{as:"h3",style:{fontSize:"2em"}},"Control your approvals"),r.a.createElement("p",{style:{fontSize:"1.33em"}},r.a.createElement("em",null,"Token Allowance Checker")," will show you all approvals for ERC20-compliant tokens, and the option to change the approved amount - or completely zero it.")),r.a.createElement(p.a.Column,{floated:"right",width:7},r.a.createElement(m.a,{as:"h3",style:{fontSize:"2em"}},"The unlimited approval problem"),r.a.createElement("p",{style:{fontSize:"1.33em"}},"Many DApps have the habit of requiring you to approve effectively unlimited amount of tokens. This helps improving the user experience, as you only have to sign off an approval once and it will be enough for all future transactions."),r.a.createElement("p",{style:{fontSize:"1.33em"}},"However this also means that the DApp (or the person/entity controlling it) can at any time transfer"," ",r.a.createElement("em",null,"all of your tokens"),", without requiring any further approval."),r.a.createElement("p",{style:{fontSize:"1.33em"}},"In addition, there is no concept of expiring approvals. Once approved, the approval will remain forever. If you do not trust a DApp or its operators anymore, there is usually no easy way to remove the approval."))))),r.a.createElement(i.a,{basic:!0,textAlign:"center"},r.a.createElement(f.a,{primary:!0,as:c.b,to:"/address/",size:"massive"},"Check Allowances",r.a.createElement(s.a,{name:"arrow right"}))))),r.a.createElement(i.a,{basic:!0},r.a.createElement(b.a,null),r.a.createElement(u.a,{textAlign:"center"},r.a.createElement("span",{style:{fontSize:"1em",float:"right"}},r.a.createElement(s.a,{name:"copyright outline"})," Michael Bauer"),r.a.createElement(w.a,{horizontal:!0},r.a.createElement(w.a.Item,{as:"a",href:"https://twitter.com/TripleSpeeder",target:"_blank"},r.a.createElement(E.a,{content:"@triplespeeder",trigger:r.a.createElement(s.a,{size:"big",name:"twitter"})})),r.a.createElement(w.a.Item,{as:"a",href:"https://t.me/triplespeeder",target:"_blank"},r.a.createElement(E.a,{content:"@triplespeeder",trigger:r.a.createElement(s.a,{size:"big",name:"telegram"})})),r.a.createElement(w.a.Item,{as:"a",href:"mailto:michael@m-bauer.org"},r.a.createElement(E.a,{content:"michael@m-bauer.org",trigger:r.a.createElement(s.a,{size:"big",name:"mail outline"})})),r.a.createElement(w.a.Item,{as:"a",href:"https://github.com/TripleSpeeder",target:"_blank"},r.a.createElement(E.a,{content:"github.com/TripleSpeeder",trigger:r.a.createElement(s.a,{size:"big",name:"github"})})),r.a.createElement(w.a.Item,{as:"a",href:"https://www.reddit.com/u/TripleSpeeder",target:"_blank"},r.a.createElement(E.a,{content:"u/TripleSpeeder",trigger:r.a.createElement(s.a,{size:"big",name:"reddit"})}))),r.a.createElement("span",{style:{fontSize:"1em",float:"left"}},ce.version))))}},1050:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(69),o=a.n(c),l=a(15),s=a(32),i=a(61),d=a(43),u=a(46),m=a(83),p=a(23),f=a(84),b=a(103),w=a(36),E=Object(i.combineReducers)({onboard:d.a,addresses:u.d,tokenContracts:m.c,allowances:p.b,balances:f.d,editAllowance:b.b,transactions:w.c}),h=Object(s.c)({serializableCheck:{ignoredActions:[d.e.type,d.g.type,m.a.type,p.e.type,f.a.type,f.e.type],ignoredPaths:["onboard.web3","onboard.onboardAPI","tokenContracts.contractsById","allowances.allowanceValuesById","balances.balancesById"]},immutableCheck:{ignore:["onboard.web3","onboard.onboardAPI","tokenContracts.contractsById"]}});var g=Object(s.a)({reducer:E,middleware:h});a(879);!function(){var e=a(1049).default;o.a.render(r.a.createElement(l.a,{store:g},r.a.createElement(e,null)),document.getElementById("root"))}()},23:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return S})),a.d(t,"c",(function(){return T})),a.d(t,"d",(function(){return C}));var n,r,c=a(8),o=a.n(c),l=a(31),s=a(45),i=a(32),d=a(83),u=a(46),m=a(29),p=a.n(m),f=a(471),b=a(36),w=a(470),E=a(43),h=a(742),g="0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925",v=[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}];!function(e){e[e.QUERY_STATE_INITIAL=0]="QUERY_STATE_INITIAL",e[e.QUERY_STATE_RUNNING=1]="QUERY_STATE_RUNNING",e[e.QUERY_STATE_ERROR=2]="QUERY_STATE_ERROR",e[e.QUERY_STATE_COMPLETE=3]="QUERY_STATE_COMPLETE"}(r||(r={}));var y={currentPage:0,state:r.QUERY_STATE_INITIAL},I=Object(i.b)({name:"Allowances",initialState:{allowancesById:{},allowanceValuesById:{},allowanceIdsByOwnerId:{},allowanceQueryStateByOwner:{}},reducers:{addAllowance:{reducer:function(e,t){var a=t.payload,n=a.id,c=a.allowance;Object.keys(e.allowancesById).includes(n)||(e.allowancesById[n]=c,e.allowanceIdsByOwnerId[c.ownerId].push(c.id),e.allowanceValuesById[n]={allowanceId:n,state:r.QUERY_STATE_INITIAL,value:new p.a("-1")})},prepare:function(e,t,a){var n=function(e,t,a){return"".concat(t,"-").concat(e,"-").concat(a)}(e,t,a);return{payload:{id:n,allowance:{id:n,tokenContractId:e,ownerId:t,spenderId:a}}}}},setQueryState:function(e,t){var a=t.payload,n=a.ownerId,r=a.queryState;e.allowanceQueryStateByOwner[n]=r},setAllowanceValue:function(e,t){var a=t.payload;e.allowanceValuesById[a.allowanceId]=a}},extraReducers:(n={},Object(s.a)(n,u.a.type,(function(e,t){var a=t.payload.id;Object.keys(e.allowanceIdsByOwnerId).includes(a)||(e.allowanceIdsByOwnerId[a]=[],e.allowanceQueryStateByOwner[a]=y)})),Object(s.a)(n,b.b.type,(function(e,t){var a=t.payload,n=a.allowanceId,r=a.transactionId;e.allowancesById[n].editTransactionId=r})),Object(s.a)(n,E.d.type,(function(e,t){var a=t.payload;console.log("Resetting allowances due to network change to ".concat(a)),Object.keys(e.allowanceQueryStateByOwner).forEach((function(t){e.allowanceQueryStateByOwner[t]=y})),Object.keys(e.allowanceIdsByOwnerId).forEach((function(t){e.allowanceIdsByOwnerId[t]=[]})),e.allowanceValuesById={},e.allowancesById={}})),n)}),k=I.actions,O=k.addAllowance,A=k.setQueryState,S=k.setAllowanceValue;t.b=I.reducer;var T=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a,n){var c,l,s,i,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(S({allowanceId:e,value:new p.a("-1"),state:r.QUERY_STATE_RUNNING})),c=n().allowances.allowancesById[e],l=n().addresses.addressesById[c.ownerId],s=n().addresses.addressesById[c.spenderId],i=n().tokenContracts.contractsById[c.tokenContractId],t.prev=5,t.next=8,i.contractInstance.allowance(l.address,s.address);case 8:d=t.sent,a(S({allowanceId:e,value:d,state:r.QUERY_STATE_COMPLETE})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),console.log("Failed to get allowance from token ".concat(i.addressId)),a(S({allowanceId:e,value:new p.a("-1"),state:r.QUERY_STATE_ERROR}));case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,a){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(a,n){var c,l,s,i,m,p,b,E,y,I,k,S,T,C,x,j,R,N,B,_,U,L;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n().onboard.web3){t.next=4;break}return console.log("Missing web3!"),t.abrupt("return");case 4:l=n().addresses.addressesById[e],s=n().onboard.networkId,i=0,a(A({ownerId:e,queryState:{state:r.QUERY_STATE_RUNNING,currentPage:i}})),t.t0=s,t.next=3===t.t0?11:1===t.t0?13:15;break;case 11:return m="ropsten.eth.dfuse.io",t.abrupt("break",18);case 13:return m="mainnet.eth.dfuse.io",t.abrupt("break",18);case 15:return console.log("Network ".concat(s," not supported by dfuse.io")),a(A({ownerId:e,queryState:{state:r.QUERY_STATE_ERROR,currentPage:i,error:"Network ".concat(s," not supported.")}})),t.abrupt("return");case 18:p=Object(f.createDfuseClient)({apiKey:"web_085aeaac9c520204b1a9dcaa357e5460",network:m}),(b=h(w)).setProvider(c.currentProvider),E="",t.prev=22,y=0,I=[],k=[],S=[];case 27:return console.log("Getting page ".concat(i,". Last page result: ").concat(y,".")),t.next=30,p.graphql("query ($query: String! $limit: Int64! $cursor: String) {\n      searchTransactions(\n        indexName: LOGS, \n        query: $query, \n        limit: $limit, \n        sort: DESC,\n        cursor: $cursor,\n      ) {\n        pageInfo {\n          endCursor\n        }\n        edges {\n          node {\n            hash\n            block {\n              number\n            }\n            matchingLogs {\n              data\n              topics\n              address\n            }\n          }\n        }\n      }\n    }",{variables:{limit:"50",query:"topic.0:".concat(g," topic.1:").concat(l.address),cursor:E}});case 30:if(!(T=t.sent).errors){t.next=33;break}throw T.errors;case 33:C=T.data.searchTransactions.edges||[],x=0;case 35:if(!(x<C.length)){t.next=104;break}j=C[x].node,R=0;case 38:if(!(R<j.matchingLogs.length)){t.next=101;break}if(N=j.matchingLogs[R],!I.includes(N.address.toLowerCase())){t.next=42;break}return t.abrupt("continue",98);case 42:if(N.topics[0]===g){t.next=45;break}return console.log("Skipping log event. Topic is wrong, expected ".concat(g,", got ").concat(N.topics[0],". Transaction: ").concat(j.hash)),t.abrupt("continue",98);case 45:if(B=N.address.toLowerCase(),"0x"!==N.data){t.next=50;break}return console.log("Detected bad contract at ".concat(N.address,": LogEntry.data is missing. Transaction: ").concat(j.hash,".")),I.push(B),t.abrupt("continue",98);case 50:_=void 0,t.prev=51,_=c.eth.abi.decodeLog(v,N.data,N.topics.slice(1)),t.next=61;break;case 55:return t.prev=55,t.t1=t.catch(51),console.log("Detected bad contract at ".concat(N.address,": Can not decode logEntry from transaction: ").concat(j.hash,":")),console.log(N),I.push(B),t.abrupt("continue",98);case 61:if(parseInt(_.spender)){t.next=64;break}return console.log("Skipping log event: Invalid spender ".concat(_.spender,", contract: ").concat(N.address)),t.abrupt("continue",98);case 64:if(_.owner.toLowerCase()===l.address.toLowerCase()){t.next=67;break}return console.log("Skipping log event due to owner mismatch. Expected ".concat(l.address,", got ").concat(_.owner,". Transaction: ").concat(j.hash)),t.abrupt("continue",98);case 67:if(k.includes(B)){t.next=96;break}return U=void 0,t.prev=69,t.next=72,b.at(B);case 72:U=t.sent,t.next=80;break;case 75:return t.prev=75,t.t2=t.catch(69),console.log("Error instantiating contract at ".concat(B,": ").concat(t.t2)),I.push(B),t.abrupt("continue",98);case 80:return t.prev=80,t.next=83,U.totalSupply();case 83:return t.next=85,U.balanceOf(B);case 85:return t.next=87,U.allowance(B,B);case 87:t.next=94;break;case 89:return t.prev=89,t.t3=t.catch(80),console.log("Contract at ".concat(B," is not ERC20. Ignoring.")),I.push(B),t.abrupt("continue",98);case 94:k.push(B),a(Object(d.b)(U));case 96:L=_.spender.toLowerCase(),S.includes(L)||(S.push(L),a(Object(u.b)(L)),a(Object(u.e)(L)),a(O(B,e,L)));case 98:R++,t.next=38;break;case 101:x++,t.next=35;break;case 104:y=C.length,i++,E=T.data.searchTransactions.pageInfo.endCursor,a(A({ownerId:e,queryState:{state:r.QUERY_STATE_RUNNING,currentPage:i}}));case 108:if(y>0){t.next=27;break}case 109:a(A({ownerId:e,queryState:{state:r.QUERY_STATE_COMPLETE,currentPage:i}})),t.next=116;break;case 112:t.prev=112,t.t4=t.catch(22),console.log(t.t4),a(A({ownerId:e,queryState:{state:r.QUERY_STATE_ERROR,currentPage:i,error:JSON.stringify(t.t4)}}));case 116:case"end":return t.stop()}}),t,null,[[22,112],[51,55],[69,75],[80,89]])})));return function(e,a){return t.apply(this,arguments)}}()}},36:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return s}));var n,r=a(32);!function(e){e[e.INITIAL=0]="INITIAL",e[e.SUBMITTED=1]="SUBMITTED",e[e.CONFIRMED=2]="CONFIRMED",e[e.FAILED=3]="FAILED"}(n||(n={}));var c=Object(r.b)({name:"transactionTracker",initialState:{transactionsById:{}},reducers:{addTransaction:function(e,t){var a=t.payload;e.transactionsById[a.transactionId]=a},updateTransaction:function(e,t){var a=t.payload,n=a.transactionId,r=a.transactionState,c=a.error,o=a.transactionHash;r&&(e.transactionsById[n].transactionState=r),c&&(e.transactionsById[n].error=c),o&&(e.transactionsById[n].transactionHash=o)}}}),o=c.actions,l=o.addTransaction,s=o.updateTransaction;t.c=c.reducer},43:function(e,t,a){"use strict";a.d(t,"e",(function(){return w})),a.d(t,"d",(function(){return E})),a.d(t,"g",(function(){return h})),a.d(t,"c",(function(){return k})),a.d(t,"f",(function(){return O})),a.d(t,"b",(function(){return A}));var n=a(8),r=a.n(n),c=a(31),o=a(32),l=a(468),s=a(274),i=a.n(s),d=a(46),u="7f230a5ca832426796454c28577d93f2",m=[{walletName:"metamask",preferred:!0},{walletName:"coinbase",preferred:!0},{walletName:"walletConnect",infuraKey:u,preferred:!0},{walletName:"trust",preferred:!0},{walletName:"dapper",preferred:!0},{walletName:"authereum",preferred:!0},{walletName:"opera"},{walletName:"status"},{walletName:"operaTouch"},{walletName:"torus"},{walletName:"status"},{walletName:"ledger",rpcUrl:"mainnet.infura.io/v3/".concat(u)},{walletName:"trezor",appUrl:"https://tac.dappstar.io",email:"michael@m-bauer.org",rpcUrl:"mainnet.infura.io/v3/".concat(u)}],p={networkId:0,requiredNetworkId:1,onboardAPI:null,walletSelected:!1,prevWalletAddressId:void 0},f=Object(o.b)({name:"onboard",initialState:p,reducers:{setOnboardAPI:function(e,t){e.onboardAPI=t.payload},setWeb3Instance:function(e,t){e.web3=t.payload},setNetworkId:function(e,t){e.networkId=t.payload},setPrevWalletAddressId:function(e,t){e.prevWalletAddressId=t.payload},setWalletSelected:function(e,t){e.walletSelected=t.payload},setRequiredNetworkId:function(e,t){e.requiredNetworkId=t.payload}}}),b=f.actions,w=b.setOnboardAPI,E=b.setNetworkId,h=b.setWeb3Instance,g=b.setWalletSelected,v=b.setPrevWalletAddressId,y=b.setRequiredNetworkId;t.a=f.reducer;var I=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("checking wallet..."),!(n=a().onboard.onboardAPI)){e.next=9;break}return e.next=5,n.walletCheck();case 5:c=e.sent,console.log("walletCheck result: ".concat(c)),e.next=10;break;case 9:console.log("dispatched checkWallet() without initialization...");case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Selecting wallet..."),!(c=n().onboard.onboardAPI)){t.next=10;break}return t.next=5,c.walletSelect();case 5:o=t.sent,a(g(o)),o?a(I()):e.push("/"),t.next=11;break;case 10:console.log("dispatched selectWallet() without initialization...");case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},O=function(e){return function(t,a){t(y(e));var n=a().onboard.onboardAPI;n&&(n.config({networkId:e}),t(I()))}},A=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=n().onboard.requiredNetworkId,console.log("Initializing OnBoard.js for networkId ".concat(c,"...")),o=Object(l.a)({dappId:"f4b71bf0-fe50-4eeb-bc2b-b323527ed9e6",networkId:c,subscriptions:{wallet:function(e){a(h(new i.a(e.provider)))},address:function(t){console.log("Wallet address changed to ".concat(t,"!")),a(Object(d.g)(t));var r=n().onboard.prevWalletAddressId;r&&r!==t.toLowerCase()&&(console.log("Pushing ".concat(t,". Prev walletId: ").concat(r)),e.push("/address/".concat(t))),a(v(t.toLowerCase()))},network:function(e){var t=n().onboard.networkId;0!==t&&t!==e&&console.log("Switching network from ".concat(t," to ").concat(e)),a(O(e)),a(E(e))},balance:function(){}},walletSelect:{heading:"",description:"",wallets:m}}),a(w(o));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},46:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return E})),a.d(t,"e",(function(){return v})),a.d(t,"b",(function(){return y})),a.d(t,"f",(function(){return I})),a.d(t,"g",(function(){return k}));var n,r=a(8),c=a.n(r),o=a(31),l=a(32),s=a(81),i=a.n(s);!function(e){e[e.Initial=0]="Initial",e[e.Resolving=1]="Resolving",e[e.Resolved=2]="Resolved"}(n||(n={}));var d={addressesById:{},walletAddressId:void 0,checkAddressId:void 0},u=Object(l.b)({name:"ethAddresses",initialState:d,reducers:{addAddress:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.ethAddress;e.addressesById[n]=r},prepare:function(e){return{payload:{id:e,ethAddress:{address:e,resolvingState:n.Initial}}}}},setResolvingState:function(e,t){var a=t.payload,n=a.id,r=a.resolvingState;e.addressesById[n].resolvingState=r},setENSName:function(e,t){var a=t.payload,n=a.id,r=a.ensName;e.addressesById[n].ensName=r},setCheckAddressId:function(e,t){e.checkAddressId=t.payload},clearCheckAddressId:function(e){e.checkAddressId=void 0},setWalletAddressId:function(e,t){e.walletAddressId=t.payload},setEtherscanContractName:function(e,t){var a=t.payload,n=a.id,r=a.esContractName;e.addressesById[n].esContractName=r}}}),m=u.actions,p=m.addAddress,f=m.setResolvingState,b=m.setENSName,w=m.setCheckAddressId,E=m.clearCheckAddressId,h=m.setWalletAddressId,g=m.setEtherscanContractName;t.d=u.reducer;var v=function(e){return function(){var t=Object(o.a)(c.a.mark((function t(a,n){var r,o,l,s,i,d,u,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n().onboard.networkId,o="THS8KWYM6KZ8WBP3DXKUDR7UKCRB8YIRGH",t.t0=r,t.next=1===t.t0?5:3===t.t0?7:9;break;case 5:return l="api.etherscan.io",t.abrupt("break",10);case 7:return l="api-ropsten.etherscan.io",t.abrupt("break",10);case 9:throw Error("Network ".concat(r," not supported"));case 10:return s="https://".concat(l,"/api?module=contract&action=getsourcecode&address=").concat(e,"&apikey=").concat(o),t.next=13,fetch(s);case 13:return i=t.sent,t.next=16,i.json();case 16:"OK"===(d=t.sent).message?(null===(m=null===d||void 0===d?void 0:null===(u=d.result[0])||void 0===u?void 0:u.ContractName)||void 0===m?void 0:m.length)&&a(g({id:e,esContractName:m})):console.log("Got message ".concat(d.message," fetching contract data from Etherscan API."));case 18:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(o.a)(c.a.mark((function t(a,r){var o,l,s,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e.toLowerCase(),!Object.keys(r().addresses.addressesById).includes(e)){t.next=3;break}return t.abrupt("return");case 3:if(!(o=r().onboard.web3)){t.next=24;break}return a(p(e)),a(f({id:e,resolvingState:n.Resolving})),t.prev=7,l=e.substr(2)+".addr.reverse",t.next=11,o.eth.ens.resolver(l);case 11:return s=t.sent,t.next=14,s.methods.name(i.a.hash(l)).call();case 14:d=t.sent,console.log("Got reverseENS: ".concat(d)),a(b({id:e,ensName:d})),t.next=21;break;case 19:t.prev=19,t.t0=t.catch(7);case 21:a(f({id:e,resolvingState:n.Resolved})),t.next=25;break;case 24:console.log("AddressSlice: Can not add ".concat(e," - web3 still missing"));case 25:case"end":return t.stop()}}),t,null,[[7,19]])})));return function(e,a){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(o.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.endsWith(".eth")){t.next=3;break}return console.log("ENS name not yet handled: ".concat(e)),t.abrupt("return");case 3:a(y(e)),a(w(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(o.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Got new address from wallet: ".concat(e)),a(y(e)),a(h(e));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},494:function(e){e.exports=JSON.parse('{"name":"token-allowance-checker","version":"2.2.1","private":true,"homepage":"https://tac.dappstar.io","repository":"github:TripleSpeeder/token-allowance-checker","husky":{"hooks":{"pre-commit":"lint-staged","commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"lint-staged":{"src/**/*.{ts,tsx}":["./node_modules/.bin/eslint --max-warnings 0 --fix","./node_modules/.bin/prettier --write"]},"scripts":{"start":"react-scripts start","start:https":"HTTPS=true react-scripts start","typechain":"typechain --target truffle --outDir src/contracts ./node_modules/@openzeppelin/contracts/build/contracts/ERC20Detailed.json","build":"PUBLIC_URL=\'.\' react-scripts build","test":"react-scripts test","eject":"react-scripts eject","storybook":"start-storybook -p 9009 -s public","build-storybook":"build-storybook -s public","release":"standard-version","lint":"./node_modules/.bin/eslint --max-warnings 0 . --ext .ts,.tsx","lint:fix":"./node_modules/.bin/eslint --max-warnings 0 . --ext .ts,.tsx --fix","prettier":"./node_modules/.bin/prettier --check \\"src/**/*.ts{,x}\\"","prettier:write":"./node_modules/.bin/prettier --write \\"src/**/*.ts{,x}\\""},"dependencies":{"@types/react-router":"^5.1.4","react":"^16.12.0","react-dom":"^16.12.0","react-redux":"^7.2.0","react-router-dom":"^5.1.2","semantic-ui-css":"^2.4.1","semantic-ui-react":"^0.88.2"},"devDependencies":{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","@dfuse/client":"^0.3.8","@openzeppelin/contracts":"^2.5.0","@reduxjs/toolkit":"^1.2.5","@semantic-release/changelog":"^5.0.0","@semantic-release/git":"^9.0.0","@storybook/addon-actions":"^5.3.12","@storybook/addon-links":"^5.3.12","@storybook/addons":"^5.3.12","@storybook/preset-create-react-app":"^1.5.2","@storybook/react":"^5.3.12","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.4.0","@testing-library/user-event":"^7.2.1","@triplespeeder/bn2string":"^1.0.0","@truffle/contract":"^4.1.8","@typechain/truffle-v5":"^0.9.0","@types/bn.js":"^4.11.6","@types/jest":"^25.1.3","@types/lodash":"^4.14.149","@types/node":"^13.7.6","@types/react":"^16.9.23","@types/react-dom":"^16.9.5","@types/react-redux":"^7.1.7","@types/react-router-dom":"^5.1.3","@types/uuid":"^7.0.0","@typescript-eslint/eslint-plugin":"^2.23.0","@typescript-eslint/parser":"^2.23.0","bn.js":"^5.1.1","bnc-onboard":"^1.3","eslint":"^6.8.0","eslint-config-airbnb":"^18.1.0","eslint-config-airbnb-typescript":"^7.0.0","eslint-config-prettier":"^6.10.0","eslint-plugin-import":"^2.20.1","eslint-plugin-jsx-a11y":"^6.2.3","eslint-plugin-prettier":"^3.1.2","eslint-plugin-react":"^7.19.0","eslint-plugin-react-hooks":"^1.7.0","eth-ens-namehash":"^2.0.8","human-standard-token-abi":"^2.0.0","husky":"^4.2.3","lint-staged":"^10.0.8","lodash":"^4.17.15","prettier":"^1.19.1","react-scripts":"3.4.0","semantic-release":"^17.0.4","standard-version":"^7.1.0","truffle-typings":"^1.0.8","typechain":"^1.0.5","typechain-target-truffle":"^1.0.2","typescript":"^3.8.2","uuid":"^7.0.2","web3":"^1.2.6"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},512:function(e,t,a){e.exports=a(1050)},530:function(e,t){},548:function(e,t){},550:function(e,t){},616:function(e,t){},618:function(e,t){},619:function(e,t){},625:function(e,t){},627:function(e,t){},644:function(e,t){},647:function(e,t){},663:function(e,t){},666:function(e,t){},682:function(e,t){},683:function(e,t){},685:function(e,t){},741:function(e,t){},793:function(e,t){},800:function(e,t){},817:function(e,t){},829:function(e,t){},83:function(e,t,a){"use strict";var n=a(8),r=a.n(n),c=a(31),o=a(45),l=a(32),s=a(1097),i={1:{"0x89d24a6b4ccb1b6faa2625fe562bdd9a23260359":{name:"Sai Stablecoin",symbol:"SAI"},"0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2":{name:"Maker Token",symbol:"MKR"},"0xecf8f87f810ecf450940c9f60066b4a7a501d6a7":{name:"Old Wrapped Ether",symbol:"WETH"},"0xc66ea802717bfb9833400264dd12c2bceaa34a6d":{name:"Old Maker Token",symbol:"MKR"},"0xbb9bc244d798123fde783fcc1c72d3bb8c189413":{name:"TheDAO Token",symbol:"TheDAO"},"0x86fa049857e0209aa7d9e616f7eb3b3b78ecfdb0":{name:"EOS: Old Token",symbol:"EOS"}},3:{}},d=a(46),u=a(23),m=a(36),p=a(29),f=a.n(p),b=a(43);a.d(t,"a",(function(){return E})),a.d(t,"b",(function(){return h})),a.d(t,"d",(function(){return g}));var w=Object(l.b)({name:"tokenContracts",initialState:{contractsById:{}},reducers:{addContract:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.tokenContract;e.contractsById[n]=r},prepare:function(e,t,a,n,r,c){return{payload:{id:e,tokenContract:{addressId:e,name:t,symbol:a,decimals:n,totalSupply:r,contractInstance:c}}}}}},extraReducers:Object(o.a)({},b.d.type,(function(e,t){var a=t.payload;console.log("Clearing token contracts due to network change to ".concat(a)),e.contractsById={}}))}),E=w.actions.addContract,h=(t.c=w.reducer,function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,o,l,s,u,m;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n().onboard.networkId,o=e.address.toLowerCase(),l="",s="",!Object.keys(i[c]).includes(o)){t.next=9;break}l=i[c][o].name,s=i[c][o].symbol,t.next=21;break;case 9:return t.prev=9,t.next=12,e.name();case 12:return l=t.sent,t.next=15,e.symbol();case 15:s=t.sent,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(9),console.log("Failed to get name/symbol of contract at ".concat(o,". Please raise\n                an issue to add this token at https://github.com/TripleSpeeder/token-allowance-checker/issues!"));case 21:return u=new f.a("0"),t.prev=22,t.next=25,e.decimals();case 25:u=t.sent,t.next=31;break;case 28:t.prev=28,t.t1=t.catch(22),console.log("Contract at ".concat(o," does not provide decimals(). Assuming 0."));case 31:return t.prev=31,t.next=34,e.totalSupply();case 34:m=t.sent,t.next=41;break;case 37:return t.prev=37,t.t2=t.catch(31),console.log("Failed to call totalSupply() at ".concat(o,". Ignoring contract.")),t.abrupt("return");case 41:a(Object(d.b)(o)),a(E(o,l,s,u,m,e));case 43:case"end":return t.stop()}}),t,null,[[9,18],[22,28],[31,37]])})));return function(e,a){return t.apply(this,arguments)}}()}),g=function(e,t,a,n){return function(){var o=Object(c.a)(r.a.mark((function c(o,l){var i,d,p,f;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Setting new allowance ".concat(a.toString()," for tokenContractId ").concat(e)),i=l().tokenContracts.contractsById[e].contractInstance,d=l().addresses.walletAddressId,p=Object(s.a)(),o(Object(m.b)({transactionId:p,allowanceId:n,transactionState:m.a.SUBMITTED})),r.prev=5,r.next=8,i.approve(t,a.toString(),{from:d});case 8:f=r.sent,console.log("transaction confirmed: ".concat(f.tx,". Reloading allowance.")),o(Object(m.d)({transactionId:p,transactionState:m.a.CONFIRMED,transactionHash:f.tx})),o(Object(u.c)(n)),r.next=18;break;case 14:r.prev=14,r.t0=r.catch(5),console.log("Error while approving: ".concat(r.t0.message)),o(Object(m.d)({transactionId:p,transactionState:m.a.FAILED,error:r.t0.message}));case 18:case"end":return r.stop()}}),c,null,[[5,14]])})));return function(e,t){return o.apply(this,arguments)}}()}},832:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=832},838:function(e,t){},84:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"b",(function(){return w}));var n=a(8),r=a.n(n),c=a(31),o=a(32),l=a(23),s=a(29),i=a.n(s),d=Object(o.b)({name:"balances",initialState:{balancesById:{}},reducers:{addBalance:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.balance;e.balancesById[n]=r},prepare:function(e,t,a){return{payload:{id:e,balance:{id:e,addressId:t,tokenContractId:a,queryState:l.a.QUERY_STATE_INITIAL,value:new i.a("-1")}}}}},setBalanceValue:function(e,t){var a=t.payload,n=a.id,r=a.value;e.balancesById[n].value=r},setBalanceQuerystate:function(e,t){var a=t.payload,n=a.id,r=a.queryState;e.balancesById[n].queryState=r}}}),u=function(e,t){return"".concat(e,"-").concat(t)},m=d.actions,p=m.addBalance,f=m.setBalanceValue,b=m.setBalanceQuerystate,w=function(e,t){return function(){var a=Object(c.a)(r.a.mark((function a(n,c){var o,s,i,d;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=u(e,t),n(p(o,e,t)),n(b({id:o,queryState:l.a.QUERY_STATE_RUNNING})),s=c().tokenContracts.contractsById[t],i=c().addresses.addressesById[e],a.prev=5,a.next=8,s.contractInstance.balanceOf(i.address);case 8:d=a.sent,n(f({id:o,value:d})),n(b({id:o,queryState:l.a.QUERY_STATE_COMPLETE})),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(5),console.log("Error getting balance: ".concat(a.t0)),n(b({id:o,queryState:l.a.QUERY_STATE_ERROR}));case 17:case"end":return a.stop()}}),a,null,[[5,13]])})));return function(e,t){return a.apply(this,arguments)}}()};t.d=d.reducer},864:function(e,t){},879:function(e,t,a){},880:function(e,t,a){}},[[512,2,3]]]);
//# sourceMappingURL=main.5c6b7e2c.chunk.js.map